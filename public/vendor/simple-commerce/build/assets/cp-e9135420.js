var q=Object.defineProperty;var Y=(n,t,e)=>t in n?q(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var W=(n,t,e)=>(Y(n,typeof t!="symbol"?t+"":t,e),e);function normalizeComponent(n,t,e,s,r,a,o,l){var c=typeof n=="function"?n.options:n;t&&(c.render=t,c.staticRenderFns=e,c._compiled=!0),s&&(c.functional=!0),a&&(c._scopeId="data-v-"+a);var h;if(o?(h=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__<"u"&&(f=__VUE_SSR_CONTEXT__),r&&r.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(o)},c._ssrRegister=h):r&&(h=l?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),h)if(c.functional){c._injectStyles=h;var u=c.render;c.render=function(p,g){return h.call(g),u(p,g)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,h):[h]}return{exports:n,options:c}}const _sfc_main$o={name:"CouponCodeFieldtype",mixins:[Fieldtype],props:["meta"]};var _sfc_render$o=function(){var t=this,e=t._self._c;return e("text-fieldtype",{attrs:{meta:t.meta,config:{classes:"uppercase font-mono",focus:"code",autoselect:!0,input_type:"text"},value:t.value},on:{input:t.updateDebounced},nativeOn:{keydown:function(s){if(!s.type.indexOf("key")&&t._k(s.keyCode,"space",32,s.key,[" ","Spacebar"]))return null;s.preventDefault()}}})},_sfc_staticRenderFns$o=[],__component__$o=normalizeComponent(_sfc_main$o,_sfc_render$o,_sfc_staticRenderFns$o,!1,null,null,null,null);const CouponCodeFieldtype=__component__$o.exports;function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults$5=getDefaults();function changeDefaults(n){defaults$5=n}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=n=>escapeReplacements[n];function escape(n,t){if(t){if(escapeTest.test(n))return n.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(n))return n.replace(escapeReplaceNoEncode,getEscapeReplacement);return n}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(n){return n.replace(unescapeTest,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(n,t){n=typeof n=="string"?n:n.source,t=t||"";const e={replace:(s,r)=>(r=r.source||r,r=r.replace(caret,"$1"),n=n.replace(s,r),e),getRegex:()=>new RegExp(n,t)};return e}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(n,t,e){if(n){let s;try{s=decodeURIComponent(unescape$1(e)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}t&&!originIndependentUrl.test(e)&&(e=resolveUrl(t,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(n,t){baseUrls[" "+n]||(justDomain.test(n)?baseUrls[" "+n]=n+"/":baseUrls[" "+n]=rtrim(n,"/",!0)),n=baseUrls[" "+n];const e=n.indexOf(":")===-1;return t.substring(0,2)==="//"?e?t:n.replace(protocol,"$1")+t:t.charAt(0)==="/"?e?t:n.replace(domain,"$1")+t:n+t}const noopTest={exec:function(){}};function splitCells(n,t){const e=n.replace(/\|/g,(a,o,l)=>{let c=!1,h=o;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),s=e.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function rtrim(n,t,e){const s=n.length;if(s===0)return"";let r=0;for(;r<s;){const a=n.charAt(s-r-1);if(a===t&&!e)r++;else if(a!==t&&e)r++;else break}return n.slice(0,s-r)}function findClosingBracket(n,t){if(n.indexOf(t[1])===-1)return-1;const e=n.length;let s=0,r=0;for(;r<e;r++)if(n[r]==="\\")r++;else if(n[r]===t[0])s++;else if(n[r]===t[1]&&(s--,s<0))return r;return-1}function checkSanitizeDeprecation(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(n,t){if(t<1)return"";let e="";for(;t>1;)t&1&&(e+=n),t>>=1,n+=n;return e+n}function outputLink(n,t,e,s){const r=t.href,a=t.title?escape(t.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){s.state.inLink=!0;const l={type:"link",raw:e,href:r,title:a,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,l}return{type:"image",raw:e,href:r,title:a,text:escape(o)}}function indentCodeCompensation(n,t){const e=n.match(/^(\s+)(?:```)/);if(e===null)return t;const s=e[1];return t.split(`
`).map(r=>{const a=r.match(/^\s+/);if(a===null)return r;const[o]=a;return o.length>=s.length?r.slice(s.length):r}).join(`
`)}class Tokenizer{constructor(t){this.options=t||defaults$5}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const s=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:rtrim(s,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const s=e[0],r=indentCodeCompensation(s,e[3]||"");return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let s=e[2].trim();if(/#$/.test(s)){const r=rtrim(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const s=e[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(s);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:a,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let s,r,a,o,l,c,h,u,d,f,p,g,b=e[1].trim();const m=b.length>1,v={type:"list",raw:"",ordered:m,start:m?+b.slice(0,-1):"",loose:!1,items:[]};b=m?`\\d{1,9}\\${b.slice(-1)}`:`\\${b}`,this.options.pedantic&&(b=m?b:"[*+-]");const y=new RegExp(`^( {0,3}${b})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(g=!1,!(!(e=y.exec(t))||this.rules.block.hr.test(t)));){if(s=e[0],t=t.substring(s.length),u=e[2].split(`
`,1)[0].replace(/^\t+/,C=>" ".repeat(3*C.length)),d=t.split(`
`,1)[0],this.options.pedantic?(o=2,p=u.trimLeft()):(o=e[2].search(/[^ ]/),o=o>4?1:o,p=u.slice(o),o+=e[1].length),c=!1,!u&&/^ *$/.test(d)&&(s+=d+`
`,t=t.substring(d.length+1),g=!0),!g){const C=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;t&&(f=t.split(`
`,1)[0],d=f,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(k.test(d)||w.test(d)||C.test(d)||x.test(t)));){if(d.search(/[^ ]/)>=o||!d.trim())p+=`
`+d.slice(o);else{if(c||u.search(/[^ ]/)>=4||k.test(u)||w.test(u)||x.test(u))break;p+=`
`+d}!c&&!d.trim()&&(c=!0),s+=f+`
`,t=t.substring(f.length+1),u=d.slice(o)}}v.loose||(h?v.loose=!0:/\n *\n *$/.test(s)&&(h=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(p),r&&(a=r[0]!=="[ ] ",p=p.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:s,task:!!r,checked:a,loose:!1,text:p}),v.raw+=s}v.items[v.items.length-1].raw=s.trimRight(),v.items[v.items.length-1].text=p.trimRight(),v.raw=v.raw.trimRight();const S=v.items.length;for(l=0;l<S;l++)if(this.lexer.state.top=!1,v.items[l].tokens=this.lexer.blockTokens(v.items[l].text,[]),!v.loose){const C=v.items[l].tokens.filter(k=>k.type==="space"),x=C.length>0&&C.some(k=>/\n.*\n/.test(k.raw));v.loose=x}if(v.loose)for(l=0;l<S;l++)v.items[l].loose=!0;return v}}html(t){const e=this.rules.block.html.exec(t);if(e){const s={type:"html",raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(e[0]):escape(e[0]);s.type="paragraph",s.text=r,s.tokens=this.lexer.inline(r)}return s}}def(t){const e=this.rules.block.def.exec(t);if(e){const s=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:r,title:a}}}table(t){const e=this.rules.block.table.exec(t);if(e){const s={type:"table",header:splitCells(e[1]).map(r=>({text:r})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=e[0];let r=s.align.length,a,o,l,c;for(a=0;a<r;a++)/^ *-+: *$/.test(s.align[a])?s.align[a]="right":/^ *:-+: *$/.test(s.align[a])?s.align[a]="center":/^ *:-+ *$/.test(s.align[a])?s.align[a]="left":s.align[a]=null;for(r=s.rows.length,a=0;a<r;a++)s.rows[a]=splitCells(s.rows[a],s.header.length).map(h=>({text:h}));for(r=s.header.length,o=0;o<r;o++)s.header[o].tokens=this.lexer.inline(s.header[o].text);for(r=s.rows.length,o=0;o<r;o++)for(c=s.rows[o],l=0;l<c.length;l++)c[l].tokens=this.lexer.inline(c[l].text);return s}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:escape(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):escape(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const s=e[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=rtrim(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=findClosingBracket(e[2],"()");if(o>-1){const c=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,c).trim(),e[3]=""}}let r=e[2],a="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],a=o[3])}else a=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),outputLink(e,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){let r=(s[2]||s[1]).replace(/\s+/g," ");if(r=e[r.toLowerCase()],!r){const a=s[0].charAt(0);return{type:"text",raw:a,text:a}}return outputLink(s,r,s[0],this.lexer)}}emStrong(t,e,s=""){let r=this.rules.inline.emStrong.lDelim.exec(t);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;const a=r[1]||r[2]||"";if(!a||a&&(s===""||this.rules.inline.punctuation.exec(s))){const o=r[0].length-1;let l,c,h=o,u=0;const d=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+o);(r=d.exec(e))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(c=l.length,r[3]||r[4]){h+=c;continue}else if((r[5]||r[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(h-=c,h>0)continue;c=Math.min(c,c+h+u);const f=t.slice(0,o+r.index+(r[0].length-l.length)+c);if(Math.min(o,c)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let s=e[2].replace(/\n/g," ");const r=/[^ ]/.test(s),a=/^ /.test(s)&&/ $/.test(s);return r&&a&&(s=s.substring(1,s.length-1)),s=escape(s,!0),{type:"codespan",raw:e[0],text:s}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){const s=this.rules.inline.autolink.exec(t);if(s){let r,a;return s[2]==="@"?(r=escape(this.options.mangle?e(s[1]):s[1]),a="mailto:"+r):(r=escape(s[1]),a=r),{type:"link",raw:s[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}url(t,e){let s;if(s=this.rules.inline.url.exec(t)){let r,a;if(s[2]==="@")r=escape(this.options.mangle?e(s[0]):s[0]),a="mailto:"+r;else{let o;do o=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(o!==s[0]);r=escape(s[0]),s[1]==="www."?a="http://"+s[0]:a=s[0]}return{type:"link",raw:s[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t,e){const s=this.rules.inline.text.exec(t);if(s){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):escape(s[0]):s[0]:r=escape(this.options.smartypants?e(s[0]):s[0]),{type:"text",raw:s[0],text:r}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal={...block};block.gfm={...block.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic={...block.normal,html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal={...inline};inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()};inline.gfm={...inline.normal,escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks={...inline.gfm,br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function smartypants(n){return n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(n){let t="",e,s;const r=n.length;for(e=0;e<r;e++)s=n.charCodeAt(e),Math.random()>.5&&(s="x"+s.toString(16)),t+="&#"+s+";";return t}class Lexer{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||defaults$5,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:block.normal,inline:inline.normal};this.options.pedantic?(e.block=block.pedantic,e.inline=inline.pedantic):this.options.gfm&&(e.block=block.gfm,this.options.breaks?e.inline=inline.breaks:e.inline=inline.gfm),this.tokenizer.rules=e}static get rules(){return{block,inline}}static lex(t,e){return new Lexer(e).lex(t)}static lexInline(t,e){return new Lexer(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(l,c,h)=>c+"    ".repeat(h.length));let s,r,a,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(s=l.call({lexer:this},t,e))?(t=t.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),e.push(s);continue}if(a=t,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=t.slice(1);let h;this.options.extensions.startBlock.forEach(function(u){h=u.call({lexer:this},c),typeof h=="number"&&h>=0&&(l=Math.min(l,h))}),l<1/0&&l>=0&&(a=t.substring(0,l+1))}if(this.state.top&&(s=this.tokenizer.paragraph(a))){r=e[e.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(s),o=a.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),r=e[e.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(s);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let s,r,a,o=t,l,c,h;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,l.index)+"["+repeatString("a",l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,l.index)+"["+repeatString("a",l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,l.index+l[0].length-2)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(c||(h=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(s=u.call({lexer:this},t,e))?(t=t.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),r=e[e.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):e.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length),r=e[e.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(t,o,h)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(t,mangle)){t=t.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t,mangle))){t=t.substring(s.raw.length),e.push(s);continue}if(a=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=t.slice(1);let f;this.options.extensions.startInline.forEach(function(p){f=p.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(a=t.substring(0,u+1))}if(s=this.tokenizer.inlineText(a,smartypants)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(h=s.raw.slice(-1)),c=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):e.push(s);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return e}}class Renderer{constructor(t){this.options=t||defaults$5}code(t,e,s){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const a=this.options.highlight(t,r);a!=null&&a!==t&&(s=!0,t=a)}return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+escape(r)+'">'+(s?t:escape(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:escape(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t){return t}heading(t,e,s,r){if(this.options.headerIds){const a=this.options.headerPrefix+r.slug(s);return`<h${e} id="${a}">${t}</h${e}>
`}return`<h${e}>${t}</h${e}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,e,s){const r=e?"ol":"ul",a=e&&s!==1?' start="'+s+'"':"";return"<"+r+a+`>
`+t+"</"+r+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){const s=e.header?"th":"td";return(e.align?`<${s} align="${e.align}">`:`<${s}>`)+t+`</${s}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,s){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return s;let r='<a href="'+t+'"';return e&&(r+=' title="'+e+'"'),r+=">"+s+"</a>",r}image(t,e,s){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return s;let r=`<img src="${t}" alt="${s}"`;return e&&(r+=` title="${e}"`),r+=this.options.xhtml?"/>":">",r}text(t){return t}}class TextRenderer{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,s){return""+s}image(t,e,s){return""+s}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let s=t,r=0;if(this.seen.hasOwnProperty(s)){r=this.seen[t];do r++,s=t+"-"+r;while(this.seen.hasOwnProperty(s))}return e||(this.seen[t]=r,this.seen[s]=0),s}slug(t,e={}){const s=this.serialize(t);return this.getNextSafeSlug(s,e.dryrun)}}class Parser{constructor(t){this.options=t||defaults$5,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(t,e){return new Parser(e).parse(t)}static parseInline(t,e){return new Parser(e).parseInline(t)}parse(t,e=!0){let s="",r,a,o,l,c,h,u,d,f,p,g,b,m,v,y,S,C,x,k;const w=t.length;for(r=0;r<w;r++){if(p=t[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(k=this.options.extensions.renderers[p.type].call({parser:this},p),k!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type))){s+=k||"";continue}switch(p.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(p.tokens),p.depth,unescape$1(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(p.text,p.lang,p.escaped);continue}case"table":{for(d="",u="",l=p.header.length,a=0;a<l;a++)u+=this.renderer.tablecell(this.parseInline(p.header[a].tokens),{header:!0,align:p.align[a]});for(d+=this.renderer.tablerow(u),f="",l=p.rows.length,a=0;a<l;a++){for(h=p.rows[a],u="",c=h.length,o=0;o<c;o++)u+=this.renderer.tablecell(this.parseInline(h[o].tokens),{header:!1,align:p.align[o]});f+=this.renderer.tablerow(u)}s+=this.renderer.table(d,f);continue}case"blockquote":{f=this.parse(p.tokens),s+=this.renderer.blockquote(f);continue}case"list":{for(g=p.ordered,b=p.start,m=p.loose,l=p.items.length,f="",a=0;a<l;a++)y=p.items[a],S=y.checked,C=y.task,v="",y.task&&(x=this.renderer.checkbox(S),m?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=x+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=x+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:x}):v+=x),v+=this.parse(y.tokens,m),f+=this.renderer.listitem(v,C,S);s+=this.renderer.list(f,g,b);continue}case"html":{s+=this.renderer.html(p.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(p.tokens));continue}case"text":{for(f=p.tokens?this.parseInline(p.tokens):p.text;r+1<w&&t[r+1].type==="text";)p=t[++r],f+=`
`+(p.tokens?this.parseInline(p.tokens):p.text);s+=e?this.renderer.paragraph(f):f;continue}default:{const E='Token with "'+p.type+'" type was not found.';if(this.options.silent){console.error(E);return}else throw new Error(E)}}}return s}parseInline(t,e){e=e||this.renderer;let s="",r,a,o;const l=t.length;for(r=0;r<l;r++){if(a=t[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(o=this.options.extensions.renderers[a.type].call({parser:this},a),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){s+=o||"";continue}switch(a.type){case"escape":{s+=e.text(a.text);break}case"html":{s+=e.html(a.text);break}case"link":{s+=e.link(a.href,a.title,this.parseInline(a.tokens,e));break}case"image":{s+=e.image(a.href,a.title,a.text);break}case"strong":{s+=e.strong(this.parseInline(a.tokens,e));break}case"em":{s+=e.em(this.parseInline(a.tokens,e));break}case"codespan":{s+=e.codespan(a.text);break}case"br":{s+=e.br();break}case"del":{s+=e.del(this.parseInline(a.tokens,e));break}case"text":{s+=e.text(a.text);break}default:{const c='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(c);return}else throw new Error(c)}}}return s}}class Hooks{constructor(t){this.options=t||defaults$5}preprocess(t){return t}postprocess(t){return t}}W(Hooks,"passThroughHooks",new Set(["preprocess","postprocess"]));function onError(n,t,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const r="<p>An error occurred:</p><pre>"+escape(s.message+"",!0)+"</pre>";if(t)return Promise.resolve(r);if(e){e(null,r);return}return r}if(t)return Promise.reject(s);if(e){e(s);return}throw s}}function parseMarkdown(n,t){return(e,s,r)=>{typeof s=="function"&&(r=s,s=null);const a={...s};s={...marked.defaults,...a};const o=onError(s.silent,s.async,r);if(typeof e>"u"||e===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(checkSanitizeDeprecation(s),s.hooks&&(s.hooks.options=s),r){const l=s.highlight;let c;try{s.hooks&&(e=s.hooks.preprocess(e)),c=n(e,s)}catch(d){return o(d)}const h=function(d){let f;if(!d)try{s.walkTokens&&marked.walkTokens(c,s.walkTokens),f=t(c,s),s.hooks&&(f=s.hooks.postprocess(f))}catch(p){d=p}return s.highlight=l,d?o(d):r(null,f)};if(!l||l.length<3||(delete s.highlight,!c.length))return h();let u=0;marked.walkTokens(c,function(d){d.type==="code"&&(u++,setTimeout(()=>{l(d.text,d.lang,function(f,p){if(f)return h(f);p!=null&&p!==d.text&&(d.text=p,d.escaped=!0),u--,u===0&&h()})},0))}),u===0&&h();return}if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(e):e).then(l=>n(l,s)).then(l=>s.walkTokens?Promise.all(marked.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>t(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(o);try{s.hooks&&(e=s.hooks.preprocess(e));const l=n(e,s);s.walkTokens&&marked.walkTokens(l,s.walkTokens);let c=t(l,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(l){return o(l)}}}function marked(n,t,e){return parseMarkdown(Lexer.lex,Parser.parse)(n,t,e)}marked.options=marked.setOptions=function(n){return marked.defaults={...marked.defaults,...n},changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults$5;marked.use=function(...n){const t=marked.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(e=>{const s={...e};if(s.async=marked.defaults.async||s.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const a=t.renderers[r.name];a?t.renderers[r.name]=function(...o){let l=r.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:t.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[r.level]?t[r.level].unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),s.extensions=t),e.renderer){const r=marked.defaults.renderer||new Renderer;for(const a in e.renderer){const o=r[a];r[a]=(...l)=>{let c=e.renderer[a].apply(r,l);return c===!1&&(c=o.apply(r,l)),c}}s.renderer=r}if(e.tokenizer){const r=marked.defaults.tokenizer||new Tokenizer;for(const a in e.tokenizer){const o=r[a];r[a]=(...l)=>{let c=e.tokenizer[a].apply(r,l);return c===!1&&(c=o.apply(r,l)),c}}s.tokenizer=r}if(e.hooks){const r=marked.defaults.hooks||new Hooks;for(const a in e.hooks){const o=r[a];Hooks.passThroughHooks.has(a)?r[a]=l=>{if(marked.defaults.async)return Promise.resolve(e.hooks[a].call(r,l)).then(h=>o.call(r,h));const c=e.hooks[a].call(r,l);return o.call(r,c)}:r[a]=(...l)=>{let c=e.hooks[a].apply(r,l);return c===!1&&(c=o.apply(r,l)),c}}s.hooks=r}if(e.walkTokens){const r=marked.defaults.walkTokens;s.walkTokens=function(a){let o=[];return o.push(e.walkTokens.call(this,a)),r&&(o=o.concat(r.call(this,a))),o}}marked.setOptions(s)})};marked.walkTokens=function(n,t){let e=[];for(const s of n)switch(e=e.concat(t.call(marked,s)),s.type){case"table":{for(const r of s.header)e=e.concat(marked.walkTokens(r.tokens,t));for(const r of s.rows)for(const a of r)e=e.concat(marked.walkTokens(a.tokens,t));break}case"list":{e=e.concat(marked.walkTokens(s.items,t));break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[s.type]?marked.defaults.extensions.childTokens[s.type].forEach(function(r){e=e.concat(marked.walkTokens(s[r],t))}):s.tokens&&(e=e.concat(marked.walkTokens(s.tokens,t)))}return e};marked.parseInline=parseMarkdown(Lexer.lexInline,Parser.parseInline);marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.Hooks=Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;const translate=function(n,t){let e=getLine(n);for(let s in t)e=e.split(":"+s).join(t[s]);return e},getLine=function(n){const t=Statamic.$config.get("translations");return t[`*.${n}`]||t[n]||t[`statamic::${n}`]||t[`statamic::messages.${n}`]||n};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),e}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uniqid={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);var pid=typeof process<"u"&&process.pid?process.pid.toString(36):"",address="";if(typeof __webpack_require__!="function"&&typeof commonjsRequire<"u"){var mac="",os=require$$0$1;if(os.networkInterfaces)var networkInterfaces=os.networkInterfaces();if(networkInterfaces){t:for(let n in networkInterfaces){const t=networkInterfaces[n],e=t.length;for(var i=0;i<e;i++)if(t[i]!==void 0&&t[i].mac&&t[i].mac!="00:00:00:00:00:00"){mac=t[i].mac;break t}}address=mac?parseInt(mac.replace(/\:|\D+/gi,"")).toString(36):""}}uniqid.exports=uniqid.exports.default=function(n,t){return(n||"")+address+pid+now().toString(36)+(t||"")};uniqid.exports.process=function(n,t){return(n||"")+pid+now().toString(36)+(t||"")};uniqid.exports.time=function(n,t){return(n||"")+now().toString(36)+(t||"")};function now(){var n=Date.now(),t=now.last||n;return now.last=n>t?n:t+1}function data_get(n,t,e=null){var s=Array.isArray(t)?t:t.split("."),r=s.reduce((a,o)=>a&&a[o],n);return r!==void 0?r:e}function __$1(n,t){return translate(n,t)}const _sfc_main$n={name:"CouponSummaryFieldtype",mixins:[Fieldtype],inject:["storeName"],computed:{values(){return Statamic.$store.state.publish[this.storeName].values}},methods:{formatCurrency(n){return this.meta.currency.symbol+n}}};var _sfc_render$n=function(){var s,r;var t=this,e=t._self._c;return e("div",[e("ul",{staticClass:"list-disc pl-6"},[t.values.type==="fixed"&&t.values.value&&t.values.value.value!==null?e("li",{staticClass:"text-sm mb-1.5"},[e("span",{staticClass:"font-semibold",domProps:{textContent:t._s(t.formatCurrency(t.values.value.value))}}),t._v(" off entire order ")]):t._e(),t.values.type==="percentage"&&t.values.value&&t.values.value.value!==null?e("li",{staticClass:"text-sm mb-1.5"},[e("span",{staticClass:"font-semibold",domProps:{textContent:t._s(`${t.values.value.value}%`)}}),t._v(" off entire order ")]):t._e(),t.values.minimum_cart_value?e("li",{staticClass:"text-sm mb-1.5"},[t._v(" Redeemable when items total is above "),e("span",{domProps:{textContent:t._s(t.formatCurrency(this.values.minimum_cart_value))}})]):t._e(),t.values.customer_eligibility==="all"?e("li",{staticClass:"text-sm mb-1.5"},[t._v(" "+t._s(t.__("Redeemable by all customers"))+" ")]):t._e(),t.values.customer_eligibility==="specific_customers"?e("li",{staticClass:"text-sm mb-1.5"},[t._v(" Only redeemable by specific customers ")]):t._e(),t.values.maximum_uses?e("li",{staticClass:"text-sm mb-1.5"},[t._v(" Can only be used "+t._s(t.values.maximum_uses)+" times ")]):t._e(),t.values.products.length>0?e("li",{staticClass:"text-sm mb-1.5"},[t._v(" Can only be used when certain products are part of the order ")]):t._e(),(s=t.values.valid_from)!=null&&s.date?e("li",{staticClass:"text-sm mb-1.5"},[t._v(" Redeemable after "+t._s(t.values.valid_from.date)+" ")]):t._e(),(r=t.values.expires_at)!=null&&r.date?e("li",{staticClass:"text-sm mb-1.5"},[t._v(" Redeemable until "+t._s(t.values.expires_at.date)+" ")]):t._e()])])},_sfc_staticRenderFns$n=[],__component__$n=normalizeComponent(_sfc_main$n,_sfc_render$n,_sfc_staticRenderFns$n,!1,null,null,null,null);const CouponSummaryFieldtype=__component__$n.exports,_sfc_main$m={name:"CouponValueFieldtype",mixins:[Fieldtype],props:["meta"],data(){return{mode:null,couponValue:null}},computed:{errors(){let n=this.$store.state.publish.base.errors;return n["value.mode"]||n["value.value"]}},mounted(){this.hideValueField(),this.mode=this.$store.state.publish.base.values.type,this.couponValue=this.value,this.mode!==null&&this.showValueField(),this.$store.watch(n=>n.publish.base.values.type,n=>{this.mode=n,this.couponValue=null,this.mode!==null&&this.showValueField()},{immediate:!1})},methods:{hideValueField(){document.querySelectorAll(".coupon-value-fieldtype").forEach(n=>n.classList.add("hidden"))},showValueField(){document.querySelectorAll(".coupon-value-fieldtype").forEach(n=>n.classList.remove("hidden"))}},watch:{couponValue(n){let t={mode:this.mode,value:n};this.value=t,this.$emit("input",t)}}};var _sfc_render$m=function(){var t=this,e=t._self._c;return e("div",[t.mode==="fixed"?e("money-fieldtype",{attrs:{meta:t.meta.meta.money,config:t.meta.config.money},model:{value:t.couponValue,callback:function(s){t.couponValue=s},expression:"couponValue"}}):t.mode==="percentage"?e("integer-fieldtype",{attrs:{meta:t.meta.meta.integer,config:t.meta.config.integer},model:{value:t.couponValue,callback:function(s){t.couponValue=s},expression:"couponValue"}}):t._e(),t.errors?e("div",t._l(t.errors,function(s){return e("small",{staticClass:"help-block text-red-500 mt-2 mb-0"},[t._v(t._s(s))])}),0):t._e()],1)},_sfc_staticRenderFns$m=[],__component__$m=normalizeComponent(_sfc_main$m,_sfc_render$m,_sfc_staticRenderFns$m,!1,null,null,null,null);const CouponValueFieldtype=__component__$m.exports,_sfc_main$l={name:"gateway-fieldtype",mixins:[Fieldtype],props:["meta"],data(){return{gatewayData:this.value.data,entry:this.value.entry,actions:this.value.actions,actionUrl:this.value.action_url,gatewayClass:this.value.gateway_class,display:this.value.display}},computed:{display(){return this.value.display},gatewayName(){const n=this.value.gateway_class;return this.meta.gateways.find(e=>e.class===n).name}},methods:{actionStarted(){},actionCompleted(){this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),this.$toast.success(__("Action completed"))}}};var _sfc_render$l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"relationship-input"},[t.value==null?e("p",{staticClass:"text-sm py-1"},[t._v(t._s(t.__("No Gateway")))]):e("div",{staticClass:"relationship-input-items space-y-1 outline-none",attrs:{tabindex:"0"}},[e("div",{staticClass:"item select-none item outline-none",attrs:{tabindex:"0"}},[e("div",{staticClass:"item-inner"},[e("a",{attrs:{href:t.display.url,target:"_blank"}},[t._v(" "+t._s(t.display.text)+" ")])]),e("div",{staticClass:"text-4xs text-grey-60 uppercase whitespace-no-wrap mr-1"},[t._v(" "+t._s(t.gatewayName)+" ")]),t.readOnly?t._e():e("div",{staticClass:"pr-1 flex items-center"},[e("dropdown-list",[e("data-list-inline-actions",{attrs:{item:t.entry,url:t.actionUrl,actions:t.actions},on:{started:t.actionStarted,completed:t.actionCompleted}})],1)],1)])])])},_sfc_staticRenderFns$l=[],__component__$l=normalizeComponent(_sfc_main$l,_sfc_render$l,_sfc_staticRenderFns$l,!1,null,null,null,null);const GatewayFieldtype=__component__$l.exports,_sfc_main$k={name:"money-fieldtype",mixins:[Fieldtype],props:["meta"],data(){return{symbol:this.meta.symbol}},computed:{inputType(){return this.show}}};var _sfc_render$k=function(){var t=this,e=t._self._c;return e("div",[e("text-input",{attrs:{type:t.inputType,value:t.value,prepend:t.symbol,isReadOnly:t.config.read_only||t.readOnly,placeholder:"00.00"},on:{input:t.update}})],1)},_sfc_staticRenderFns$k=[],__component__$k=normalizeComponent(_sfc_main$k,_sfc_render$k,_sfc_staticRenderFns$k,!1,null,null,null,null);const MoneyFieldtype=__component__$k.exports,_sfc_main$j={name:"order-status-fieldtype",mixins:[Fieldtype],props:["meta"],computed:{littleDotColour(){switch(this.value){case"cart":return"bg-gray-400";case"placed":return"bg-orange";case"dispatched":return"bg-blue-300";case"delivered":return"bg-green-600";case"cancelled":return"bg-red-500";default:return""}},statusName(){return __(this.meta.statuses[this.value])}}};var _sfc_render$j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"relationship-input"},[e("div",{staticClass:"relationship-input-items space-y-1 outline-none",attrs:{tabindex:"0"}},[e("div",{staticClass:"item item outline-none",attrs:{tabindex:"0"}},[e("div",{staticClass:"item-inner"},[e("span",{staticClass:"little-dot mr-1",class:t.littleDotColour}),e("span",[t._v(" "+t._s(t.statusName)+" ")])])])])])},_sfc_staticRenderFns$j=[],__component__$j=normalizeComponent(_sfc_main$j,_sfc_render$j,_sfc_staticRenderFns$j,!1,null,null,null,null);const OrderStatusFieldtype=__component__$j.exports,_sfc_main$i={mixins:[IndexFieldtype],computed:{littleDotColour(){switch(this.value){case"cart":return"bg-gray-400";case"placed":return"bg-orange";case"dispatched":return"bg-blue-300";case"delivered":return"bg-green-600";case"cancelled":return"bg-red-500";default:return""}},statusName(){return __(this.value.charAt(0).toUpperCase()+this.value.substr(1).toLowerCase())}}};var _sfc_render$i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"little-dot mr-1",class:t.littleDotColour}),e("span",[t._v(" "+t._s(t.statusName)+" ")])])])},_sfc_staticRenderFns$i=[],__component__$i=normalizeComponent(_sfc_main$i,_sfc_render$i,_sfc_staticRenderFns$i,!1,null,null,null,null);const OrderStatusIndexFieldtype=__component__$i.exports,_sfc_main$h={name:"payment-status-fieldtype",mixins:[Fieldtype],props:["meta"],computed:{littleDotColour(){switch(this.value){case"unpaid":return"bg-gray-400";case"paid":return"bg-green-600";case"refunded":return"bg-grey";default:return""}},statusName(){return __(this.meta.statuses[this.value])}}};var _sfc_render$h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"relationship-input"},[e("div",{staticClass:"relationship-input-items space-y-1 outline-none",attrs:{tabindex:"0"}},[e("div",{staticClass:"item item outline-none",attrs:{tabindex:"0"}},[e("div",{staticClass:"item-inner"},[e("span",{staticClass:"little-dot mr-2",class:t.littleDotColour}),e("span",[t._v(" "+t._s(t.statusName)+" ")])])])])])},_sfc_staticRenderFns$h=[],__component__$h=normalizeComponent(_sfc_main$h,_sfc_render$h,_sfc_staticRenderFns$h,!1,null,null,null,null);const PaymentStatusFieldtype=__component__$h.exports,_sfc_main$g={mixins:[IndexFieldtype],computed:{littleDotColour(){switch(this.value){case"unpaid":return"bg-gray-400";case"paid":return"bg-green-600";case"refunded":return"bg-grey";default:return""}},statusName(){return __(this.value.charAt(0).toUpperCase()+this.value.substr(1).toLowerCase())}}};var _sfc_render$g=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"little-dot mr-2",class:t.littleDotColour}),e("span",[t._v(" "+t._s(t.statusName)+" ")])])])},_sfc_staticRenderFns$g=[],__component__$g=normalizeComponent(_sfc_main$g,_sfc_render$g,_sfc_staticRenderFns$g,!1,null,null,null,null);const PaymentStatusIndexFieldtype=__component__$g.exports;var axios$3={exports:{}},bind$2=function(t,e){return function(){for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];return t.apply(e,r)}},bind$1=bind$2,toString$1=Object.prototype.toString;function isArray$2(n){return toString$1.call(n)==="[object Array]"}function isUndefined(n){return typeof n>"u"}function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function isArrayBuffer(n){return toString$1.call(n)==="[object ArrayBuffer]"}function isFormData(n){return typeof FormData<"u"&&n instanceof FormData}function isArrayBufferView(n){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&n.buffer instanceof ArrayBuffer,t}function isString$1(n){return typeof n=="string"}function isNumber$2(n){return typeof n=="number"}function isObject$2(n){return n!==null&&typeof n=="object"}function isPlainObject(n){if(toString$1.call(n)!=="[object Object]")return!1;var t=Object.getPrototypeOf(n);return t===null||t===Object.prototype}function isDate(n){return toString$1.call(n)==="[object Date]"}function isFile(n){return toString$1.call(n)==="[object File]"}function isBlob(n){return toString$1.call(n)==="[object Blob]"}function isFunction$4(n){return toString$1.call(n)==="[object Function]"}function isStream(n){return isObject$2(n)&&isFunction$4(n.pipe)}function isURLSearchParams(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}function trim(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(n,t){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),isArray$2(n))for(var e=0,s=n.length;e<s;e++)t.call(null,n[e],e,n);else for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.call(null,n[r],r,n)}function merge$1(){var n={};function t(r,a){isPlainObject(n[a])&&isPlainObject(r)?n[a]=merge$1(n[a],r):isPlainObject(r)?n[a]=merge$1({},r):isArray$2(r)?n[a]=r.slice():n[a]=r}for(var e=0,s=arguments.length;e<s;e++)forEach(arguments[e],t);return n}function extend(n,t,e){return forEach(t,function(r,a){e&&typeof r=="function"?n[a]=bind$1(r,e):n[a]=r}),n}function stripBOM(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var utils$9={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$2,isObject:isObject$2,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction:isFunction$4,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge:merge$1,extend,trim,stripBOM},utils$8=utils$9;function encode(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function(t,e,s){if(!e)return t;var r;if(s)r=s(e);else if(utils$8.isURLSearchParams(e))r=e.toString();else{var a=[];utils$8.forEach(e,function(c,h){c===null||typeof c>"u"||(utils$8.isArray(c)?h=h+"[]":c=[c],utils$8.forEach(c,function(d){utils$8.isDate(d)?d=d.toISOString():utils$8.isObject(d)&&(d=JSON.stringify(d)),a.push(encode(h)+"="+encode(d))}))}),r=a.join("&")}if(r){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t},utils$7=utils$9;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};InterceptorManager$1.prototype.forEach=function(t){utils$7.forEach(this.handlers,function(s){s!==null&&t(s)})};var InterceptorManager_1=InterceptorManager$1,utils$6=utils$9,normalizeHeaderName$1=function(t,e){utils$6.forEach(t,function(r,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[a])})},enhanceError$1=function(t,e,s,r,a){return t.config=e,s&&(t.code=s),t.request=r,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},createError,hasRequiredCreateError;function requireCreateError(){if(hasRequiredCreateError)return createError;hasRequiredCreateError=1;var n=enhanceError$1;return createError=function(e,s,r,a,o){var l=new Error(e);return n(l,s,r,a,o)},createError}var settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var n=requireCreateError();return settle=function(e,s,r){var a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):s(n("Request failed with status code "+r.status,r.config,null,r.request,r))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var n=utils$9;return cookies=n.isStandardBrowserEnv()?function(){return{write:function(s,r,a,o,l,c){var h=[];h.push(s+"="+encodeURIComponent(r)),n.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),n.isString(o)&&h.push("path="+o),n.isString(l)&&h.push("domain="+l),c===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(s){var r=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL,hasRequiredIsAbsoluteURL;function requireIsAbsoluteURL(){return hasRequiredIsAbsoluteURL||(hasRequiredIsAbsoluteURL=1,isAbsoluteURL=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),isAbsoluteURL}var combineURLs,hasRequiredCombineURLs;function requireCombineURLs(){return hasRequiredCombineURLs||(hasRequiredCombineURLs=1,combineURLs=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}),combineURLs}var buildFullPath,hasRequiredBuildFullPath;function requireBuildFullPath(){if(hasRequiredBuildFullPath)return buildFullPath;hasRequiredBuildFullPath=1;var n=requireIsAbsoluteURL(),t=requireCombineURLs();return buildFullPath=function(s,r){return s&&!n(r)?t(s,r):r},buildFullPath}var parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var n=utils$9,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(s){var r={},a,o,l;return s&&n.forEach(s.split(`
`),function(h){if(l=h.indexOf(":"),a=n.trim(h.substr(0,l)).toLowerCase(),o=n.trim(h.substr(l+1)),a){if(r[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?r[a]=(r[a]?r[a]:[]).concat([o]):r[a]=r[a]?r[a]+", "+o:o}}),r},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var n=utils$9;return isURLSameOrigin=n.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),r;function a(o){var l=o;return e&&(s.setAttribute("href",l),l=s.href),s.setAttribute("href",l),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return r=a(window.location.href),function(l){var c=n.isString(l)?a(l):l;return c.protocol===r.protocol&&c.host===r.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var n=utils$9,t=requireSettle(),e=requireCookies(),s=buildURL$1,r=requireBuildFullPath(),a=requireParseHeaders(),o=requireIsURLSameOrigin(),l=requireCreateError();return xhr=function(h){return new Promise(function(d,f){var p=h.data,g=h.headers,b=h.responseType;n.isFormData(p)&&delete g["Content-Type"];var m=new XMLHttpRequest;if(h.auth){var v=h.auth.username||"",y=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";g.Authorization="Basic "+btoa(v+":"+y)}var S=r(h.baseURL,h.url);m.open(h.method.toUpperCase(),s(S,h.params,h.paramsSerializer),!0),m.timeout=h.timeout;function C(){if(m){var k="getAllResponseHeaders"in m?a(m.getAllResponseHeaders()):null,w=!b||b==="text"||b==="json"?m.responseText:m.response,E={data:w,status:m.status,statusText:m.statusText,headers:k,config:h,request:m};t(d,f,E),m=null}}if("onloadend"in m?m.onloadend=C:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(C)},m.onabort=function(){m&&(f(l("Request aborted",h,"ECONNABORTED",m)),m=null)},m.onerror=function(){f(l("Network Error",h,null,m)),m=null},m.ontimeout=function(){var w="timeout of "+h.timeout+"ms exceeded";h.timeoutErrorMessage&&(w=h.timeoutErrorMessage),f(l(w,h,h.transitional&&h.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},n.isStandardBrowserEnv()){var x=(h.withCredentials||o(S))&&h.xsrfCookieName?e.read(h.xsrfCookieName):void 0;x&&(g[h.xsrfHeaderName]=x)}"setRequestHeader"in m&&n.forEach(g,function(w,E){typeof p>"u"&&E.toLowerCase()==="content-type"?delete g[E]:m.setRequestHeader(E,w)}),n.isUndefined(h.withCredentials)||(m.withCredentials=!!h.withCredentials),b&&b!=="json"&&(m.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&m.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",h.onUploadProgress),h.cancelToken&&h.cancelToken.promise.then(function(w){m&&(m.abort(),f(w),m=null)}),p||(p=null),m.send(p)})},xhr}var utils$5=utils$9,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(n,t){!utils$5.isUndefined(n)&&utils$5.isUndefined(n["Content-Type"])&&(n["Content-Type"]=t)}function getDefaultAdapter(){var n;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(n=requireXhr()),n}function stringifySafely(n,t,e){if(utils$5.isString(n))try{return(t||JSON.parse)(n),utils$5.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(n)}var defaults$4={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function(t,e){return normalizeHeaderName(e,"Accept"),normalizeHeaderName(e,"Content-Type"),utils$5.isFormData(t)||utils$5.isArrayBuffer(t)||utils$5.isBuffer(t)||utils$5.isStream(t)||utils$5.isFile(t)||utils$5.isBlob(t)?t:utils$5.isArrayBufferView(t)?t.buffer:utils$5.isURLSearchParams(t)?(setContentTypeIfUnset(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):utils$5.isObject(t)||e&&e["Content-Type"]==="application/json"?(setContentTypeIfUnset(e,"application/json"),stringifySafely(t)):t}],transformResponse:[function(t){var e=this.transitional,s=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,a=!s&&this.responseType==="json";if(a||r&&utils$5.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?enhanceError(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};defaults$4.headers={common:{Accept:"application/json, text/plain, */*"}};utils$5.forEach(["delete","get","head"],function(t){defaults$4.headers[t]={}});utils$5.forEach(["post","put","patch"],function(t){defaults$4.headers[t]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$4,utils$4=utils$9,defaults$3=defaults_1,transformData$1=function(t,e,s){var r=this||defaults$3;return utils$4.forEach(s,function(o){t=o.call(r,t,e)}),t},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(t){return!!(t&&t.__CANCEL__)}),isCancel$1}var utils$3=utils$9,transformData=transformData$1,isCancel=requireIsCancel(),defaults$2=defaults_1;function throwIfCancellationRequested(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var dispatchRequest$1=function(t){throwIfCancellationRequested(t),t.headers=t.headers||{},t.data=transformData.call(t,t.data,t.headers,t.transformRequest),t.headers=utils$3.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(r){delete t.headers[r]});var e=t.adapter||defaults$2.adapter;return e(t).then(function(r){return throwIfCancellationRequested(t),r.data=transformData.call(t,r.data,r.headers,t.transformResponse),r},function(r){return isCancel(r)||(throwIfCancellationRequested(t),r&&r.response&&(r.response.data=transformData.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)})},utils$2=utils$9,mergeConfig$2=function(t,e){e=e||{};var s={},r=["url","method","data"],a=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function c(f,p){return utils$2.isPlainObject(f)&&utils$2.isPlainObject(p)?utils$2.merge(f,p):utils$2.isPlainObject(p)?utils$2.merge({},p):utils$2.isArray(p)?p.slice():p}function h(f){utils$2.isUndefined(e[f])?utils$2.isUndefined(t[f])||(s[f]=c(void 0,t[f])):s[f]=c(t[f],e[f])}utils$2.forEach(r,function(p){utils$2.isUndefined(e[p])||(s[p]=c(void 0,e[p]))}),utils$2.forEach(a,h),utils$2.forEach(o,function(p){utils$2.isUndefined(e[p])?utils$2.isUndefined(t[p])||(s[p]=c(void 0,t[p])):s[p]=c(void 0,e[p])}),utils$2.forEach(l,function(p){p in e?s[p]=c(t[p],e[p]):p in t&&(s[p]=c(void 0,t[p]))});var u=r.concat(a).concat(o).concat(l),d=Object.keys(t).concat(Object.keys(e)).filter(function(p){return u.indexOf(p)===-1});return utils$2.forEach(d,h),s};const name="axios",version$1="0.21.4",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://axios-http.com",devDependencies={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}],require$$0={name,version:version$1,description,main,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,browser,jsdelivr,unpkg,typings,dependencies,bundlesize};var pkg=require$$0,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(n,t){validators$1[n]=function(s){return typeof s===n||"a"+(t<1?"n ":" ")+n}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(n,t){for(var e=t?t.split("."):currentVerArr,s=n.split("."),r=0;r<3;r++){if(e[r]>s[r])return!0;if(e[r]<s[r])return!1}return!1}validators$1.transitional=function(t,e,s){var r=e&&isOlderVersion(e);function a(o,l){return"[Axios v"+pkg.version+"] Transitional option '"+o+"'"+l+(s?". "+s:"")}return function(o,l,c){if(t===!1)throw new Error(a(l," has been removed in "+e));return r&&!deprecatedWarnings[l]&&(deprecatedWarnings[l]=!0,console.warn(a(l," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,l,c):!0}};function assertOptions(n,t,e){if(typeof n!="object")throw new TypeError("options must be an object");for(var s=Object.keys(n),r=s.length;r-- >0;){var a=s[r],o=t[a];if(o){var l=n[a],c=l===void 0||o(l,a,n);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(e!==!0)throw Error("Unknown option "+a)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$1=utils$9,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(n){this.defaults=n,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=mergeConfig$1(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;e!==void 0&&validator.assertOptions(e,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var s=[],r=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(r=r&&f.synchronous,s.unshift(f.fulfilled,f.rejected))});var a=[];this.interceptors.response.forEach(function(f){a.push(f.fulfilled,f.rejected)});var o;if(!r){var l=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(a),o=Promise.resolve(t);l.length;)o=o.then(l.shift(),l.shift());return o}for(var c=t;s.length;){var h=s.shift(),u=s.shift();try{c=h(c)}catch(d){u(d);break}}try{o=dispatchRequest(c)}catch(d){return Promise.reject(d)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};Axios$1.prototype.getUri=function(t){return t=mergeConfig$1(this.defaults,t),buildURL(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(e,s){return this.request(mergeConfig$1(s||{},{method:t,url:e,data:(s||{}).data}))}});utils$1.forEach(["post","put","patch"],function(t){Axios$1.prototype[t]=function(e,s,r){return this.request(mergeConfig$1(r||{},{method:t,url:e,data:s}))}});var Axios_1=Axios$1,Cancel_1,hasRequiredCancel;function requireCancel(){if(hasRequiredCancel)return Cancel_1;hasRequiredCancel=1;function n(t){this.message=t}return n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,Cancel_1=n,Cancel_1}var CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var n=requireCancel();function t(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(o){s=o});var r=this;e(function(o){r.reason||(r.reason=new n(o),s(r.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var s,r=new t(function(o){s=o});return{token:r,cancel:s}},CancelToken_1=t,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(t){return function(s){return t.apply(null,s)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){return hasRequiredIsAxiosError||(hasRequiredIsAxiosError=1,isAxiosError=function(t){return typeof t=="object"&&t.isAxiosError===!0}),isAxiosError}var utils=utils$9,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$1=defaults_1;function createInstance(n){var t=new Axios(n),e=bind(Axios.prototype.request,t);return utils.extend(e,Axios.prototype,t),utils.extend(e,t),e}var axios$2=createInstance(defaults$1);axios$2.Axios=Axios;axios$2.create=function(t){return createInstance(mergeConfig(axios$2.defaults,t))};axios$2.Cancel=requireCancel();axios$2.CancelToken=requireCancelToken();axios$2.isCancel=requireIsCancel();axios$2.all=function(t){return Promise.all(t)};axios$2.spread=requireSpread();axios$2.isAxiosError=requireIsAxiosError();axios$3.exports=axios$2;axios$3.exports.default=axios$2;var axiosExports=axios$3.exports,axios=axiosExports;const axios$1=getDefaultExportFromCjs(axios),_sfc_main$f={props:{name:{},disabled:{default:!1},options:{default:[]},placeholder:{required:!1,default:()=>__("Choose...")},value:{},isReadOnly:{type:Boolean},resetOnChange:{default:!1}},data(){return{display:!0}},methods:{isOptionSelected(n){return this.placeholder===!1&&this.value===void 0?n.value==this.options[0].value:n.value==this.value},change(n){this.resetOnChange&&this.reset(),this.$emit("input",n.target.value)},reset(){this.display=!1,this.$nextTick(()=>this.display=!0)}}};var _sfc_render$f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-input-container"},[t.display?e("select",{staticClass:"select-input",attrs:{name:t.name,disabled:t.isReadOnly},domProps:{value:t.value},on:{change:t.change,focus:function(s){return t.$emit("focus")},blur:function(s){return t.$emit("blur")}}},[t.placeholder?e("option",{attrs:{value:"",disabled:""},domProps:{selected:t.value===null,textContent:t._s(t.__(t.placeholder))}}):t._e(),t._l(t.options,function(s){return e("option",{key:s.value,domProps:{value:s.value,selected:t.isOptionSelected(s),textContent:t._s(t.__(s.label))}})})],2):t._e(),e("div",{staticClass:"select-input-toggle"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[e("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])},_sfc_staticRenderFns$f=[],__component__$f=normalizeComponent(_sfc_main$f,_sfc_render$f,_sfc_staticRenderFns$f,!1,null,null,null,null);const SelectField=__component__$f.exports,_sfc_main$e={name:"product-variant-fieldtype",components:{SelectField},mixins:[Fieldtype],props:["meta"],inject:["storeName"],data(){return{initializing:!0,variant:this.value,productVariantsData:null}},computed:{product(){return Statamic.$store.state.publish[this.storeName].values.items[this.namePrefix.match(/\[(.*)\]/).pop()].product[0]},productVariantOptions(){return this.productVariantsData.variants.options.map(n=>({label:n.variant,value:n.key}))}},methods:{getProductVariants(){if(!this.product){this.initializing=!1;return}axios$1.post(this.meta.api,{product:this.product}).then(n=>{this.productVariantsData=n.data,this.initializing=!1}).catch(n=>{console.error("There was an error fetching variants for this product.")})}},mounted(){this.value==null&&(this.initializing=!1),this.variant&&!this.variant.product&&(this.variant.product=this.product),this.getProductVariants()},watch:{product(){this.variant={variant:null,product:this.product},this.productVariantsData=null,this.getProductVariants()}}};var _sfc_render$e=function(){var t=this,e=t._self._c;return e("div",[t.initializing?e("div",{staticClass:"flex flex-col items-center justify-center text-center p-1"},[e("loading-graphic")],1):e("div",[t.value==null?e("p",{staticClass:"text-sm p-1"},[t._v(" "+t._s(t.__("Product doesn't support variants."))+" ")]):t.productVariantsData==null?e("p",{staticClass:"text-sm p-1"},[t._v(" "+t._s(t.__("No product selected."))+" ")]):t.productVariantsData&&t.productVariantsData.purchasable_type==="variant"?e("select-field",{attrs:{options:t.productVariantOptions,disabled:t.readOnly},model:{value:t.variant.variant,callback:function(s){t.$set(t.variant,"variant",s)},expression:"variant.variant"}}):t.productVariantsData&&t.productVariantsData.purchasable_type==="product"?e("p",{staticClass:"text-sm p-1"},[t._v(" "+t._s(t.__("Product doesn't support variants."))+" ")]):t._e()],1)])},_sfc_staticRenderFns$e=[],__component__$e=normalizeComponent(_sfc_main$e,_sfc_render$e,_sfc_staticRenderFns$e,!1,null,null,null,null);const ProductVariantFieldtype=__component__$e.exports,_sfc_main$d={props:{field:{type:Object,required:!0},value:{required:!0},meta:{required:!0},index:{type:Number,required:!0},rowIndex:{type:Number,required:!0},gridName:{type:String,required:!0},showInner:{type:Boolean,required:!0},errors:{type:Array,required:!0},errorKey:{type:String,required:!0}},computed:{fieldtypeComponent(){return`${this.field.component||this.field.type}-fieldtype`},namePrefix(){return`${this.gridName}[${this.rowIndex}]`},hasError(){return this.errors.length>0}}};var _sfc_render$d=function(){var t=this,e=t._self._c;return e("td",{staticClass:"grid-cell",class:t.fieldtypeComponent},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showInner,expression:"showInner"}]},[e(t.fieldtypeComponent,{tag:"component",attrs:{config:t.field,value:t.value,meta:t.meta,handle:t.field.handle,"name-prefix":t.namePrefix,"error-key-prefix":t.errorKey,"read-only":!1},on:{input:function(s){return t.$emit("updated",s)},"meta-updated":function(s){return t.$emit("meta-updated",s)},focus:function(s){return t.$emit("focus")},blur:function(s){return t.$emit("blur")}}})],1),t.hasError?e("div",t._l(t.errors,function(s,r){return e("small",{key:r,staticClass:"help-block text-red mt-1 mb-0",domProps:{textContent:t._s(s)}})}),0):t._e()])},_sfc_staticRenderFns$d=[],__component__$d=normalizeComponent(_sfc_main$d,_sfc_render$d,_sfc_staticRenderFns$d,!1,null,null,null,null);const GridCell=__component__$d.exports,KEYS=["if","if_any","show_when","show_when_any","unless","unless_any","hide_when","hide_when_any"],OPERATORS=["equals","not","contains","contains_any","===","!==",">",">=","<","<=","custom"],ALIASES={is:"equals","==":"equals",isnt:"not","!=":"not",includes:"contains",includes_any:"contains_any"};var VERSION="1.13.6",root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,_isNaN=isNaN,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;function _$1(n){if(n instanceof _$1)return n;if(!(this instanceof _$1))return new _$1(n);this._wrapped=n}_$1.VERSION=VERSION;_$1.prototype.value=function(){return this._wrapped};_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value;_$1.prototype.toString=function(){return String(this._wrapped)};function identity(n){return n}function tagTester(n){var t="[object "+n+"]";return function(e){return toString.call(e)===t}}var isFunction$2=tagTester("Function"),nodelist=root.document&&root.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"&&(isFunction$2=function(n){return typeof n=="function"||!1});const isFunction$3=isFunction$2;function isObject$1(n){var t=typeof n;return t==="function"||t==="object"&&!!n}const isArray$1=nativeIsArray||tagTester("Array");function createAssigner(n,t){return function(e){var s=arguments.length;if(t&&(e=Object(e)),s<2||e==null)return e;for(var r=1;r<s;r++)for(var a=arguments[r],o=n(a),l=o.length,c=0;c<l;c++){var h=o[c];(!t||e[h]===void 0)&&(e[h]=a[h])}return e}}function has(n,t){return n!=null&&hasOwnProperty.call(n,t)}function emulatedSet(n){for(var t={},e=n.length,s=0;s<e;++s)t[n[s]]=!0;return{contains:function(r){return t[r]===!0},push:function(r){return t[r]=!0,n.push(r)}}}function collectNonEnumProps(n,t){t=emulatedSet(t);var e=nonEnumerableProps.length,s=n.constructor,r=isFunction$3(s)&&s.prototype||ObjProto,a="constructor";for(has(n,a)&&!t.contains(a)&&t.push(a);e--;)a=nonEnumerableProps[e],a in n&&n[a]!==r[a]&&!t.contains(a)&&t.push(a)}function keys(n){if(!isObject$1(n))return[];if(nativeKeys)return nativeKeys(n);var t=[];for(var e in n)has(n,e)&&t.push(e);return hasEnumBug&&collectNonEnumProps(n,t),t}const extendOwn=createAssigner(keys);function isMatch(n,t){var e=keys(t),s=e.length;if(n==null)return!s;for(var r=Object(n),a=0;a<s;a++){var o=e[a];if(t[o]!==r[o]||!(o in r))return!1}return!0}function matcher(n){return n=extendOwn({},n),function(t){return isMatch(t,n)}}function deepGet(n,t){for(var e=t.length,s=0;s<e;s++){if(n==null)return;n=n[t[s]]}return e?n:void 0}function toPath$1(n){return isArray$1(n)?n:[n]}_$1.toPath=toPath$1;function toPath(n){return _$1.toPath(n)}function property(n){return n=toPath(n),function(t){return deepGet(t,n)}}function optimizeCb(n,t,e){if(t===void 0)return n;switch(e??3){case 1:return function(s){return n.call(t,s)};case 3:return function(s,r,a){return n.call(t,s,r,a)};case 4:return function(s,r,a,o){return n.call(t,s,r,a,o)}}return function(){return n.apply(t,arguments)}}function baseIteratee(n,t,e){return n==null?identity:isFunction$3(n)?optimizeCb(n,t,e):isObject$1(n)&&!isArray$1(n)?matcher(n):property(n)}function iteratee(n,t){return baseIteratee(n,t,1/0)}_$1.iteratee=iteratee;function cb(n,t,e){return _$1.iteratee!==iteratee?_$1.iteratee(n,t):baseIteratee(n,t,e)}function createSizePropertyCheck(n){return function(t){var e=n(t);return typeof e=="number"&&e>=0&&e<=MAX_ARRAY_INDEX}}function shallowProperty(n){return function(t){return t==null?void 0:t[n]}}const getLength=shallowProperty("length"),isArrayLike=createSizePropertyCheck(getLength);function map$2(n,t,e){t=cb(t,e);for(var s=!isArrayLike(n)&&keys(n),r=(s||n).length,a=Array(r),o=0;o<r;o++){var l=s?s[o]:o;a[o]=t(n[l],l,n)}return a}function each$1(n,t,e){t=optimizeCb(t,e);var s,r;if(isArrayLike(n))for(s=0,r=n.length;s<r;s++)t(n[s],s,n);else{var a=keys(n);for(s=0,r=a.length;s<r;s++)t(n[a[s]],a[s],n)}return n}function filter(n,t,e){var s=[];return t=cb(t,e),each$1(n,function(r,a,o){t(r,a,o)&&s.push(r)}),s}function chain(n){var t=_$1(n);return t._chain=!0,t}function functions(n){var t=[];for(var e in n)isFunction$3(n[e])&&t.push(e);return t.sort()}function chainResult(n,t){return n._chain?_$1(t).chain():t}function mixin(n){return each$1(functions(n),function(t){var e=_$1[t]=n[t];_$1.prototype[t]=function(){var s=[this._wrapped];return push.apply(s,arguments),chainResult(this,e.apply(_$1,s))}}),_$1}mixin({chain,filter,each:each$1});class Converter{fromBlueprint(t,e=null){return map$2(t,(s,r)=>this.splitRhs(r,s,e))}toBlueprint(t){let e={};return each$1(t,s=>{e[s.field]=this.combineRhs(s)}),e}splitRhs(t,e,s=null){return{field:this.getScopedFieldHandle(t,s),operator:this.getOperatorFromRhs(e),value:this.getValueFromRhs(e)}}getScopedFieldHandle(t,e){return t.startsWith("root.")||!e?t:e+t}getOperatorFromRhs(t){let e="==";return chain(this.getOperatorsAndAliases()).filter(s=>new RegExp(`^${s} [^=]`).test(this.normalizeConditionString(t))).each(s=>e=s),this.normalizeOperator(e)}normalizeOperator(t){return ALIASES[t]?ALIASES[t]:t}getValueFromRhs(t){let e=this.normalizeConditionString(t);return chain(this.getOperatorsAndAliases()).filter(s=>new RegExp(`^${s} [^=]`).test(e)).each(s=>e=e.replace(new RegExp(`^${s}[ ]*`),"")),e}combineRhs(t){let e=t.operator?t.operator.trim():"",s=t.value.trim();return`${e} ${s}`.trim()}getOperatorsAndAliases(){return OPERATORS.concat(Object.keys(ALIASES))}normalizeConditionString(t){return t===null?"null":t===""?"empty":t.toString()}}const isString=tagTester("String");var isArguments=tagTester("Arguments");(function(){isArguments(arguments)||(isArguments=function(n){return has(n,"callee")})})();const isArguments$1=isArguments;function isEmpty(n){if(n==null)return!0;var t=getLength(n);return typeof t=="number"&&(isArray$1(n)||isString(n)||isArguments$1(n))?t===0:getLength(keys(n))===0}function values(n){for(var t=keys(n),e=t.length,s=Array(e),r=0;r<e;r++)s[r]=n[t[r]];return s}function sortedIndex(n,t,e,s){e=cb(e,s,1);for(var r=e(t),a=0,o=getLength(n);a<o;){var l=Math.floor((a+o)/2);e(n[l])<r?a=l+1:o=l}return a}function createPredicateIndexFinder(n){return function(t,e,s){e=cb(e,s);for(var r=getLength(t),a=n>0?0:r-1;a>=0&&a<r;a+=n)if(e(t[a],a,t))return a;return-1}}const findIndex=createPredicateIndexFinder(1),isNumber$1=tagTester("Number");function isNaN$1(n){return isNumber$1(n)&&_isNaN(n)}function createIndexFinder(n,t,e){return function(s,r,a){var o=0,l=getLength(s);if(typeof a=="number")n>0?o=a>=0?a:Math.max(a+l,o):l=a>=0?Math.min(a+1,l):a+l+1;else if(e&&a&&l)return a=e(s,r),s[a]===r?a:-1;if(r!==r)return a=t(slice.call(s,o,l),isNaN$1),a>=0?a+o:-1;for(a=n>0?o:l-1;a>=0&&a<l;a+=n)if(s[a]===r)return a;return-1}}const indexOf=createIndexFinder(1,findIndex,sortedIndex);function contains(n,t,e,s){return isArrayLike(n)||(n=values(n)),(typeof e!="number"||s)&&(e=0),indexOf(n,t,e)>=0}function intersection(n){for(var t=[],e=arguments.length,s=0,r=getLength(n);s<r;s++){var a=n[s];if(!contains(t,a)){var o;for(o=1;o<e&&contains(arguments[o],a);o++);o===e&&t.push(a)}}return t}function negate(n){return function(){return!n.apply(this,arguments)}}function reject(n,t,e){return filter(n,negate(cb(t)),e)}function initial(n,t,e){return slice.call(n,0,Math.max(0,n.length-(t==null||e?1:t)))}function first(n,t,e){return n==null||n.length<1?t==null||e?void 0:[]:t==null||e?n[0]:initial(n,n.length-t)}mixin({chain,map:map$2,each:each$1,filter,reject,first,isEmpty});const NUMBER_SPECIFIC_COMPARISONS=[">",">=","<","<="];class Validator{constructor(n,t,e,s){this.field=n,this.values=t,this.rootValues=e?e.state.publish[s].values:!1,this.store=e,this.storeName=s,this.passOnAny=!1,this.showOnPass=!0,this.converter=new Converter}passesConditions(n){let t=n||this.getConditions();if(t===void 0)return!0;if(this.isCustomConditionWithoutTarget(t))return this.passesCustomCondition(this.prepareCondition(t));let e=this.passOnAny?this.passesAnyConditions(t):this.passesAllConditions(t);return this.showOnPass?e:!e}getConditions(){let n=chain(KEYS).filter(e=>this.field[e]).first().value();if(!n)return;n.includes("any")&&(this.passOnAny=!0),(n.includes("unless")||n.includes("hide_when"))&&(this.showOnPass=!1);let t=this.field[n];return this.isCustomConditionWithoutTarget(t)?t:this.converter.fromBlueprint(t,this.field.prefix)}isCustomConditionWithoutTarget(n){return isString(n)}passesAllConditions(n){return chain(n).map(t=>this.prepareCondition(t)).reject(t=>this.passesCondition(t)).isEmpty().value()}passesAnyConditions(n){return!chain(n).map(t=>this.prepareCondition(t)).filter(t=>this.passesCondition(t)).isEmpty().value()}prepareCondition(n){if(isString(n)||n.operator==="custom")return this.prepareCustomCondition(n);let t=this.prepareOperator(n.operator),e=this.prepareLhs(n.field,t),s=this.prepareRhs(n.value,t);return{lhs:e,operator:t,rhs:s}}prepareOperator(n){switch(n){case null:case"":case"is":case"equals":return"==";case"isnt":case"not":case"¯\\_(ツ)_/¯":return"!=";case"includes":case"contains":return"includes";case"includes_any":case"contains_any":return"includes_any"}return n}prepareLhs(n,t){let e=this.getFieldValue(n);return NUMBER_SPECIFIC_COMPARISONS.includes(t)?Number(e):t==="includes"&&!isObject$1(e)?e?e.toString():"":(isString(e)&&isEmpty(e)&&(e=null),isString(e)?JSON.stringify(e.trim()):e)}prepareRhs(n,t){switch(n){case"null":return null;case"true":return!0;case"false":return!1}return NUMBER_SPECIFIC_COMPARISONS.includes(t)?Number(n):n==="empty"||t==="includes"||t==="includes_any"?n:isString(n)?JSON.stringify(n.trim()):n}prepareCustomCondition(n){let t=this.prepareFunctionName(n.value||n),e=this.prepareParams(n.value||n),s=n.field?this.getFieldValue(n.field):null,r=n.field;return{functionName:t,params:e,target:s,targetHandle:r}}prepareFunctionName(n){return n.replace(new RegExp("^custom "),"").split(":")[0]}prepareParams(n){let t=n.split(":")[1];return t?t.split(",").map(e=>e.trim()):[]}getFieldValue(n){return n.startsWith("root.")?data_get(this.rootValues,n.replace(new RegExp("^root."),"")):data_get(this.values,n)}passesCondition(condition){return condition.functionName?this.passesCustomCondition(condition):condition.operator==="includes"?this.passesIncludesCondition(condition):condition.operator==="includes_any"?this.passesIncludesAnyCondition(condition):(condition.rhs==="empty"&&(condition.lhs=isEmpty(condition.lhs),condition.rhs=!0),isObject$1(condition.lhs)?!1:eval(`${condition.lhs} ${condition.operator} ${condition.rhs}`))}passesIncludesCondition(n){return n.lhs.includes(n.rhs)}passesIncludesAnyCondition(n){let t=n.rhs.split(",").map(e=>e.trim());return Array.isArray(n.lhs)?intersection(n.lhs,t).length:new RegExp(t.join("|")).test(n.lhs)}passesCustomCondition(n){let t=data_get(this.store.state.statamic.conditions,n.functionName);if(typeof t!="function")return console.error(`Statamic field condition [${n.functionName}] was not properly defined.`),!1;let e=t({params:n.params,target:n.target,targetHandle:n.targetHandle,values:this.values,root:this.rootValues,store:this.store,storeName:this.storeName});return this.showOnPass?e:!e}passesNonRevealerConditions(n){let t=this.getConditions();if(this.isCustomConditionWithoutTarget(t))return this.passesConditions(t);let e=data_get(this.store.state.publish[this.storeName],"revealerFields",[]),s=chain(this.getConditions()).reject(r=>e.includes(this.relativeLhsToAbsoluteFieldPath(r.field,n))).value();return this.passesConditions(s)}relativeLhsToAbsoluteFieldPath(n,t){return t?n.startsWith("root.")?n.replace(/^root\./,""):t+"."+n:n}}const ValidatesFieldConditions={inject:{storeName:{default:"base"}},methods:{showField(n,t){let e=t||n.handle,s=t?t.replace(new RegExp("."+n.handle+"$"),""):"";if(n.visibility==="hidden"||this.shouldForceHiddenField(e))return this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:e,hidden:"force",omitValue:!1}),!1;let r=new Validator(n,this.values,this.$store,this.storeName),a=r.passesConditions();return n.always_save===!0?(this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:e,hidden:!a,omitValue:!1}),a):(this.$nextTick(()=>{this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:e,hidden:!a,omitValue:n.type==="revealer"||!r.passesNonRevealerConditions(s)})}),a)},shouldForceHiddenField(n){return data_get(this.$store.state.publish[this.storeName].hiddenFields[n],"hidden")==="force"}}},Row_vue_vue_type_style_index_0_scoped_7f26076b_lang="",_sfc_main$c={components:{GridCell},mixins:[ValidatesFieldConditions],props:{index:{type:Number,required:!0},fields:{type:Array,required:!0},values:{type:Object,required:!0},meta:{type:Object,required:!0},name:{type:String,required:!0},errorKeyPrefix:{type:String},canDelete:{type:Boolean,default:!0}},inject:["sortableItemClass","sortableHandleClass","storeName"],computed:{isExcessive(){return this.index>=10}},methods:{updated(n,t){this.values[n]=t,this.$emit("updated",n,this.values)},metaUpdated(n,t){let e=clone(this.meta);e[n]=t,this.$emit("meta-updated",e)},errorKey(n){return`${this.errorKeyPrefix}.${this.index}.${n}`},errors(n){const t=this.$store.state.publish[this.storeName];return t?t.errors[this.errorKey(n)]||[]:[]}}};var _sfc_render$c=function n(){var t=this,e=t._self._c;return e("tr",{class:[t.sortableItemClass,{"opacity-50":t.isExcessive}]},t._l(t.fields,function(s,r){return e("grid-cell",{key:s.handle,attrs:{"show-inner":t.showField(s),field:s,value:t.values[s.handle],meta:t.meta[s.handle],index:r,"row-index":t.index,"grid-name":t.name,errors:t.errors(s.handle),"error-key":t.errorKey(s.handle)},on:{updated:function(a){return t.updated(s.handle,a)},"meta-updated":function(a){return t.metaUpdated(s.handle,a)},focus:function(a){return t.$emit("focus")},blur:function(a){return t.$emit("blur")}}})}),1)},_sfc_staticRenderFns$c=[],__component__$c=normalizeComponent(_sfc_main$c,_sfc_render$c,_sfc_staticRenderFns$c,!1,null,"7f26076b",null,null);const GridRow=__component__$c.exports;class AbstractEvent{constructor(t){this._canceled=!1,this.data=t}get type(){return this.constructor.type}get cancelable(){return this.constructor.cancelable}cancel(){this._canceled=!0}canceled(){return this._canceled}clone(t){return new this.constructor({...this.data,...t})}}AbstractEvent.type="event";AbstractEvent.cancelable=!1;class AbstractPlugin{constructor(t){this.draggable=t}attach(){throw new Error("Not Implemented")}detach(){throw new Error("Not Implemented")}}const defaultDelay={mouse:0,drag:0,touch:100};class Sensor{constructor(t=[],e={}){this.containers=[...t],this.options={...e},this.dragging=!1,this.currentContainer=null,this.originalSource=null,this.startEvent=null,this.delay=calcDelay(e.delay)}attach(){return this}detach(){return this}addContainer(...t){this.containers=[...this.containers,...t]}removeContainer(...t){this.containers=this.containers.filter(e=>!t.includes(e))}trigger(t,e){const s=document.createEvent("Event");return s.detail=e,s.initEvent(e.type,!0,!0),t.dispatchEvent(s),this.lastEvent=e,e}}function calcDelay(n){const t={};if(n===void 0)return{...defaultDelay};if(typeof n=="number"){for(const e in defaultDelay)Object.prototype.hasOwnProperty.call(defaultDelay,e)&&(t[e]=n);return t}for(const e in defaultDelay)Object.prototype.hasOwnProperty.call(defaultDelay,e)&&(n[e]===void 0?t[e]=defaultDelay[e]:t[e]=n[e]);return t}function closest(n,t){if(n==null)return null;function e(r){return r==null||t==null?!1:isSelector(t)?Element.prototype.matches.call(r,t):isNodeList(t)?[...t].includes(r):isElement(t)?t===r:isFunction$1(t)?t(r):!1}let s=n;do{if(s=s.correspondingUseElement||s.correspondingElement||s,e(s))return s;s=(s==null?void 0:s.parentNode)||null}while(s!=null&&s!==document.body&&s!==document);return null}function isSelector(n){return typeof n=="string"}function isNodeList(n){return n instanceof NodeList||n instanceof Array}function isElement(n){return n instanceof Node}function isFunction$1(n){return typeof n=="function"}function distance(n,t,e,s){return Math.sqrt((e-n)**2+(s-t)**2)}class SensorEvent extends AbstractEvent{get originalEvent(){return this.data.originalEvent}get clientX(){return this.data.clientX}get clientY(){return this.data.clientY}get target(){return this.data.target}get container(){return this.data.container}get originalSource(){return this.data.originalSource}get pressure(){return this.data.pressure}}class DragStartSensorEvent extends SensorEvent{}DragStartSensorEvent.type="drag:start";class DragMoveSensorEvent extends SensorEvent{}DragMoveSensorEvent.type="drag:move";class DragStopSensorEvent extends SensorEvent{}DragStopSensorEvent.type="drag:stop";class DragPressureSensorEvent extends SensorEvent{}DragPressureSensorEvent.type="drag:pressure";const onContextMenuWhileDragging=Symbol("onContextMenuWhileDragging"),onMouseDown=Symbol("onMouseDown"),onMouseMove=Symbol("onMouseMove"),onMouseUp=Symbol("onMouseUp"),startDrag$1=Symbol("startDrag"),onDistanceChange$1=Symbol("onDistanceChange");class MouseSensor extends Sensor{constructor(t=[],e={}){super(t,e),this.mouseDownTimeout=null,this.pageX=null,this.pageY=null,this[onContextMenuWhileDragging]=this[onContextMenuWhileDragging].bind(this),this[onMouseDown]=this[onMouseDown].bind(this),this[onMouseMove]=this[onMouseMove].bind(this),this[onMouseUp]=this[onMouseUp].bind(this),this[startDrag$1]=this[startDrag$1].bind(this),this[onDistanceChange$1]=this[onDistanceChange$1].bind(this)}attach(){document.addEventListener("mousedown",this[onMouseDown],!0)}detach(){document.removeEventListener("mousedown",this[onMouseDown],!0)}[onMouseDown](t){if(t.button!==0||t.ctrlKey||t.metaKey)return;const e=closest(t.target,this.containers);if(!e||this.options.handle&&t.target&&!closest(t.target,this.options.handle))return;const s=closest(t.target,this.options.draggable);if(!s)return;const{delay:r}=this,{pageX:a,pageY:o}=t;Object.assign(this,{pageX:a,pageY:o}),this.onMouseDownAt=Date.now(),this.startEvent=t,this.currentContainer=e,this.originalSource=s,document.addEventListener("mouseup",this[onMouseUp]),document.addEventListener("dragstart",preventNativeDragStart),document.addEventListener("mousemove",this[onDistanceChange$1]),this.mouseDownTimeout=window.setTimeout(()=>{this[onDistanceChange$1]({pageX:this.pageX,pageY:this.pageY})},r.mouse)}[startDrag$1](){const t=this.startEvent,e=this.currentContainer,s=this.originalSource,r=new DragStartSensorEvent({clientX:t.clientX,clientY:t.clientY,target:t.target,container:e,originalSource:s,originalEvent:t});this.trigger(this.currentContainer,r),this.dragging=!r.canceled(),this.dragging&&(document.addEventListener("contextmenu",this[onContextMenuWhileDragging],!0),document.addEventListener("mousemove",this[onMouseMove]))}[onDistanceChange$1](t){const{pageX:e,pageY:s}=t,{distance:r}=this.options,{startEvent:a,delay:o}=this;if(Object.assign(this,{pageX:e,pageY:s}),!this.currentContainer)return;const l=Date.now()-this.onMouseDownAt,c=distance(a.pageX,a.pageY,e,s)||0;clearTimeout(this.mouseDownTimeout),l<o.mouse?document.removeEventListener("mousemove",this[onDistanceChange$1]):c>=r&&(document.removeEventListener("mousemove",this[onDistanceChange$1]),this[startDrag$1]())}[onMouseMove](t){if(!this.dragging)return;const e=document.elementFromPoint(t.clientX,t.clientY),s=new DragMoveSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,s)}[onMouseUp](t){if(clearTimeout(this.mouseDownTimeout),t.button!==0||(document.removeEventListener("mouseup",this[onMouseUp]),document.removeEventListener("dragstart",preventNativeDragStart),document.removeEventListener("mousemove",this[onDistanceChange$1]),!this.dragging))return;const e=document.elementFromPoint(t.clientX,t.clientY),s=new DragStopSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,s),document.removeEventListener("contextmenu",this[onContextMenuWhileDragging],!0),document.removeEventListener("mousemove",this[onMouseMove]),this.currentContainer=null,this.dragging=!1,this.startEvent=null}[onContextMenuWhileDragging](t){t.preventDefault()}}function preventNativeDragStart(n){n.preventDefault()}function touchCoords(n){const{touches:t,changedTouches:e}=n;return t&&t[0]||e&&e[0]}const onTouchStart=Symbol("onTouchStart"),onTouchEnd=Symbol("onTouchEnd"),onTouchMove=Symbol("onTouchMove"),startDrag=Symbol("startDrag"),onDistanceChange=Symbol("onDistanceChange");let preventScrolling=!1;window.addEventListener("touchmove",n=>{preventScrolling&&n.preventDefault()},{passive:!1});class TouchSensor extends Sensor{constructor(t=[],e={}){super(t,e),this.currentScrollableParent=null,this.tapTimeout=null,this.touchMoved=!1,this.pageX=null,this.pageY=null,this[onTouchStart]=this[onTouchStart].bind(this),this[onTouchEnd]=this[onTouchEnd].bind(this),this[onTouchMove]=this[onTouchMove].bind(this),this[startDrag]=this[startDrag].bind(this),this[onDistanceChange]=this[onDistanceChange].bind(this)}attach(){document.addEventListener("touchstart",this[onTouchStart])}detach(){document.removeEventListener("touchstart",this[onTouchStart])}[onTouchStart](t){const e=closest(t.target,this.containers);if(!e||this.options.handle&&t.target&&!closest(t.target,this.options.handle))return;const s=closest(t.target,this.options.draggable);if(!s)return;const{distance:r=0}=this.options,{delay:a}=this,{pageX:o,pageY:l}=touchCoords(t);Object.assign(this,{pageX:o,pageY:l}),this.onTouchStartAt=Date.now(),this.startEvent=t,this.currentContainer=e,this.originalSource=s,document.addEventListener("touchend",this[onTouchEnd]),document.addEventListener("touchcancel",this[onTouchEnd]),document.addEventListener("touchmove",this[onDistanceChange]),e.addEventListener("contextmenu",onContextMenu),r&&(preventScrolling=!0),this.tapTimeout=window.setTimeout(()=>{this[onDistanceChange]({touches:[{pageX:this.pageX,pageY:this.pageY}]})},a.touch)}[startDrag](){const t=this.startEvent,e=this.currentContainer,s=touchCoords(t),r=this.originalSource,a=new DragStartSensorEvent({clientX:s.pageX,clientY:s.pageY,target:t.target,container:e,originalSource:r,originalEvent:t});this.trigger(this.currentContainer,a),this.dragging=!a.canceled(),this.dragging&&document.addEventListener("touchmove",this[onTouchMove]),preventScrolling=this.dragging}[onDistanceChange](t){const{distance:e}=this.options,{startEvent:s,delay:r}=this,a=touchCoords(s),o=touchCoords(t),l=Date.now()-this.onTouchStartAt,c=distance(a.pageX,a.pageY,o.pageX,o.pageY);Object.assign(this,o),clearTimeout(this.tapTimeout),l<r.touch?document.removeEventListener("touchmove",this[onDistanceChange]):c>=e&&(document.removeEventListener("touchmove",this[onDistanceChange]),this[startDrag]())}[onTouchMove](t){if(!this.dragging)return;const{pageX:e,pageY:s}=touchCoords(t),r=document.elementFromPoint(e-window.scrollX,s-window.scrollY),a=new DragMoveSensorEvent({clientX:e,clientY:s,target:r,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,a)}[onTouchEnd](t){if(clearTimeout(this.tapTimeout),preventScrolling=!1,document.removeEventListener("touchend",this[onTouchEnd]),document.removeEventListener("touchcancel",this[onTouchEnd]),document.removeEventListener("touchmove",this[onDistanceChange]),this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",onContextMenu),!this.dragging)return;document.removeEventListener("touchmove",this[onTouchMove]);const{pageX:e,pageY:s}=touchCoords(t),r=document.elementFromPoint(e-window.scrollX,s-window.scrollY);t.preventDefault();const a=new DragStopSensorEvent({clientX:e,clientY:s,target:r,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,a),this.currentContainer=null,this.dragging=!1,this.startEvent=null}}function onContextMenu(n){n.preventDefault(),n.stopPropagation()}class CollidableEvent extends AbstractEvent{constructor(t){super(t),this.data=t}get dragEvent(){return this.data.dragEvent}}CollidableEvent.type="collidable";class CollidableInEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableInEvent.type="collidable:in";class CollidableOutEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableOutEvent.type="collidable:out";function createAddInitializerMethod(n,t){return function(e){assertNotFinished(t,"addInitializer"),assertCallable(e,"An initializer"),n.push(e)}}function assertInstanceIfPrivate(n,t){if(!n(t))throw new TypeError("Attempted to access private element on non-instance")}function memberDec(n,t,e,s,r,a,o,l,c,h,u){var d;switch(a){case 1:d="accessor";break;case 2:d="method";break;case 3:d="getter";break;case 4:d="setter";break;default:d="field"}var f,p,g={kind:d,name:l?"#"+e:e,static:o,private:l,metadata:u},b={v:!1};if(a!==0&&(g.addInitializer=createAddInitializerMethod(r,b)),l||a!==0&&a!==2)if(a===2)f=function(y){return assertInstanceIfPrivate(h,y),s.value};else{var m=a===0||a===1;(m||a===3)&&(f=l?function(y){return assertInstanceIfPrivate(h,y),s.get.call(y)}:function(y){return s.get.call(y)}),(m||a===4)&&(p=l?function(y,S){assertInstanceIfPrivate(h,y),s.set.call(y,S)}:function(y,S){s.set.call(y,S)})}else f=function(y){return y[e]},a===0&&(p=function(y,S){y[e]=S});var v=l?h.bind():function(y){return e in y};g.access=f&&p?{get:f,set:p,has:v}:f?{get:f,has:v}:{set:p,has:v};try{return n.call(t,c,g)}finally{b.v=!0}}function assertNotFinished(n,t){if(n.v)throw new Error("attempted to call "+t+" after decoration was finished")}function assertCallable(n,t){if(typeof n!="function")throw new TypeError(t+" must be a function")}function assertValidReturnValue(n,t){var e=typeof t;if(n===1){if(e!=="object"||t===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");t.get!==void 0&&assertCallable(t.get,"accessor.get"),t.set!==void 0&&assertCallable(t.set,"accessor.set"),t.init!==void 0&&assertCallable(t.init,"accessor.init")}else if(e!=="function"){var s;throw s=n===0?"field":n===5?"class":"method",new TypeError(s+" decorators must return a function or void 0")}}function curryThis1(n){return function(){return n(this)}}function curryThis2(n){return function(t){n(this,t)}}function applyMemberDec(n,t,e,s,r,a,o,l,c,h,u){var d,f,p,g,b,m,v=e[0];s||Array.isArray(v)||(v=[v]),l?d=a===0||a===1?{get:curryThis1(e[3]),set:curryThis2(e[4])}:a===3?{get:e[3]}:a===4?{set:e[3]}:{value:e[3]}:a!==0&&(d=Object.getOwnPropertyDescriptor(t,r)),a===1?p={get:d.get,set:d.set}:a===2?p=d.value:a===3?p=d.get:a===4&&(p=d.set);for(var y=s?2:1,S=v.length-1;S>=0;S-=y){var C;(g=memberDec(v[S],s?v[S-1]:void 0,r,d,c,a,o,l,p,h,u))!==void 0&&(assertValidReturnValue(a,g),a===0?C=g:a===1?(C=g.init,b=g.get||p.get,m=g.set||p.set,p={get:b,set:m}):p=g,C!==void 0&&(f===void 0?f=C:typeof f=="function"?f=[f,C]:f.push(C)))}if(a===0||a===1){if(f===void 0)f=function(w,E){return E};else if(typeof f!="function"){var x=f;f=function(w,E){for(var P=E,O=x.length-1;O>=0;O--)P=x[O].call(w,P);return P}}else{var k=f;f=function(w,E){return k.call(w,E)}}n.push(f)}a!==0&&(a===1?(d.get=p.get,d.set=p.set):a===2?d.value=p:a===3?d.get=p:a===4&&(d.set=p),l?a===1?(n.push(function(w,E){return p.get.call(w,E)}),n.push(function(w,E){return p.set.call(w,E)})):a===2?n.push(p):n.push(function(w,E){return p.call(w,E)}):Object.defineProperty(t,r,d))}function applyMemberDecs(n,t,e,s){for(var r,a,o,l=[],c=new Map,h=new Map,u=0;u<t.length;u++){var d=t[u];if(Array.isArray(d)){var f,p,g=d[1],b=d[2],m=d.length>3,v=16&g,y=!!(8&g),S=e;if(g&=7,y?(f=n,g!==0&&(p=a=a||[]),m&&!o&&(o=function(k){return _checkInRHS(k)===n}),S=o):(f=n.prototype,g!==0&&(p=r=r||[])),g!==0&&!m){var C=y?h:c,x=C.get(b)||0;if(x===!0||x===3&&g!==4||x===4&&g!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+b);C.set(b,!(!x&&g>2)||g)}applyMemberDec(l,f,d,v,b,g,y,m,p,S,s)}}return pushInitializers(l,r),pushInitializers(l,a),l}function pushInitializers(n,t){t&&n.push(function(e){for(var s=0;s<t.length;s++)t[s].call(e);return e})}function applyClassDecs(n,t,e,s){if(t.length){for(var r=[],a=n,o=n.name,l=e?2:1,c=t.length-1;c>=0;c-=l){var h={v:!1};try{var u=t[c].call(e?t[c-1]:void 0,a,{kind:"class",name:o,addInitializer:createAddInitializerMethod(r,h),metadata:s})}finally{h.v=!0}u!==void 0&&(assertValidReturnValue(5,u),a=u)}return[defineMetadata(a,s),function(){for(var d=0;d<r.length;d++)r[d].call(a)}]}}function defineMetadata(n,t){return Object.defineProperty(n,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:t})}function _applyDecs2305(n,t,e,s,r,a){if(arguments.length>=6)var o=a[Symbol.metadata||Symbol.for("Symbol.metadata")];var l=Object.create(o===void 0?null:o),c=applyMemberDecs(n,t,r,l);return e.length||defineMetadata(n,l),{e:c,get c(){return applyClassDecs(n,e,s,l)}}}function _checkInRHS(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}function AutoBind(n,{name:t,addInitializer:e}){e(function(){this[t]=n.bind(this)})}function requestNextAnimationFrame(n){return requestAnimationFrame(()=>{requestAnimationFrame(n)})}class DragEvent extends AbstractEvent{constructor(t){super(t),this.data=t}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get mirror(){return this.data.mirror}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}DragEvent.type="drag";class DragStartEvent extends DragEvent{}DragStartEvent.type="drag:start";DragStartEvent.cancelable=!0;class DragMoveEvent extends DragEvent{}DragMoveEvent.type="drag:move";class DragOverEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOverEvent.type="drag:over";DragOverEvent.cancelable=!0;function isDragOverEvent(n){return n.type===DragOverEvent.type}class DragOutEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOutEvent.type="drag:out";class DragOverContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOverContainerEvent.type="drag:over:container";class DragOutContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOutContainerEvent.type="drag:out:container";class DragPressureEvent extends DragEvent{get pressure(){return this.data.pressure}}DragPressureEvent.type="drag:pressure";class DragStopEvent extends DragEvent{}DragStopEvent.type="drag:stop";DragStopEvent.cancelable=!0;class DragStoppedEvent extends DragEvent{}DragStoppedEvent.type="drag:stopped";var _initProto$1,_class$1;class ResizeMirror extends AbstractPlugin{constructor(t){_initProto$1(super(t)),this.lastWidth=0,this.lastHeight=0,this.mirror=null}attach(){this.draggable.on("mirror:created",this.onMirrorCreated).on("drag:over",this.onDragOver).on("drag:over:container",this.onDragOver)}detach(){this.draggable.off("mirror:created",this.onMirrorCreated).off("mirror:destroy",this.onMirrorDestroy).off("drag:over",this.onDragOver).off("drag:over:container",this.onDragOver)}getOptions(){return this.draggable.options.resizeMirror||{}}onMirrorCreated({mirror:t}){this.mirror=t}onMirrorDestroy(){this.mirror=null}onDragOver(t){this.resize(t)}resize(t){requestAnimationFrame(()=>{let e=null;const{overContainer:s}=t;if(this.mirror==null||this.mirror.parentNode==null)return;this.mirror.parentNode!==s&&s.appendChild(this.mirror),isDragOverEvent(t)&&(e=t.over);const r=e||this.draggable.getDraggableElementsForContainer(s)[0];r&&requestNextAnimationFrame(()=>{const a=r.getBoundingClientRect();this.mirror==null||this.lastHeight===a.height&&this.lastWidth===a.width||(this.mirror.style.width=`${a.width}px`,this.mirror.style.height=`${a.height}px`,this.lastWidth=a.width,this.lastHeight=a.height)})})}}_class$1=ResizeMirror;[_initProto$1]=_applyDecs2305(_class$1,[[AutoBind,2,"onMirrorCreated"],[AutoBind,2,"onMirrorDestroy"],[AutoBind,2,"onDragOver"]],[],0,void 0,AbstractPlugin).e;class SnapEvent extends AbstractEvent{get dragEvent(){return this.data.dragEvent}get snappable(){return this.data.snappable}}SnapEvent.type="snap";class SnapInEvent extends SnapEvent{}SnapInEvent.type="snap:in";SnapInEvent.cancelable=!0;class SnapOutEvent extends SnapEvent{}SnapOutEvent.type="snap:out";SnapOutEvent.cancelable=!0;var _initProto,_class;const defaultOptions$5={duration:150,easingFunction:"ease-in-out",horizontal:!1};class SwapAnimation extends AbstractPlugin{constructor(t){_initProto(super(t)),this.options={...defaultOptions$5,...this.getOptions()},this.lastAnimationFrame=null}attach(){this.draggable.on("sortable:sorted",this.onSortableSorted)}detach(){this.draggable.off("sortable:sorted",this.onSortableSorted)}getOptions(){return this.draggable.options.swapAnimation||{}}onSortableSorted({oldIndex:t,newIndex:e,dragEvent:s}){const{source:r,over:a}=s;this.lastAnimationFrame&&cancelAnimationFrame(this.lastAnimationFrame),this.lastAnimationFrame=requestAnimationFrame(()=>{t>=e?animate(r,a,this.options):animate(a,r,this.options)})}}_class=SwapAnimation;[_initProto]=_applyDecs2305(_class,[[AutoBind,2,"onSortableSorted"]],[],0,void 0,AbstractPlugin).e;function animate(n,t,{duration:e,easingFunction:s,horizontal:r}){for(const a of[n,t])a.style.pointerEvents="none";if(r){const a=n.offsetWidth;n.style.transform=`translate3d(${a}px, 0, 0)`,t.style.transform=`translate3d(-${a}px, 0, 0)`}else{const a=n.offsetHeight;n.style.transform=`translate3d(0, ${a}px, 0)`,t.style.transform=`translate3d(0, -${a}px, 0)`}requestAnimationFrame(()=>{for(const a of[n,t])a.addEventListener("transitionend",resetElementOnTransitionEnd),a.style.transition=`transform ${e}ms ${s}`,a.style.transform=""})}function resetElementOnTransitionEnd(n){n.target==null||!isHTMLElement(n.target)||(n.target.style.transition="",n.target.style.pointerEvents="",n.target.removeEventListener("transitionend",resetElementOnTransitionEnd))}function isHTMLElement(n){return"style"in n}const onInitialize$1=Symbol("onInitialize"),onDestroy$1=Symbol("onDestroy"),announceEvent=Symbol("announceEvent"),announceMessage=Symbol("announceMessage"),ARIA_RELEVANT="aria-relevant",ARIA_ATOMIC="aria-atomic",ARIA_LIVE="aria-live",ROLE="role",defaultOptions$4={expire:7e3};class Announcement extends AbstractPlugin{constructor(t){super(t),this.options={...defaultOptions$4,...this.getOptions()},this.originalTriggerMethod=this.draggable.trigger,this[onInitialize$1]=this[onInitialize$1].bind(this),this[onDestroy$1]=this[onDestroy$1].bind(this)}attach(){this.draggable.on("draggable:initialize",this[onInitialize$1])}detach(){this.draggable.off("draggable:destroy",this[onDestroy$1])}getOptions(){return this.draggable.options.announcements||{}}[announceEvent](t){const e=this.options[t.type];e&&typeof e=="string"&&this[announceMessage](e),e&&typeof e=="function"&&this[announceMessage](e(t))}[announceMessage](t){announce(t,{expire:this.options.expire})}[onInitialize$1](){this.draggable.trigger=t=>{try{this[announceEvent](t)}finally{this.originalTriggerMethod.call(this.draggable,t)}}}[onDestroy$1](){this.draggable.trigger=this.originalTriggerMethod}}const liveRegion=createRegion();function announce(n,{expire:t}){const e=document.createElement("div");return e.textContent=n,liveRegion.appendChild(e),setTimeout(()=>{liveRegion.removeChild(e)},t)}function createRegion(){const n=document.createElement("div");return n.setAttribute("id","draggable-live-region"),n.setAttribute(ARIA_RELEVANT,"additions"),n.setAttribute(ARIA_ATOMIC,"true"),n.setAttribute(ARIA_LIVE,"assertive"),n.setAttribute(ROLE,"log"),n.style.position="fixed",n.style.width="1px",n.style.height="1px",n.style.top="-1px",n.style.overflow="hidden",n}document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(liveRegion)});const onInitialize=Symbol("onInitialize"),onDestroy=Symbol("onDestroy"),defaultOptions$3={};class Focusable extends AbstractPlugin{constructor(t){super(t),this.options={...defaultOptions$3,...this.getOptions()},this[onInitialize]=this[onInitialize].bind(this),this[onDestroy]=this[onDestroy].bind(this)}attach(){this.draggable.on("draggable:initialize",this[onInitialize]).on("draggable:destroy",this[onDestroy])}detach(){this.draggable.off("draggable:initialize",this[onInitialize]).off("draggable:destroy",this[onDestroy]),this[onDestroy]()}getOptions(){return this.draggable.options.focusable||{}}getElements(){return[...this.draggable.containers,...this.draggable.getDraggableElements()]}[onInitialize](){requestAnimationFrame(()=>{this.getElements().forEach(t=>decorateElement(t))})}[onDestroy](){requestAnimationFrame(()=>{this.getElements().forEach(t=>stripElement(t))})}}const elementsWithMissingTabIndex=[];function decorateElement(n){!n.getAttribute("tabindex")&&n.tabIndex===-1&&(elementsWithMissingTabIndex.push(n),n.tabIndex=0)}function stripElement(n){const t=elementsWithMissingTabIndex.indexOf(n);t!==-1&&(n.tabIndex=-1,elementsWithMissingTabIndex.splice(t,1))}class MirrorEvent extends AbstractEvent{constructor(t){super(t),this.data=t}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get dragEvent(){return this.data.dragEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}class MirrorCreateEvent extends MirrorEvent{}MirrorCreateEvent.type="mirror:create";class MirrorCreatedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorCreatedEvent.type="mirror:created";class MirrorAttachedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorAttachedEvent.type="mirror:attached";class MirrorMoveEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMoveEvent.type="mirror:move";MirrorMoveEvent.cancelable=!0;class MirrorMovedEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMovedEvent.type="mirror:moved";class MirrorDestroyEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorDestroyEvent.type="mirror:destroy";MirrorDestroyEvent.cancelable=!0;const onDragStart$3=Symbol("onDragStart"),onDragMove$2=Symbol("onDragMove"),onDragStop$3=Symbol("onDragStop"),onMirrorCreated=Symbol("onMirrorCreated"),onMirrorMove=Symbol("onMirrorMove"),onScroll=Symbol("onScroll"),getAppendableContainer=Symbol("getAppendableContainer"),defaultOptions$2={constrainDimensions:!1,xAxis:!0,yAxis:!0,cursorOffsetX:null,cursorOffsetY:null,thresholdX:null,thresholdY:null};class Mirror extends AbstractPlugin{constructor(t){super(t),this.options={...defaultOptions$2,...this.getOptions()},this.scrollOffset={x:0,y:0},this.initialScrollOffset={x:window.scrollX,y:window.scrollY},this[onDragStart$3]=this[onDragStart$3].bind(this),this[onDragMove$2]=this[onDragMove$2].bind(this),this[onDragStop$3]=this[onDragStop$3].bind(this),this[onMirrorCreated]=this[onMirrorCreated].bind(this),this[onMirrorMove]=this[onMirrorMove].bind(this),this[onScroll]=this[onScroll].bind(this)}attach(){this.draggable.on("drag:start",this[onDragStart$3]).on("drag:move",this[onDragMove$2]).on("drag:stop",this[onDragStop$3]).on("mirror:created",this[onMirrorCreated]).on("mirror:move",this[onMirrorMove])}detach(){this.draggable.off("drag:start",this[onDragStart$3]).off("drag:move",this[onDragMove$2]).off("drag:stop",this[onDragStop$3]).off("mirror:created",this[onMirrorCreated]).off("mirror:move",this[onMirrorMove])}getOptions(){return this.draggable.options.mirror||{}}[onDragStart$3](t){if(t.canceled())return;"ontouchstart"in window&&document.addEventListener("scroll",this[onScroll],!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:e,originalSource:s,sourceContainer:r,sensorEvent:a}=t;this.lastMirrorMovedClient={x:a.clientX,y:a.clientY};const o=new MirrorCreateEvent({source:e,originalSource:s,sourceContainer:r,sensorEvent:a,dragEvent:t});if(this.draggable.trigger(o),isNativeDragEvent(a)||o.canceled())return;const l=this[getAppendableContainer](e)||r;this.mirror=e.cloneNode(!0);const c=new MirrorCreatedEvent({source:e,originalSource:s,sourceContainer:r,sensorEvent:a,dragEvent:t,mirror:this.mirror}),h=new MirrorAttachedEvent({source:e,originalSource:s,sourceContainer:r,sensorEvent:a,dragEvent:t,mirror:this.mirror});this.draggable.trigger(c),l.appendChild(this.mirror),this.draggable.trigger(h)}[onDragMove$2](t){if(!this.mirror||t.canceled())return;const{source:e,originalSource:s,sourceContainer:r,sensorEvent:a}=t;let o=!0,l=!0;if(this.options.thresholdX||this.options.thresholdY){const{x:h,y:u}=this.lastMirrorMovedClient;if(Math.abs(h-a.clientX)<this.options.thresholdX?o=!1:this.lastMirrorMovedClient.x=a.clientX,Math.abs(u-a.clientY)<this.options.thresholdY?l=!1:this.lastMirrorMovedClient.y=a.clientY,!o&&!l)return}const c=new MirrorMoveEvent({source:e,originalSource:s,sourceContainer:r,sensorEvent:a,dragEvent:t,mirror:this.mirror,passedThreshX:o,passedThreshY:l});this.draggable.trigger(c)}[onDragStop$3](t){if("ontouchstart"in window&&document.removeEventListener("scroll",this[onScroll],!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:e,sourceContainer:s,sensorEvent:r}=t,a=new MirrorDestroyEvent({source:e,mirror:this.mirror,sourceContainer:s,sensorEvent:r,dragEvent:t});this.draggable.trigger(a),a.canceled()||this.mirror.remove()}[onScroll](){this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}}[onMirrorCreated]({mirror:t,source:e,sensorEvent:s}){const r=this.draggable.getClassNamesFor("mirror"),a=({mirrorOffset:l,initialX:c,initialY:h,...u})=>(this.mirrorOffset=l,this.initialX=c,this.initialY=h,this.lastMovedX=c,this.lastMovedY=h,{mirrorOffset:l,initialX:c,initialY:h,...u});t.style.display="none";const o={mirror:t,source:e,sensorEvent:s,mirrorClasses:r,scrollOffset:this.scrollOffset,options:this.options,passedThreshX:!0,passedThreshY:!0};return Promise.resolve(o).then(computeMirrorDimensions).then(calculateMirrorOffset).then(resetMirror).then(addMirrorClasses).then(positionMirror({initial:!0})).then(removeMirrorID).then(a)}[onMirrorMove](t){if(t.canceled())return null;const e=({lastMovedX:a,lastMovedY:o,...l})=>(this.lastMovedX=a,this.lastMovedY=o,{lastMovedX:a,lastMovedY:o,...l}),s=a=>{const o=new MirrorMovedEvent({source:t.source,originalSource:t.originalSource,sourceContainer:t.sourceContainer,sensorEvent:t.sensorEvent,dragEvent:t.dragEvent,mirror:this.mirror,passedThreshX:t.passedThreshX,passedThreshY:t.passedThreshY});return this.draggable.trigger(o),a},r={mirror:t.mirror,sensorEvent:t.sensorEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset,passedThreshX:t.passedThreshX,passedThreshY:t.passedThreshY,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(r).then(positionMirror({raf:!0})).then(e).then(s)}[getAppendableContainer](t){const e=this.options.appendTo;return typeof e=="string"?document.querySelector(e):e instanceof HTMLElement?e:typeof e=="function"?e(t):t.parentNode}}function computeMirrorDimensions({source:n,...t}){return withPromise(e=>{const s=n.getBoundingClientRect();e({source:n,sourceRect:s,...t})})}function calculateMirrorOffset({sensorEvent:n,sourceRect:t,options:e,...s}){return withPromise(r=>{const a=e.cursorOffsetY===null?n.clientY-t.top:e.cursorOffsetY,o=e.cursorOffsetX===null?n.clientX-t.left:e.cursorOffsetX;r({sensorEvent:n,sourceRect:t,mirrorOffset:{top:a,left:o},options:e,...s})})}function resetMirror({mirror:n,source:t,options:e,...s}){return withPromise(r=>{let a,o;if(e.constrainDimensions){const l=getComputedStyle(t);a=l.getPropertyValue("height"),o=l.getPropertyValue("width")}n.style.display=null,n.style.position="fixed",n.style.pointerEvents="none",n.style.top=0,n.style.left=0,n.style.margin=0,e.constrainDimensions&&(n.style.height=a,n.style.width=o),r({mirror:n,source:t,options:e,...s})})}function addMirrorClasses({mirror:n,mirrorClasses:t,...e}){return withPromise(s=>{n.classList.add(...t),s({mirror:n,mirrorClasses:t,...e})})}function removeMirrorID({mirror:n,...t}){return withPromise(e=>{n.removeAttribute("id"),delete n.id,e({mirror:n,...t})})}function positionMirror({withFrame:n=!1,initial:t=!1}={}){return({mirror:e,sensorEvent:s,mirrorOffset:r,initialY:a,initialX:o,scrollOffset:l,options:c,passedThreshX:h,passedThreshY:u,lastMovedX:d,lastMovedY:f,...p})=>withPromise(g=>{const b={mirror:e,sensorEvent:s,mirrorOffset:r,options:c,...p};if(r){const m=h?Math.round((s.clientX-r.left-l.x)/(c.thresholdX||1))*(c.thresholdX||1):Math.round(d),v=u?Math.round((s.clientY-r.top-l.y)/(c.thresholdY||1))*(c.thresholdY||1):Math.round(f);c.xAxis&&c.yAxis||t?e.style.transform=`translate3d(${m}px, ${v}px, 0)`:c.xAxis&&!c.yAxis?e.style.transform=`translate3d(${m}px, ${a}px, 0)`:c.yAxis&&!c.xAxis&&(e.style.transform=`translate3d(${o}px, ${v}px, 0)`),t&&(b.initialX=m,b.initialY=v),b.lastMovedX=m,b.lastMovedY=v}g(b)},{frame:n})}function withPromise(n,{raf:t=!1}={}){return new Promise((e,s)=>{t?requestAnimationFrame(()=>{n(e,s)}):n(e,s)})}function isNativeDragEvent(n){return/^drag/.test(n.originalEvent.type)}const onDragStart$2=Symbol("onDragStart"),onDragMove$1=Symbol("onDragMove"),onDragStop$2=Symbol("onDragStop"),scroll=Symbol("scroll"),defaultOptions$1={speed:6,sensitivity:50,scrollableElements:[]};class Scrollable extends AbstractPlugin{constructor(t){super(t),this.options={...defaultOptions$1,...this.getOptions()},this.currentMousePosition=null,this.scrollAnimationFrame=null,this.scrollableElement=null,this.findScrollableElementFrame=null,this[onDragStart$2]=this[onDragStart$2].bind(this),this[onDragMove$1]=this[onDragMove$1].bind(this),this[onDragStop$2]=this[onDragStop$2].bind(this),this[scroll]=this[scroll].bind(this)}attach(){this.draggable.on("drag:start",this[onDragStart$2]).on("drag:move",this[onDragMove$1]).on("drag:stop",this[onDragStop$2])}detach(){this.draggable.off("drag:start",this[onDragStart$2]).off("drag:move",this[onDragMove$1]).off("drag:stop",this[onDragStop$2])}getOptions(){return this.draggable.options.scrollable||{}}getScrollableElement(t){return this.hasDefinedScrollableElements()?closest(t,this.options.scrollableElements)||document.documentElement:closestScrollableElement(t)}hasDefinedScrollableElements(){return this.options.scrollableElements.length!==0}[onDragStart$2](t){this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(t.source)})}[onDragMove$1](t){if(this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(t.sensorEvent.target)}),!this.scrollableElement)return;const e=t.sensorEvent,s={x:0,y:0};"ontouchstart"in window&&(s.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),this.currentMousePosition={clientX:e.clientX-s.x,clientY:e.clientY-s.y},this.scrollAnimationFrame=requestAnimationFrame(this[scroll])}[onDragStop$2](){cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.findScrollableElementFrame),this.scrollableElement=null,this.scrollAnimationFrame=null,this.findScrollableElementFrame=null,this.currentMousePosition=null}[scroll](){if(!this.scrollableElement||!this.currentMousePosition)return;cancelAnimationFrame(this.scrollAnimationFrame);const{speed:t,sensitivity:e}=this.options,s=this.scrollableElement.getBoundingClientRect(),r=s.bottom>window.innerHeight,o=s.top<0||r,l=getDocumentScrollingElement(),c=this.scrollableElement,h=this.currentMousePosition.clientX,u=this.currentMousePosition.clientY;if(c!==document.body&&c!==document.documentElement&&!o){const{offsetHeight:d,offsetWidth:f}=c;s.top+d-u<e?c.scrollTop+=t:u-s.top<e&&(c.scrollTop-=t),s.left+f-h<e?c.scrollLeft+=t:h-s.left<e&&(c.scrollLeft-=t)}else{const{innerHeight:d,innerWidth:f}=window;u<e?l.scrollTop-=t:d-u<e&&(l.scrollTop+=t),h<e?l.scrollLeft-=t:f-h<e&&(l.scrollLeft+=t)}this.scrollAnimationFrame=requestAnimationFrame(this[scroll])}}function hasOverflow(n){const t=/(auto|scroll)/,e=getComputedStyle(n,null),s=e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x");return t.test(s)}function isStaticallyPositioned(n){return getComputedStyle(n).getPropertyValue("position")==="static"}function closestScrollableElement(n){if(!n)return getDocumentScrollingElement();const t=getComputedStyle(n).getPropertyValue("position"),e=t==="absolute",s=closest(n,r=>e&&isStaticallyPositioned(r)?!1:hasOverflow(r));return t==="fixed"||!s?getDocumentScrollingElement():s}function getDocumentScrollingElement(){return document.scrollingElement||document.documentElement}class Emitter{constructor(){this.callbacks={}}on(t,...e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(...e),this}off(t,e){if(!this.callbacks[t])return null;const s=this.callbacks[t].slice(0);for(let r=0;r<s.length;r++)e===s[r]&&this.callbacks[t].splice(r,1);return this}trigger(t){if(!this.callbacks[t.type])return null;const e=[...this.callbacks[t.type]],s=[];for(let r=e.length-1;r>=0;r--){const a=e[r];try{a(t)}catch(o){s.push(o)}}return s.length&&console.error(`Draggable caught errors while triggering '${t.type}'`,s),this}}class DraggableEvent extends AbstractEvent{get draggable(){return this.data.draggable}}DraggableEvent.type="draggable";class DraggableInitializedEvent extends DraggableEvent{}DraggableInitializedEvent.type="draggable:initialize";class DraggableDestroyEvent extends DraggableEvent{}DraggableDestroyEvent.type="draggable:destroy";const onDragStart$1=Symbol("onDragStart"),onDragMove=Symbol("onDragMove"),onDragStop$1=Symbol("onDragStop"),onDragPressure=Symbol("onDragPressure"),dragStop=Symbol("dragStop"),defaultAnnouncements$1={"drag:start":n=>`Picked up ${n.source.textContent.trim()||n.source.id||"draggable element"}`,"drag:stop":n=>`Released ${n.source.textContent.trim()||n.source.id||"draggable element"}`},defaultClasses={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"},defaultOptions={draggable:".draggable-source",handle:null,delay:{},distance:0,placedTimeout:800,plugins:[],sensors:[],exclude:{plugins:[],sensors:[]}};class Draggable{constructor(t=[document.body],e={}){if(t instanceof NodeList||t instanceof Array)this.containers=[...t];else if(t instanceof HTMLElement)this.containers=[t];else throw new Error("Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`");this.options={...defaultOptions,...e,classes:{...defaultClasses,...e.classes||{}},announcements:{...defaultAnnouncements$1,...e.announcements||{}},exclude:{plugins:e.exclude&&e.exclude.plugins||[],sensors:e.exclude&&e.exclude.sensors||[]}},this.emitter=new Emitter,this.dragging=!1,this.plugins=[],this.sensors=[],this[onDragStart$1]=this[onDragStart$1].bind(this),this[onDragMove]=this[onDragMove].bind(this),this[onDragStop$1]=this[onDragStop$1].bind(this),this[onDragPressure]=this[onDragPressure].bind(this),this[dragStop]=this[dragStop].bind(this),document.addEventListener("drag:start",this[onDragStart$1],!0),document.addEventListener("drag:move",this[onDragMove],!0),document.addEventListener("drag:stop",this[onDragStop$1],!0),document.addEventListener("drag:pressure",this[onDragPressure],!0);const s=Object.values(Draggable.Plugins).filter(o=>!this.options.exclude.plugins.includes(o)),r=Object.values(Draggable.Sensors).filter(o=>!this.options.exclude.sensors.includes(o));this.addPlugin(...s,...this.options.plugins),this.addSensor(...r,...this.options.sensors);const a=new DraggableInitializedEvent({draggable:this});this.on("mirror:created",({mirror:o})=>this.mirror=o),this.on("mirror:destroy",()=>this.mirror=null),this.trigger(a)}destroy(){document.removeEventListener("drag:start",this[onDragStart$1],!0),document.removeEventListener("drag:move",this[onDragMove],!0),document.removeEventListener("drag:stop",this[onDragStop$1],!0),document.removeEventListener("drag:pressure",this[onDragPressure],!0);const t=new DraggableDestroyEvent({draggable:this});this.trigger(t),this.removePlugin(...this.plugins.map(e=>e.constructor)),this.removeSensor(...this.sensors.map(e=>e.constructor))}addPlugin(...t){const e=t.map(s=>new s(this));return e.forEach(s=>s.attach()),this.plugins=[...this.plugins,...e],this}removePlugin(...t){return this.plugins.filter(s=>t.includes(s.constructor)).forEach(s=>s.detach()),this.plugins=this.plugins.filter(s=>!t.includes(s.constructor)),this}addSensor(...t){const e=t.map(s=>new s(this.containers,this.options));return e.forEach(s=>s.attach()),this.sensors=[...this.sensors,...e],this}removeSensor(...t){return this.sensors.filter(s=>t.includes(s.constructor)).forEach(s=>s.detach()),this.sensors=this.sensors.filter(s=>!t.includes(s.constructor)),this}addContainer(...t){return this.containers=[...this.containers,...t],this.sensors.forEach(e=>e.addContainer(...t)),this}removeContainer(...t){return this.containers=this.containers.filter(e=>!t.includes(e)),this.sensors.forEach(e=>e.removeContainer(...t)),this}on(t,...e){return this.emitter.on(t,...e),this}off(t,e){return this.emitter.off(t,e),this}trigger(t){return this.emitter.trigger(t),this}getClassNameFor(t){return this.getClassNamesFor(t)[0]}getClassNamesFor(t){const e=this.options.classes[t];return e instanceof Array?e:typeof e=="string"||e instanceof String?[e]:[]}isDragging(){return!!this.dragging}getDraggableElements(){return this.containers.reduce((t,e)=>[...t,...this.getDraggableElementsForContainer(e)],[])}getDraggableElementsForContainer(t){return[...t.querySelectorAll(this.options.draggable)].filter(s=>s!==this.originalSource&&s!==this.mirror)}cancel(){this[dragStop]()}[onDragStart$1](t){const e=getSensorEvent(t),{target:s,container:r,originalSource:a}=e;if(!this.containers.includes(r))return;if(this.options.handle&&s&&!closest(s,this.options.handle)){e.cancel();return}this.originalSource=a,this.sourceContainer=r,this.lastPlacedSource&&this.lastPlacedContainer&&(clearTimeout(this.placedTimeoutID),this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed"))),this.source=this.originalSource.cloneNode(!0),this.originalSource.parentNode.insertBefore(this.source,this.originalSource),this.originalSource.style.display="none";const o=new DragStartEvent({source:this.source,originalSource:this.originalSource,sourceContainer:r,sensorEvent:e});if(this.trigger(o),this.dragging=!o.canceled(),o.canceled()){this.source.remove(),this.originalSource.style.display=null;return}this.originalSource.classList.add(...this.getClassNamesFor("source:original")),this.source.classList.add(...this.getClassNamesFor("source:dragging")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:dragging")),document.body.classList.add(...this.getClassNamesFor("body:dragging")),applyUserSelect(document.body,"none"),requestAnimationFrame(()=>{const c=getSensorEvent(t).clone({target:this.source});this[onDragMove]({...t,detail:c})})}[onDragMove](t){if(!this.dragging)return;const e=getSensorEvent(t),{container:s}=e;let r=e.target;const a=new DragMoveEvent({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:e});this.trigger(a),a.canceled()&&e.cancel(),r=closest(r,this.options.draggable);const o=closest(e.target,this.containers),l=e.overContainer||o,c=this.currentOverContainer&&l!==this.currentOverContainer,h=this.currentOver&&r!==this.currentOver,u=l&&this.currentOverContainer!==l,d=o&&r&&this.currentOver!==r;if(h){const f=new DragOutEvent({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:e,over:this.currentOver,overContainer:this.currentOverContainer});this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOver=null,this.trigger(f)}if(c){const f=new DragOutContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:e,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.currentOverContainer=null,this.trigger(f)}if(u){l.classList.add(...this.getClassNamesFor("container:over"));const f=new DragOverContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:e,overContainer:l});this.currentOverContainer=l,this.trigger(f)}if(d){r.classList.add(...this.getClassNamesFor("draggable:over"));const f=new DragOverEvent({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:e,overContainer:l,over:r});this.currentOver=r,this.trigger(f)}}[dragStop](t){if(!this.dragging)return;this.dragging=!1;const e=new DragStopEvent({source:this.source,originalSource:this.originalSource,sensorEvent:t?t.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(e),e.canceled()||this.source.parentNode.insertBefore(this.originalSource,this.source),this.source.remove(),this.originalSource.style.display="",this.source.classList.remove(...this.getClassNamesFor("source:dragging")),this.originalSource.classList.remove(...this.getClassNamesFor("source:original")),this.originalSource.classList.add(...this.getClassNamesFor("source:placed")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:placed")),this.sourceContainer.classList.remove(...this.getClassNamesFor("container:dragging")),document.body.classList.remove(...this.getClassNamesFor("body:dragging")),applyUserSelect(document.body,""),this.currentOver&&this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOverContainer&&this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.lastPlacedSource=this.originalSource,this.lastPlacedContainer=this.sourceContainer,this.placedTimeoutID=setTimeout(()=>{this.lastPlacedSource&&this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer&&this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed")),this.lastPlacedSource=null,this.lastPlacedContainer=null},this.options.placedTimeout);const s=new DragStoppedEvent({source:this.source,originalSource:this.originalSource,sensorEvent:t?t.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(s),this.source=null,this.originalSource=null,this.currentOverContainer=null,this.currentOver=null,this.sourceContainer=null}[onDragStop$1](t){this[dragStop](t)}[onDragPressure](t){if(!this.dragging)return;const e=getSensorEvent(t),s=this.source||closest(e.originalEvent.target,this.options.draggable),r=new DragPressureEvent({sensorEvent:e,source:s,pressure:e.pressure});this.trigger(r)}}Draggable.Plugins={Announcement,Focusable,Mirror,Scrollable};Draggable.Sensors={MouseSensor,TouchSensor};function getSensorEvent(n){return n.detail}function applyUserSelect(n,t){n.style.webkitUserSelect=t,n.style.mozUserSelect=t,n.style.msUserSelect=t,n.style.oUserSelect=t,n.style.userSelect=t}class DroppableEvent extends AbstractEvent{constructor(t){super(t),this.data=t}get dragEvent(){return this.data.dragEvent}}DroppableEvent.type="droppable";class DroppableStartEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStartEvent.type="droppable:start";DroppableStartEvent.cancelable=!0;class DroppableDroppedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableDroppedEvent.type="droppable:dropped";DroppableDroppedEvent.cancelable=!0;class DroppableReturnedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableReturnedEvent.type="droppable:returned";DroppableReturnedEvent.cancelable=!0;class DroppableStopEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStopEvent.type="droppable:stop";DroppableStopEvent.cancelable=!0;class SwappableEvent extends AbstractEvent{constructor(t){super(t),this.data=t}get dragEvent(){return this.data.dragEvent}}SwappableEvent.type="swappable";class SwappableStartEvent extends SwappableEvent{}SwappableStartEvent.type="swappable:start";SwappableStartEvent.cancelable=!0;class SwappableSwapEvent extends SwappableEvent{get over(){return this.data.over}get overContainer(){return this.data.overContainer}}SwappableSwapEvent.type="swappable:swap";SwappableSwapEvent.cancelable=!0;class SwappableSwappedEvent extends SwappableEvent{get swappedElement(){return this.data.swappedElement}}SwappableSwappedEvent.type="swappable:swapped";class SwappableStopEvent extends SwappableEvent{}SwappableStopEvent.type="swappable:stop";class SortableEvent extends AbstractEvent{constructor(t){super(t),this.data=t}get dragEvent(){return this.data.dragEvent}}SortableEvent.type="sortable";class SortableStartEvent extends SortableEvent{get startIndex(){return this.data.startIndex}get startContainer(){return this.data.startContainer}}SortableStartEvent.type="sortable:start";SortableStartEvent.cancelable=!0;class SortableSortEvent extends SortableEvent{get currentIndex(){return this.data.currentIndex}get over(){return this.data.over}get overContainer(){return this.data.dragEvent.overContainer}}SortableSortEvent.type="sortable:sort";SortableSortEvent.cancelable=!0;class SortableSortedEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableSortedEvent.type="sortable:sorted";class SortableStopEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableStopEvent.type="sortable:stop";const onDragStart=Symbol("onDragStart"),onDragOverContainer=Symbol("onDragOverContainer"),onDragOver=Symbol("onDragOver"),onDragStop=Symbol("onDragStop");function onSortableSortedDefaultAnnouncement({dragEvent:n}){const t=n.source.textContent.trim()||n.source.id||"sortable element";if(n.over){const e=n.over.textContent.trim()||n.over.id||"sortable element";return n.source.compareDocumentPosition(n.over)&Node.DOCUMENT_POSITION_FOLLOWING?`Placed ${t} after ${e}`:`Placed ${t} before ${e}`}else return`Placed ${t} into a different container`}const defaultAnnouncements={"sortable:sorted":onSortableSortedDefaultAnnouncement};class Sortable extends Draggable{constructor(t=[],e={}){super(t,{...e,announcements:{...defaultAnnouncements,...e.announcements||{}}}),this.startIndex=null,this.startContainer=null,this[onDragStart]=this[onDragStart].bind(this),this[onDragOverContainer]=this[onDragOverContainer].bind(this),this[onDragOver]=this[onDragOver].bind(this),this[onDragStop]=this[onDragStop].bind(this),this.on("drag:start",this[onDragStart]).on("drag:over:container",this[onDragOverContainer]).on("drag:over",this[onDragOver]).on("drag:stop",this[onDragStop])}destroy(){super.destroy(),this.off("drag:start",this[onDragStart]).off("drag:over:container",this[onDragOverContainer]).off("drag:over",this[onDragOver]).off("drag:stop",this[onDragStop])}index(t){return this.getSortableElementsForContainer(t.parentNode).indexOf(t)}getSortableElementsForContainer(t){return[...t.querySelectorAll(this.options.draggable)].filter(s=>s!==this.originalSource&&s!==this.mirror&&s.parentNode===t)}[onDragStart](t){this.startContainer=t.source.parentNode,this.startIndex=this.index(t.source);const e=new SortableStartEvent({dragEvent:t,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(e),e.canceled()&&t.cancel()}[onDragOverContainer](t){if(t.canceled())return;const{source:e,over:s,overContainer:r}=t,a=this.index(e),o=new SortableSortEvent({dragEvent:t,currentIndex:a,source:e,over:s});if(this.trigger(o),o.canceled())return;const l=this.getSortableElementsForContainer(r),c=move$1({source:e,over:s,overContainer:r,children:l});if(!c)return;const{oldContainer:h,newContainer:u}=c,d=this.index(t.source),f=new SortableSortedEvent({dragEvent:t,oldIndex:a,newIndex:d,oldContainer:h,newContainer:u});this.trigger(f)}[onDragOver](t){if(t.over===t.originalSource||t.over===t.source)return;const{source:e,over:s,overContainer:r}=t,a=this.index(e),o=new SortableSortEvent({dragEvent:t,currentIndex:a,source:e,over:s});if(this.trigger(o),o.canceled())return;const l=this.getDraggableElementsForContainer(r),c=move$1({source:e,over:s,overContainer:r,children:l});if(!c)return;const{oldContainer:h,newContainer:u}=c,d=this.index(e),f=new SortableSortedEvent({dragEvent:t,oldIndex:a,newIndex:d,oldContainer:h,newContainer:u});this.trigger(f)}[onDragStop](t){const e=new SortableStopEvent({dragEvent:t,oldIndex:this.startIndex,newIndex:this.index(t.source),oldContainer:this.startContainer,newContainer:t.source.parentNode});this.trigger(e),this.startIndex=null,this.startContainer=null}}function index(n){return Array.prototype.indexOf.call(n.parentNode.children,n)}function move$1({source:n,over:t,overContainer:e,children:s}){const r=!s.length,a=n.parentNode!==e,o=t&&n.parentNode===t.parentNode;return r?moveInsideEmptyContainer(n,e):o?moveWithinContainer(n,t):a?moveOutsideContainer(n,t,e):null}function moveInsideEmptyContainer(n,t){const e=n.parentNode;return t.appendChild(n),{oldContainer:e,newContainer:t}}function moveWithinContainer(n,t){const e=index(n),s=index(t);return e<s?n.parentNode.insertBefore(n,t.nextElementSibling):n.parentNode.insertBefore(n,t),{oldContainer:n.parentNode,newContainer:n.parentNode}}function moveOutsideContainer(n,t,e){const s=n.parentNode;return t?t.parentNode.insertBefore(n,t):e.appendChild(n),{oldContainer:s,newContainer:n.parentNode}}function move(n,t,e){const s=[...n.slice(0,t),...n.slice(t+1,n.length)];return[...s.slice(0,e),n[t],...s.slice(e,s.length)]}const _sfc_main$b={props:{value:{required:!0},itemClass:{default:"sortable-item"},handleClass:{default:"sortable-handle"},mirror:{type:Boolean,default:!0},appendTo:{default:null},options:{default:()=>{}},vertical:{type:Boolean},constrainDimensions:{type:Boolean},delay:{type:Number,default:0},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},animate:{type:Boolean,default:!0}},data(){return{sortable:null}},computed:{computedOptions(){let n=[];this.animate&&n.push(SwapAnimation);let t=Object.assign({},{draggable:`.${CSS.escape(this.itemClass)}`,handle:`.${CSS.escape(this.handleClass)}`,delay:this.delay,distance:this.distance,swapAnimation:{vertical:this.vertical,horizontal:!this.vertical},plugins:n,mirror:{constrainDimensions:this.constrainDimensions}},this.options);return this.vertical&&(t.mirror.xAxis=!1),this.appendTo&&(t.mirror.appendTo=this.appendTo),t}},provide(){return{itemClass:this.itemClass,handleClass:this.handleClass}},render(){return this.$scopedSlots.default({items:this.value})},mounted(){this.disabled||this.setupSortableList()},methods:{setupSortableList(){this.sortable=new Sortable(this.$el,this.computedOptions),this.sortable.on("drag:start",()=>this.$emit("dragstart")),this.sortable.on("drag:stop",()=>this.$emit("dragend")),this.sortable.on("sortable:stop",({oldIndex:n,newIndex:t})=>{this.$emit("input",move(this.value,n,t))}),this.$on("hook:destroyed",()=>{this.sortable.destroy()}),this.mirror===!1&&this.sortable.on("mirror:create",n=>n.cancel())},destroySortableList(){this.sortable.destroy()}},watch:{disabled(n){n?this.destroySortableList():this.setupSortableList()}}},_sfc_render$b=null,_sfc_staticRenderFns$b=null;var __component__$b=normalizeComponent(_sfc_main$b,_sfc_render$b,_sfc_staticRenderFns$b,!1,null,null,null,null);const SortableList=__component__$b.exports,_sfc_main$a={props:{field:{type:Object,required:!0}}};var _sfc_render$a=function n(){var t=this,e=t._self._c;return e("th",{directives:[{name:"show",rawName:"v-show",value:t.field.type!=="hidden",expression:"field.type !== 'hidden'"}]},[e("div",{staticClass:"flex items-center justify-between"},[e("div",[t.field.hide_display?t._e():[t._v(t._s(t.__(t.field.display||t.field.handle)))]],2),t.field.instructions?e("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.$options.filters.markdown(t.__(t.field.instructions)),html:!0},expression:"{ content: $options.filters.markdown(__(field.instructions)), html:true }"}],staticClass:"text-gray-600 hover:text-gray-700 h-3 w-3 text-xs",attrs:{name:"micro/circle-help"}}):t._e()],1)])},_sfc_staticRenderFns$a=[],__component__$a=normalizeComponent(_sfc_main$a,_sfc_render$a,_sfc_staticRenderFns$a,!1,null,null,null,null);const GridHeaderCell=__component__$a.exports,_sfc_main$9={props:["fields","rows","meta","name","canDeleteRows"],computed:{sortableItemClass(){return`${this.name}-sortable-item`},sortableHandleClass(){return`${this.name}-drag-handle`},errorKeyPrefix(){return"variants-view-error-key-prefix"}},provide(){return{sortableItemClass:this.sortableItemClass,sortableHandleClass:this.sortableHandleClass}}},_sfc_render$9=null,_sfc_staticRenderFns$9=null;var __component__$9=normalizeComponent(_sfc_main$9,_sfc_render$9,_sfc_staticRenderFns$9,!1,null,null,null,null);const View=__component__$9.exports,_sfc_main$8={mixins:[ValidatesFieldConditions],props:{option:Object,index:Number,meta:Object,fieldPathPrefix:String,values:Object},methods:{updatedOptions(n,t){let e=this.values;e[n]=t,this.$emit("updated",this.index,e)},metaUpdated(n,t){this.$emit("metaUpdated",n,t)},fieldPath(n,t){return`${this.fieldPathPrefix}.${n}.${t}`},errors(n){}}};var _sfc_render$8=function n(){var t=this,e=t._self._c;return e("div",{staticClass:"replicator-set shadow-sm mb-4 rounded border dark:border-dark-900 testing-sortable-item variants-sortable-item"},[e("div",{staticClass:"replicator-set-header"},[e("div",{staticClass:"py-2 rtl:pr-2 ltr:pl-2 replicator-set-header-inner flex justify-between items-end w-full"},[e("label",{staticClass:"text-xs whitespace-nowrap rtl:ml-2 ltr:mr-2 cursor-pointer"},[t._v(" "+t._s(t.option.variant||t.__("Variants"))+" ")])])]),e("publish-fields-container",t._l(t.meta.option_fields,function(s,r){return e("publish-field",{directives:[{name:"show",rawName:"v-show",value:t.showField(s,t.fieldPath(r,s.handle)),expression:"showField(optionField, fieldPath(optionIndex, optionField.handle))"}],key:"option-"+s.handle,staticClass:"p-3",attrs:{config:s,value:t.option[s.handle],meta:t.meta[s.handle],errors:t.errors(s.handle),"field-path-prefix":t.fieldPath(r,s.handle)},on:{input:function(a){return t.updatedOptions(s.handle,a)},"meta-updated":function(a){return t.metaUpdated(t.option.handle,a)},focus:function(a){return t.$emit("focus")},blur:function(a){return t.$emit("blur")}}})}),1)],1)},_sfc_staticRenderFns$8=[],__component__$8=normalizeComponent(_sfc_main$8,_sfc_render$8,_sfc_staticRenderFns$8,!1,null,null,null,null);const VariantOptionRow=__component__$8.exports,_sfc_main$7={name:"product-variants-fieldtype",mixins:[Fieldtype,View],components:{GridHeaderCell,GridRow,SortableList,VariantOptionRow},props:["meta"],inject:["storeName"],data(){return{variants:[{name:"",values:[]}],options:[],canWatchVariants:!0}},computed:{cartesian(){let n=this.variants.filter(t=>t.values.length!=0).flatMap(t=>[t.values]);return n.length==0?[]:n.reduce((t,e)=>t.flatMap(s=>e.map(r=>[].concat(s,r))))},baseContainer(){let n=this.$parent;for(;n&&n.$options._componentTag!=="publish-container";)n=n.$parent;return n}},mounted(){this.value.variants&&this.value.options&&this.updateVariantsAndOptions(),this.$store.watch(n=>n.publish[this.storeName].site,(n,t)=>{n!==t&&this.updateVariantsAndOptions()})},methods:{updateVariantsAndOptions(){this.canWatchVariants=!1,this.variants=this.value.variants,this.options=this.value.options,this.canWatchVariants=!0},addVariant(){this.variants.push({name:"",values:[]})},deleteVariant(n){this.variants.splice(n,1)},saveData(){this.$emit("input",{variants:this.variants,options:this.options}),this.baseContainer.saved()},errors(n){},updated(n,t,e){this.variants[n][t]=e},optionsUpdated(n,t){this.options[n]=t},metaUpdated(n,t){}},watch:{variants:{handler(n){this.canWatchVariants!==!1&&(this.options=this.cartesian.map(t=>{let e=typeof t=="string"?t:t.join("_"),s=typeof t=="string"?t:t.join(", "),r=this.value.options.filter(a=>a.key===e)[0];return r===void 0&&(r={price:0},Object.entries(this.meta.option_field_defaults).forEach(([a,o])=>{r[a]=o})),{key:e,variant:s,...r}}),this.saveData())},deep:!0}}};var _sfc_render$7=function n(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"grid-fieldtype-container mb-16"},[e("div",{staticClass:"grid-stacked"},t._l(t.variants,function(s,r){return e("div",{key:r,staticClass:"replicator-set shadow-sm mb-4 rounded border dark:border-dark-900 testing-sortable-item variants-sortable-item"},[e("div",{staticClass:"replicator-set-header"},[e("div",{staticClass:"py-2 rtl:pr-2 ltr:pl-2 replicator-set-header-inner flex justify-between items-end w-full"},[e("label",{staticClass:"text-xs whitespace-nowrap rtl:ml-2 ltr:mr-2 cursor-pointer"},[t._v(" "+t._s(s.name||"Variant")+" ")]),t.variants.length>1?e("button",{staticClass:"icon icon-cross cursor-pointer",attrs:{"aria-label":t.__("Delete Variant")},on:{click:function(a){return t.deleteVariant(r)}}},[e("svg-icon",{staticClass:"w-4 h-4 text-gray-600 group-hover:text-gray-900",attrs:{name:"micro/trash"}})],1):t._e()])]),e("publish-fields-container",t._l(t.meta.variant_fields,function(a){return e("publish-field",{key:a.handle,staticClass:"p-3 w-1/2",attrs:{config:a,value:s[a.handle],meta:t.meta[a.handle],errors:t.errors(a.handle)},on:{input:function(o){return t.updated(r,a.handle,o)},"meta-updated":function(o){return t.metaUpdated(a.handle,o)},focus:function(o){return t.$emit("focus")},blur:function(o){return t.$emit("blur")}}})}),1)],1)}),0),e("button",{staticClass:"btn",on:{click:t.addVariant}},[t._v(" "+t._s(t.__("Add Variant"))+" ")])]),e("div",{staticClass:"grid-fieldtype-container"},[e("div",{staticClass:"grid-stacked"},t._l(t.options,function(s,r){return e("VariantOptionRow",{key:r,attrs:{option:s,index:r,meta:t.meta,values:t.value.options[r],fieldPathPrefix:t.handle+".options."+r},on:{updated:t.optionsUpdated,metaUpdated:t.metaUpdated,focus:function(a){return t.$emit("focus")},blur:function(a){return t.$emit("blur")}}})}),1)])])},_sfc_staticRenderFns$7=[],__component__$7=normalizeComponent(_sfc_main$7,_sfc_render$7,_sfc_staticRenderFns$7,!1,null,null,null,null);const ProductVariantsFieldtype=__component__$7.exports,_sfc_main$6={props:{event:Object,orderId:String,resendNotificationsUrl:String,orderStatuses:Array,paymentStatuses:Array,currentOrderStatus:String,currentPaymentStatus:String},computed:{status(){let n=this.event.status;return n=n.charAt(0).toUpperCase()+n.slice(1),__$1(n)},statusType(){if(this.orderStatuses.includes(this.event.status))return __$1("Order Status");if(this.paymentStatuses.includes(this.event.status))return __$1("Payment Status")},date(){return moment.unix(this.event.timestamp)},isCurrent(){return this.event.status===this.currentOrderStatus||this.event.status===this.currentPaymentStatus}},methods:{resendNotifications(){axios$1.post(this.resendNotificationsUrl,{order_id:this.orderId,status:this.event.status}).then(n=>{this.$toast.success(__$1("Notifications resent"))}).catch(n=>{this.$toast.error(__$1("Unable to resend notifications"))})}}};var _sfc_render$6=function n(){var s;var t=this,e=t._self._c;return e("div",{staticClass:"revision-item"},[e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"revision-item-content w-full flex items-center justify-between"},[e("div",[e("p",{staticClass:"ml-2"},[t._v(t._s(t.statusType)+" changed to "),e("span",{staticClass:"font-medium"},[t._v(t._s(t.status))])]),t.isCurrent?e("span",{staticClass:"badge bg-orange",domProps:{textContent:t._s(t.__("Current"))}}):t._e()]),e("div",{staticClass:"flex-1 flex items-center justify-end",staticStyle:{"flex-shrink":"0"}},[e("div",[e("div",{staticClass:"revision-author text-gray-700 text-2xs"},[t._v(" "+t._s(t.date.isBefore(t.$moment().startOf("day"))?t.date.format("LT"):t.date.fromNow())+" ")])]),e("dropdown-list",{staticClass:"ml-2"},[e("dropdown-item",{attrs:{text:t.__("Resend notifications")},on:{click:t.resendNotifications}})],1)],1)])]),(s=t.event.data)!=null&&s.reason?e("div",{staticClass:"revision-item-note truncate ml-2 mt-3 font-normal text-xs",domProps:{textContent:t._s(t.event.data.reason)}}):t._e(),t.event.user?e("div",{staticClass:"flex items-center ml-2 mt-2",staticStyle:{"flex-shrink":"0"}},[t.event.user?e("avatar",{staticClass:"shrink-0 mr-2 w-6",attrs:{user:t.event.user}}):t._e(),e("div",{staticClass:"flex-1 revision-author text-gray-700 text-2xs"},[t.event.user?[t._v(t._s(t.event.user.name||t.event.user.email))]:t._e()],2)],1):t._e()])},_sfc_staticRenderFns$6=[],__component__$6=normalizeComponent(_sfc_main$6,_sfc_render$6,_sfc_staticRenderFns$6,!1,null,null,null,null);const StatusLogEvent=__component__$6.exports,_sfc_main$5={components:{StatusLogEvent},props:{indexUrl:String,resendNotificationsUrl:String,orderId:String,orderStatuses:Array,paymentStatuses:Array,currentOrderStatus:String,currentPaymentStatus:String},data(){return{loading:!0,statusLog:[],escBinding:null}},mounted(){this.$axios.post(this.indexUrl,{order_id:this.orderId}).then(n=>{this.loading=!1,this.statusLog=n.data.reverse()}),this.escBinding=this.$keys.bindGlobal(["esc"],n=>{this.close()})},beforeDestroy(){this.escBinding.destroy()},methods:{close(){this.$emit("closed")}}};var _sfc_render$5=function n(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-dark-800 h-full flex flex-col"},[e("div",{staticClass:"bg-gray-200 dark:bg-dark-600 px-4 py-2 border-b border-gray-300 dark:border-dark-900 text-lg font-medium flex items-center justify-between"},[t._v(" "+t._s(t.__("Status Log"))+" "),e("button",{staticClass:"btn-close",attrs:{type:"button"},domProps:{innerHTML:t._s("&times")},on:{click:t.close}})]),e("div",{staticClass:"flex-1 overflow-auto"},[t.loading?e("div",{staticClass:"flex h-full items-center justify-center loading"},[e("loading-graphic")],1):t._e(),!t.loading&&t.statusLog.length===0?e("div",{staticClass:"p-4 text-gray dark:text-dark-150 text-sm"},[t._v(" "+t._s(t.__("No status log events."))+" ")]):t._e(),t._l(t.statusLog,function(s){return e("div",{key:s.day},[e("h6",{staticClass:"revision-date",domProps:{textContent:t._s(t.$moment.unix(s.day).isBefore(t.$moment().startOf("day"))?t.$moment.unix(s.day).format("LL"):t.__("Today"))}}),e("div",{staticClass:"revision-list"},t._l(s.events,function(r){return e("status-log-event",{key:r.timestamp,attrs:{event:r,"order-id":t.orderId,"resend-notifications-url":t.resendNotificationsUrl,"order-statuses":t.orderStatuses,"payment-statuses":t.paymentStatuses,"current-order-status":t.currentOrderStatus,"current-payment-status":t.currentPaymentStatus}})}),1)])})],2)])},_sfc_staticRenderFns$5=[],__component__$5=normalizeComponent(_sfc_main$5,_sfc_render$5,_sfc_staticRenderFns$5,!1,null,null,null,null);const StatusLog=__component__$5.exports,_sfc_main$4={name:"status-log-fieldtype",components:{StatusLog},mixins:[Fieldtype],props:["meta"],inject:["storeName"],data(){return{showStatusLog:!1}},computed:{isCreating(){var n;return((n=this.$store.state.publish[this.storeName].values)==null?void 0:n.id)===null},orderId(){return this.$store.state.publish[this.storeName].values.id},currentOrderStatus(){return this.$store.state.publish[this.storeName].values.order_status},currentPaymentStatus(){return this.$store.state.publish[this.storeName].values.payment_status}}};var _sfc_render$4=function n(){var t=this,e=t._self._c;return t.isCreating?t._e():e("div",[e("button",{staticClass:"flex items-center justify-center btn-flat px-2 w-full",on:{click:function(s){t.showStatusLog=!0}}},[e("svg-icon",{staticClass:"h-4 w-4 mr-2",attrs:{name:"light/history"}}),e("span",[t._v(t._s(t.__("View Status Log")))])],1),t.showStatusLog?e("stack",{attrs:{name:"status-log",narrow:!0},on:{closed:function(s){t.showStatusLog=!1}},scopedSlots:t._u([{key:"default",fn:function({close:s}){return e("status-log",{attrs:{"index-url":t.meta.indexUrl,"order-id":t.orderId,"resend-notifications-url":t.meta.resendNotificationsUrl,"order-statuses":t.meta.orderStatuses,"payment-statuses":t.meta.paymentStatuses,"current-order-status":t.currentOrderStatus,"current-payment-status":t.currentPaymentStatus},on:{closed:s}})}}],null,!1,3692490087)}):t._e()],1)},_sfc_staticRenderFns$4=[],__component__$4=normalizeComponent(_sfc_main$4,_sfc_render$4,_sfc_staticRenderFns$4,!1,null,null,null,null);const StatusLogFieldtype=__component__$4.exports,_sfc_main$3={props:{value:{type:String,required:!1}},data(){return{busy:!0,regions:[],region:null}},mounted(){let n=document.getElementsByName("country")[0];this.fetchRegions(n.value),this.value&&(this.region=this.value),n.addEventListener("change",t=>{this.region=null,this.fetchRegions(n.value)})},methods:{fetchRegions(n){axios$1.get(cp_url(`/simple-commerce/fieldtype-api/regions?country=${n}`)).then(t=>{this.regions=t.data}).catch(t=>{this.$toast.error("There was an error fectching regions.")})}},watch:{region(n){document.getElementById("regionInput").value=n}}};var _sfc_render$3=function n(){var t=this,e=t._self._c;return e("div",{staticClass:"form-group w-full"},[e("label",{staticClass:"block mb-1"},[t._v(t._s(t.__("Region")))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.region,expression:"region"}],staticClass:"input-text",on:{change:function(s){var r=Array.prototype.filter.call(s.target.options,function(a){return a.selected}).map(function(a){var o="_value"in a?a._value:a.value;return o});t.region=s.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"",selected:"",disabled:"true"}},[t._v(" "+t._s(t.__("Please select"))+" ")]),t._l(t.regions,function(s){return e("option",{key:s.id,domProps:{value:s.id,textContent:t._s(s.name)}})})],2)])},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(_sfc_main$3,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,null,null,null);const RegionSelector=__component__$3.exports,HasActions={methods:{actionStarted(){this.loading=!0},actionCompleted(n=null,t={}){this.loading=!1,n!==!1&&(this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),t.message!==!1&&this.$toast.success(t.message||__("Action completed")),this.afterActionSuccessfullyCompleted())},afterActionSuccessfullyCompleted(){this.request()}}},HasFilters={data(){return{activeFilterBadges:{},activeFilters:{},activePreset:null,activePresetPayload:{},searchQuery:""}},computed:{activeFilterCount(){let n=Object.keys(this.activeFilters).length;return this.activeFilters.hasOwnProperty("fields")&&(n=n+Object.keys(this.activeFilters.fields).filter(t=>t!="badge").length-1),n},canSave(){return this.isDirty&&this.preferencesPrefix},isDirty(){return this.isFiltering?this.activePreset?this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters):!0:!1},isFiltering(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},hasActiveFilters(){return this.activeFilterCount>0},searchPlaceholder(){return this.activePreset?__("Searching in: ")+this.activePresetPayload.display:__("Search")}},created(){this.$keys.bind("f",n=>{n.preventDefault(),this.handleShowFilters()})},methods:{searchChanged(n){this.searchQuery=n},hasFields(n){for(const t in n)if(n[t])return!0;return!1},filterChanged({handle:n,values:t},e=!0){t&&this.hasFields(t)?Vue.set(this.activeFilters,n,t):Vue.delete(this.activeFilters,n),e&&this.unselectAllItems()},filtersChanged(n){this.activeFilters={};for(const t in n){const e=n[t];this.filterChanged({handle:t,values:e},!1)}this.unselectAllItems()},filtersReset(){this.activePreset=null,this.activePresetPayload={},this.searchQuery="",this.activeFilters={},this.activeFilterBadges={}},unselectAllItems(){this.$refs.dataList&&this.$refs.dataList.clearSelections()},selectPreset(n,t){this.activePreset=n,this.activePresetPayload=t,this.searchQuery=t.query,this.filtersChanged(t.filters)},autoApplyFilters(n){if(!n)return;let t={};n.filter(e=>!_.isEmpty(e.auto_apply)).forEach(e=>{t[e.handle]=e.auto_apply}),this.activeFilters=t}}},HasPagination={props:{initialPerPage:{type:Number,default(){return Statamic.$config.get("paginationSize")}}},data(){return{perPage:this.initialPerPage,page:1}},mounted(){this.setInitialPerPage()},methods:{setInitialPerPage(){this.hasPreferences&&(this.perPage=this.getPreference("per_page")||this.initialPerPage)},changePerPage(n){n=parseInt(n),(this.hasPreferences?this.setPreference("per_page",n!=this.initialPerPage?n:null):Promise.resolve()).then(e=>{this.perPage=n,this.resetPage()})},selectPage(n){this.page=n,this.$events.$emit("clear-selections")},resetPage(){this.page=1,this.$events.$emit("clear-selections")}}},HasPreferences={data(){return{preferencesPrefix:null}},computed:{hasPreferences(){return this.preferencesPrefix!==null}},methods:{preferencesKey(n){return`${this.preferencesPrefix}.${n}`},getPreference(n){return this.$preferences.get(this.preferencesKey(n))},setPreference(n,t){return this.$preferences.set(this.preferencesKey(n),t)},removePreference(n,t=null){return this.$preferences.remove(this.preferencesKey(n),t)}}},_sfc_main$2={mixins:[HasActions,HasFilters,HasPagination,HasPreferences],props:{initialSortColumn:String,initialSortDirection:String,initialColumns:{type:Array,default:()=>[]},filters:Array,actionUrl:String},data(){return{source:null,initializing:!0,loading:!0,items:[],columns:this.initialColumns,visibleColumns:this.initialColumns.filter(n=>n.visible),sortColumn:this.initialSortColumn,sortDirection:this.initialSortDirection,meta:null,pushQuery:!1,popping:!1}},computed:{parameterMap(){return{sort:"sortColumn",order:"sortDirection",page:"page",perPage:"perPage",search:"searchQuery",filters:"activeFilterParameters",columns:"visibleColumnParameters"}},parameters:{get(){return{...Object.fromEntries(Object.entries(this.parameterMap).map(([t,e])=>[t,this[e]]).filter(([t,e])=>e!=null&&e!=="")),...this.additionalParameters}},set(n){Object.entries(this.parameterMap).forEach(([t,e])=>{n.hasOwnProperty(t)&&(this[e]=n[t])})}},activeFilterParameters:{get(){return _.isEmpty(this.activeFilters)?null:utf8btoa(JSON.stringify(this.activeFilters))},set(n){this.activeFilters=JSON.parse(utf8atob(n))}},visibleColumnParameters:{get(){return _.isEmpty(this.visibleColumns)?null:this.visibleColumns.map(n=>n.field).join(",")},set(n){this.visibleColumns=n.split(",").map(t=>this.columns.find(e=>e.field===t))}},additionalParameters(){return{}},shouldRequestFirstPage(){return this.page>1&&this.items.length===0?(this.page=1,!0):!1}},created(){this.autoApplyFilters(this.filters),this.autoApplyState(),this.request()},mounted(){this.pushQuery&&(window.history.replaceState({parameters:this.parameters},""),window.addEventListener("popstate",this.popState))},beforeDestroy(){this.pushQuery&&window.removeEventListener("popstate",this.popState)},watch:{parameters:{deep:!0,handler(n,t){t.search===n.search&&JSON.stringify(t)!==JSON.stringify(n)&&(this.request(),this.pushState())}},loading:{immediate:!0,handler(n){this.$progress.loading(this.listingKey,n)}},searchQuery(n){this.sortColumn=null,this.sortDirection=null,this.resetPage(),this.request(),this.pushState()}},methods:{request(){if(!this.requestUrl){this.loading=!1;return}this.loading=!0,this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source(),this.$axios.get(this.requestUrl,{params:this.parameters,cancelToken:this.source.token}).then(n=>{if(this.columns=n.data.meta.columns,this.activeFilterBadges={...n.data.meta.activeFilterBadges},this.items=Object.values(n.data.data),this.meta=n.data.meta,this.shouldRequestFirstPage)return this.request();this.loading=!1,this.initializing=!1,this.afterRequestCompleted(n)}).catch(n=>{this.$axios.isCancel(n)||(this.loading=!1,this.initializing=!1,!(n.request&&!n.response)&&this.$toast.error(n.response?n.response.data.message:__("Something went wrong"),{duration:null}))})},afterRequestCompleted(n){},sorted(n,t){this.sortColumn=n,this.sortDirection=t},removeRow(n){let t=n.id,e=_.indexOf(this.rows,_.findWhere(this.rows,{id:t}));this.rows.splice(e,1),this.rows.length===0&&location.reload()},popState(n){!this.pushQuery||!n.state||(this.popping=!0,this.parameters=n.state.parameters,this.$nextTick(()=>{this.popping=!1}))},pushState(){if(!this.pushQuery||this.popping)return;const n=this.parameters,t=Object.keys(this.parameterMap),e=new URLSearchParams(Object.fromEntries(t.filter(s=>n.hasOwnProperty(s)).map(s=>[s,n[s]])));window.history.pushState({parameters:n},"","?"+e.toString())},autoApplyState(){if(!this.pushQuery||!window.location.search)return;const n=new URLSearchParams(window.location.search),t=Object.fromEntries(n.entries());this.popping=!0,this.parameters=t,this.$nextTick(()=>{this.popping=!1})}}},_sfc_render$2=null,_sfc_staticRenderFns$2=null;var __component__$2=normalizeComponent(_sfc_main$2,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,null,null,null);const Listing=__component__$2.exports,_sfc_main$1={mixins:[Listing],props:{listingConfig:Object,initialColumns:Array,actionUrl:String},data(){return{listingKey:"code",preferencesPrefix:this.listingConfig.preferencesPrefix??"simple-commerce.coupons",requestUrl:this.listingConfig.requestUrl,columns:this.initialColumns,meta:{}}},methods:{canEditRow(n){return n.editable},columnShowing(n){return this.visibleColumns.find(t=>t.field===n)}}};var _sfc_render$1=function n(){var t=this,e=t._self._c;return e("div",[t.initializing?e("div",{staticClass:"card loading"},[e("loading-graphic")],1):t._e(),t.initializing?t._e():e("data-list",{attrs:{rows:t.items,columns:t.columns,sort:!1,"sort-column":t.sortColumn,"sort-direction":t.sortDirection},on:{"visible-columns-updated":function(s){t.visibleColumns=s}},scopedSlots:t._u([{key:"default",fn:function({hasSelections:s}){return e("div",{},[e("div",{staticClass:"card overflow-hidden p-0 relative"},[e("div",{staticClass:"flex flex-wrap items-center justify-between px-2 pb-2 text-sm border-b"},[e("data-list-filter-presets",{directives:[{name:"show",rawName:"v-show",value:t.alwaysShowFilters||!t.showFilters,expression:"alwaysShowFilters || !showFilters"}],ref:"presets",attrs:{"active-preset":t.activePreset,"active-preset-payload":t.activePresetPayload,"active-filters":t.activeFilters,"has-active-filters":t.hasActiveFilters,"preferences-prefix":t.preferencesPrefix,"search-query":t.searchQuery},on:{selected:t.selectPreset,reset:t.filtersReset,"hide-filters":t.filtersHide,"show-filters":t.filtersShow}}),e("data-list-search",{ref:"search",staticClass:"h-8 mt-2 min-w-[240px] w-full",attrs:{placeholder:t.searchPlaceholder},model:{value:t.searchQuery,callback:function(r){t.searchQuery=r},expression:"searchQuery"}}),e("div",{staticClass:"flex space-x-2 mt-2"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:t._s(t.__("Reset"))},on:{click:function(r){return t.$refs.presets.refreshPreset()}}}),e("button",{directives:[{name:"show",rawName:"v-show",value:t.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:t._s(t.__("Save"))},on:{click:function(r){return t.$refs.presets.savePreset()}}}),e("data-list-column-picker",{attrs:{"preferences-key":t.preferencesKey("columns")}})],1)],1),e("div",[e("data-list-filters",{attrs:{filters:t.filters,"active-preset":t.activePreset,"active-preset-payload":t.activePresetPayload,"active-filters":t.activeFilters,"active-filter-badges":t.activeFilterBadges,"active-count":t.activeFilterCount,"search-query":t.searchQuery,"is-searching":!0,"saves-presets":!0,"preferences-prefix":t.preferencesPrefix},on:{changed:t.filterChanged,saved:function(r){return t.$refs.presets.setPreset(r)},deleted:function(r){return t.$refs.presets.refreshPresets()}}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.items.length===0,expression:"items.length === 0"}],staticClass:"p-6 text-center text-gray-500",domProps:{textContent:t._s(t.__("No results"))}}),e("data-list-bulk-actions",{attrs:{url:t.actionUrl},on:{started:t.actionStarted,completed:t.actionCompleted}}),e("div",{staticClass:"overflow-x-auto overflow-y-hidden"},[e("data-list-table",{directives:[{name:"show",rawName:"v-show",value:t.items.length,expression:"items.length"}],attrs:{"allow-bulk-actions":!0,loading:t.loading,reorderable:!1,sortable:!0,"toggle-selection-on-row-click":!0,"allow-column-picker":!0,"column-preferences-key":t.preferencesKey("simple-commerce.columns")},on:{sorted:t.sorted},scopedSlots:t._u([{key:"cell-code",fn:function({row:r,value:a}){return[e("div",{staticClass:"title-index-field"},[e("a",{attrs:{href:r.edit_url},on:{click:function(o){o.stopPropagation()}}},[t._v(t._s(r.code))])])]}},{key:"cell-value",fn:function({row:r,value:a}){return[e("div",[t._v(" "+t._s(r.discount_text)+" ")])]}},{key:"actions",fn:function({row:r,index:a}){return[t.canEditRow(r)||r.actions.length?e("dropdown-list",[t.canEditRow(r)?e("dropdown-item",{attrs:{text:t.__("Edit"),redirect:r.edit_url}}):t._e(),t.canEditRow(r)&&r.actions.length?e("div",{staticClass:"divider"}):t._e(),e("data-list-inline-actions",{attrs:{item:r.id,url:t.actionUrl,actions:r.actions},on:{started:t.actionStarted,completed:t.actionCompleted}})],1):e("div",{staticClass:"w-10 block"})]}}],null,!0)})],1)],1),e("data-list-pagination",{staticClass:"mt-3",attrs:{"resource-meta":t.meta,"per-page":t.perPage},on:{"page-selected":t.selectPage,"per-page-changed":t.changePerPage}})],1)}}],null,!1,74537586)})],1)},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(_sfc_main$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,null,null,null);const CouponListing=__component__$1.exports;/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */function noop(){}const uid=function(){let n=0;return function(){return n++}}();function isNullOrUndef(n){return n===null||typeof n>"u"}function isArray(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function isObject(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}const isNumberFinite=n=>(typeof n=="number"||n instanceof Number)&&isFinite(+n);function finiteOrDefault(n,t){return isNumberFinite(n)?n:t}function valueOrDefault(n,t){return typeof n>"u"?t:n}const toPercentage=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:n/t,toDimension=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function callback(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function each(n,t,e,s){let r,a,o;if(isArray(n))if(a=n.length,s)for(r=a-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<a;r++)t.call(e,n[r],r);else if(isObject(n))for(o=Object.keys(n),a=o.length,r=0;r<a;r++)t.call(e,n[o[r]],o[r])}function _elementsEqual(n,t){let e,s,r,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,s=n.length;e<s;++e)if(r=n[e],a=t[e],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function clone$1(n){if(isArray(n))return n.map(clone$1);if(isObject(n)){const t=Object.create(null),e=Object.keys(n),s=e.length;let r=0;for(;r<s;++r)t[e[r]]=clone$1(n[e[r]]);return t}return n}function isValidKey(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function _merger(n,t,e,s){if(!isValidKey(n))return;const r=t[n],a=e[n];isObject(r)&&isObject(a)?merge(r,a,s):t[n]=clone$1(a)}function merge(n,t,e){const s=isArray(t)?t:[t],r=s.length;if(!isObject(n))return n;e=e||{};const a=e.merger||_merger;for(let o=0;o<r;++o){if(t=s[o],!isObject(t))continue;const l=Object.keys(t);for(let c=0,h=l.length;c<h;++c)a(l[c],n,t,e)}return n}function mergeIf(n,t){return merge(n,t,{merger:_mergerIf})}function _mergerIf(n,t,e){if(!isValidKey(n))return;const s=t[n],r=e[n];isObject(s)&&isObject(r)?mergeIf(s,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=clone$1(r))}const keyResolvers={"":n=>n,x:n=>n.x,y:n=>n.y};function resolveObjectKey(n,t){return(keyResolvers[t]||(keyResolvers[t]=_getKeyResolver(t)))(n)}function _getKeyResolver(n){const t=_splitKey(n);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function _splitKey(n){const t=n.split("."),e=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function _capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)}const defined=n=>typeof n<"u",isFunction=n=>typeof n=="function",setsEqual=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function _isClickEvent(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function niceNum(n){const t=Math.round(n);n=almostEquals(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(log10(n))),s=n/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function _factorize(n){const t=[],e=Math.sqrt(n);let s;for(s=1;s<e;s++)n%s===0&&(t.push(s),t.push(n/s));return e===(e|0)&&t.push(e),t.sort((r,a)=>r-a).pop(),t}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function almostEquals(n,t,e){return Math.abs(n-t)<e}function almostWhole(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function _setMinAndMaxByKey(n,t,e){let s,r,a;for(s=0,r=n.length;s<r;s++)a=n[s][e],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function toRadians(n){return n*(PI/180)}function toDegrees(n){return n*(180/PI)}function _decimalPlaces(n){if(!isNumberFinite(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function getAngleFromPoint(n,t){const e=t.x-n.x,s=t.y-n.y,r=Math.sqrt(e*e+s*s);let a=Math.atan2(s,e);return a<-.5*PI&&(a+=TAU),{angle:a,distance:r}}function distanceBetweenPoints(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function _angleDiff(n,t){return(n-t+PITAU)%TAU-PI}function _normalizeAngle(n){return(n%TAU+TAU)%TAU}function _angleBetween(n,t,e,s){const r=_normalizeAngle(n),a=_normalizeAngle(t),o=_normalizeAngle(e),l=_normalizeAngle(a-r),c=_normalizeAngle(o-r),h=_normalizeAngle(r-a),u=_normalizeAngle(r-o);return r===a||r===o||s&&a===o||l>c&&h<u}function _limitValue(n,t,e){return Math.max(t,Math.min(e,n))}function _int16Range(n){return _limitValue(n,-32768,32767)}function _isBetween(n,t,e,s=1e-6){return n>=Math.min(t,e)-s&&n<=Math.max(t,e)+s}function _lookup(n,t,e){e=e||(o=>n[o]<t);let s=n.length-1,r=0,a;for(;s-r>1;)a=r+s>>1,e(a)?r=a:s=a;return{lo:r,hi:s}}const _lookupByKey=(n,t,e,s)=>_lookup(n,e,s?r=>n[r][t]<=e:r=>n[r][t]<e),_rlookupByKey=(n,t,e)=>_lookup(n,e,s=>n[s][t]>=e);function _filterBetween(n,t,e){let s=0,r=n.length;for(;s<r&&n[s]<t;)s++;for(;r>s&&n[r-1]>e;)r--;return s>0||r<n.length?n.slice(s,r):n}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),arrayEvents.forEach(e=>{const s="_onData"+_capitalize(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const o=r.apply(this,a);return n._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...a)}),o}})})}function unlistenArrayEvents(n,t){const e=n._chartjs;if(!e)return;const s=e.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(arrayEvents.forEach(a=>{delete n[a]}),delete n._chartjs)}function _arrayUnique(n){const t=new Set;let e,s;for(e=0,s=n.length;e<s;++e)t.add(n[e]);return t.size===s?n:Array.from(t)}const requestAnimFrame=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function throttled(n,t,e){const s=e||(o=>Array.prototype.slice.call(o));let r=!1,a=[];return function(...o){a=s(o),r||(r=!0,requestAnimFrame.call(window,()=>{r=!1,n.apply(t,a)}))}}function debounce(n,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(n,t,s)):n.apply(this,s),t}}const _toLeftRightCenter=n=>n==="start"?"left":n==="end"?"right":"center",_alignStartEnd=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,_textX=(n,t,e,s)=>n===(s?"left":"right")?e:n==="center"?(t+e)/2:t;function _getStartAndCountOfVisiblePoints(n,t,e){const s=t.length;let r=0,a=s;if(n._sorted){const{iScale:o,_parsed:l}=n,c=o.axis,{min:h,max:u,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(r=_limitValue(Math.min(_lookupByKey(l,o.axis,h).lo,e?s:_lookupByKey(t,c,o.getPixelForValue(h)).lo),0,s-1)),f?a=_limitValue(Math.max(_lookupByKey(l,o.axis,u,!0).hi+1,e?0:_lookupByKey(t,c,o.getPixelForValue(u),!0).hi+1),r,s)-r:a=s-r}return{start:r,count:a}}function _scaleRangesChanged(n){const{xScale:t,yScale:e,_scaleRanges:s}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return n._scaleRanges=r,!0;const a=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,r),a}const atEdge=n=>n===0||n===1,elasticIn=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*TAU/e)),elasticOut=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*TAU/e)+1,effects={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*HALF_PI)+1,easeOutSine:n=>Math.sin(n*HALF_PI),easeInOutSine:n=>-.5*(Math.cos(PI*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>atEdge(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>atEdge(n)?n:elasticIn(n,.075,.3),easeOutElastic:n=>atEdge(n)?n:elasticOut(n,.075,.3),easeInOutElastic(n){return atEdge(n)?n:n<.5?.5*elasticIn(n*2,.1125,.45):.5+.5*elasticOut(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-effects.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?effects.easeInBounce(n*2)*.5:effects.easeOutBounce(n*2-1)*.5+.5};/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function round(n){return n+.5|0}const lim=(n,t,e)=>Math.max(Math.min(n,e),t);function p2b(n){return lim(round(n*2.55),0,255)}function n2b(n){return lim(round(n*255),0,255)}function b2n(n){return lim(round(n/2.55)/100,0,1)}function n2p(n){return lim(round(n*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=n=>hex[n&15],h2=n=>hex[(n&240)>>4]+hex[n&15],eq=n=>(n&240)>>4===(n&15),isShort=n=>eq(n.r)&&eq(n.g)&&eq(n.b)&&eq(n.a);function hexParse(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&map$1[n[1]]*17,g:255&map$1[n[2]]*17,b:255&map$1[n[3]]*17,a:t===5?map$1[n[4]]*17:255}:(t===7||t===9)&&(e={r:map$1[n[1]]<<4|map$1[n[2]],g:map$1[n[3]]<<4|map$1[n[4]],b:map$1[n[5]]<<4|map$1[n[6]],a:t===9?map$1[n[7]]<<4|map$1[n[8]]:255})),e}const alpha=(n,t)=>n<255?t(n):"";function hexString(n){var t=isShort(n)?h1:h2;return n?"#"+t(n.r)+t(n.g)+t(n.b)+alpha(n.a,t):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(n,t,e){const s=t*Math.min(e,1-e),r=(a,o=(a+n/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function hsv2rgbn(n,t,e){const s=(r,a=(r+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[s(5),s(3),s(1)]}function hwb2rgbn(n,t,e){const s=hsl2rgbn(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)s[r]*=1-t-e,s[r]+=t;return s}function hueValue(n,t,e,s,r){return n===r?(t-e)/s+(t<e?6:0):t===r?(e-n)/s+2:(n-t)/s+4}function rgb2hsl(n){const e=n.r/255,s=n.g/255,r=n.b/255,a=Math.max(e,s,r),o=Math.min(e,s,r),l=(a+o)/2;let c,h,u;return a!==o&&(u=a-o,h=l>.5?u/(2-a-o):u/(a+o),c=hueValue(e,s,r,u,a),c=c*60+.5),[c|0,h||0,l]}function calln(n,t,e,s){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,s)).map(n2b)}function hsl2rgb(n,t,e){return calln(hsl2rgbn,n,t,e)}function hwb2rgb(n,t,e){return calln(hwb2rgbn,n,t,e)}function hsv2rgb(n,t,e){return calln(hsv2rgbn,n,t,e)}function hue(n){return(n%360+360)%360}function hueParse(n){const t=HUE_RE.exec(n);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?p2b(+t[5]):n2b(+t[5]));const r=hue(+t[2]),a=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=hwb2rgb(r,a,o):t[1]==="hsv"?s=hsv2rgb(r,a,o):s=hsl2rgb(r,a,o),{r:s[0],g:s[1],b:s[2],a:e}}function rotate(n,t){var e=rgb2hsl(n);e[0]=hue(e[0]+t),e=hsl2rgb(e),n.r=e[0],n.g=e[1],n.b=e[2]}function hslString(n){if(!n)return;const t=rgb2hsl(n),e=t[0],s=n2p(t[1]),r=n2p(t[2]);return n.a<255?`hsla(${e}, ${s}%, ${r}%, ${b2n(n.a)})`:`hsl(${e}, ${s}%, ${r}%)`}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const n={},t=Object.keys(names$1),e=Object.keys(map);let s,r,a,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<e.length;r++)a=e[r],l=l.replace(a,map[a]);a=parseInt(names$1[o],16),n[l]=[a>>16&255,a>>8&255,a&255]}return n}let names;function nameParse(n){names||(names=unpack(),names.transparent=[0,0,0,0]);const t=names[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(n){const t=RGB_RE.exec(n);let e=255,s,r,a;if(t){if(t[7]!==s){const o=+t[7];e=t[8]?p2b(o):lim(o*255,0,255)}return s=+t[1],r=+t[3],a=+t[5],s=255&(t[2]?p2b(s):lim(s,0,255)),r=255&(t[4]?p2b(r):lim(r,0,255)),a=255&(t[6]?p2b(a):lim(a,0,255)),{r:s,g:r,b:a,a:e}}}function rgbString(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${b2n(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const to=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,from=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function interpolate$1(n,t,e){const s=from(b2n(n.r)),r=from(b2n(n.g)),a=from(b2n(n.b));return{r:n2b(to(s+e*(from(b2n(t.r))-s))),g:n2b(to(r+e*(from(b2n(t.g))-r))),b:n2b(to(a+e*(from(b2n(t.b))-a))),a:n.a+e*(t.a-n.a)}}function modHSL(n,t,e){if(n){let s=rgb2hsl(n);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=hsl2rgb(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function clone$2(n,t){return n&&Object.assign(t||{},n)}function fromObject(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=n2b(n[3]))):(t=clone$2(n,{r:0,g:0,b:0,a:1}),t.a=n2b(t.a)),t}function functionParse(n){return n.charAt(0)==="r"?rgbParse(n):hueParse(n)}class Color{constructor(t){if(t instanceof Color)return t;const e=typeof t;let s;e==="object"?s=fromObject(t):e==="string"&&(s=hexParse(t)||nameParse(t)||functionParse(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=clone$2(this._rgb);return t&&(t.a=b2n(t.a)),t}set rgb(t){this._rgb=fromObject(t)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,r=t.rgb;let a;const o=e===a?.5:e,l=2*o-1,c=s.a-r.a,h=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;a=1-h,s.r=255&h*s.r+a*r.r+.5,s.g=255&h*s.g+a*r.g+.5,s.b=255&h*s.b+a*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=interpolate$1(this._rgb,t._rgb,e)),this}clone(){return new Color(this.rgb)}alpha(t){return this._rgb.a=n2b(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=round(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return modHSL(this._rgb,2,t),this}darken(t){return modHSL(this._rgb,2,-t),this}saturate(t){return modHSL(this._rgb,1,t),this}desaturate(t){return modHSL(this._rgb,1,-t),this}rotate(t){return rotate(this._rgb,t),this}}function index_esm(n){return new Color(n)}function isPatternOrGradient(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function color(n){return isPatternOrGradient(n)?n:index_esm(n)}function getHoverColor(n){return isPatternOrGradient(n)?n:index_esm(n).saturate(.5).darken(.1).hexString()}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(n,t){if(!t)return n;const e=t.split(".");for(let s=0,r=e.length;s<r;++s){const a=e[s];n=n[a]||(n[a]=Object.create(null))}return n}function set(n,t,e){return typeof t=="string"?merge(getScope$1(n,t),e):merge(getScope$1(n,""),t)}class Defaults{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,s)=>getHoverColor(s.backgroundColor),this.hoverBorderColor=(e,s)=>getHoverColor(s.borderColor),this.hoverColor=(e,s)=>getHoverColor(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return set(this,t,e)}get(t){return getScope$1(this,t)}describe(t,e){return set(descriptors,t,e)}override(t,e){return set(overrides,t,e)}route(t,e,s,r){const a=getScope$1(this,t),o=getScope$1(this,s),l="_"+e;Object.defineProperties(a,{[l]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const c=this[l],h=o[r];return isObject(c)?Object.assign({},h,c):valueOrDefault(c,h)},set(c){this[l]=c}}})}}var defaults=new Defaults({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function toFontString(n){return!n||isNullOrUndef(n.size)||isNullOrUndef(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function _measureText(n,t,e,s,r){let a=t[r];return a||(a=t[r]=n.measureText(r).width,e.push(r)),a>s&&(s=a),s}function _longestText(n,t,e,s){s=s||{};let r=s.data=s.data||{},a=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(r=s.data={},a=s.garbageCollect=[],s.font=t),n.save(),n.font=t;let o=0;const l=e.length;let c,h,u,d,f;for(c=0;c<l;c++)if(d=e[c],d!=null&&isArray(d)!==!0)o=_measureText(n,r,a,o,d);else if(isArray(d))for(h=0,u=d.length;h<u;h++)f=d[h],f!=null&&!isArray(f)&&(o=_measureText(n,r,a,o,f));n.restore();const p=a.length/2;if(p>e.length){for(c=0;c<p;c++)delete r[a[c]];a.splice(0,p)}return o}function _alignPixel(n,t,e){const s=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*s)/s+r}function clearCanvas(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function drawPoint(n,t,e,s){drawPointLegend(n,t,e,s,null)}function drawPointLegend(n,t,e,s,r){let a,o,l,c,h,u;const d=t.pointStyle,f=t.rotation,p=t.radius;let g=(f||0)*RAD_PER_DEG;if(d&&typeof d=="object"&&(a=d.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,s),n.rotate(g),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),d){default:r?n.ellipse(e,s,r/2,p,0,0,TAU):n.arc(e,s,p,0,TAU),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(g)*p,s-Math.cos(g)*p),g+=TWO_THIRDS_PI,n.lineTo(e+Math.sin(g)*p,s-Math.cos(g)*p),g+=TWO_THIRDS_PI,n.lineTo(e+Math.sin(g)*p,s-Math.cos(g)*p),n.closePath();break;case"rectRounded":h=p*.516,c=p-h,o=Math.cos(g+QUARTER_PI)*c,l=Math.sin(g+QUARTER_PI)*c,n.arc(e-o,s-l,h,g-PI,g-HALF_PI),n.arc(e+l,s-o,h,g-HALF_PI,g),n.arc(e+o,s+l,h,g,g+HALF_PI),n.arc(e-l,s+o,h,g+HALF_PI,g+PI),n.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*p,u=r?r/2:c,n.rect(e-u,s-c,2*u,2*c);break}g+=QUARTER_PI;case"rectRot":o=Math.cos(g)*p,l=Math.sin(g)*p,n.moveTo(e-o,s-l),n.lineTo(e+l,s-o),n.lineTo(e+o,s+l),n.lineTo(e-l,s+o),n.closePath();break;case"crossRot":g+=QUARTER_PI;case"cross":o=Math.cos(g)*p,l=Math.sin(g)*p,n.moveTo(e-o,s-l),n.lineTo(e+o,s+l),n.moveTo(e+l,s-o),n.lineTo(e-l,s+o);break;case"star":o=Math.cos(g)*p,l=Math.sin(g)*p,n.moveTo(e-o,s-l),n.lineTo(e+o,s+l),n.moveTo(e+l,s-o),n.lineTo(e-l,s+o),g+=QUARTER_PI,o=Math.cos(g)*p,l=Math.sin(g)*p,n.moveTo(e-o,s-l),n.lineTo(e+o,s+l),n.moveTo(e+l,s-o),n.lineTo(e-l,s+o);break;case"line":o=r?r/2:Math.cos(g)*p,l=Math.sin(g)*p,n.moveTo(e-o,s-l),n.lineTo(e+o,s+l);break;case"dash":n.moveTo(e,s),n.lineTo(e+Math.cos(g)*p,s+Math.sin(g)*p);break}n.fill(),t.borderWidth>0&&n.stroke()}}function _isPointInArea(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function clipArea(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function unclipArea(n){n.restore()}function _steppedLineTo(n,t,e,s,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const a=(t.x+e.x)/2;n.lineTo(a,t.y),n.lineTo(a,e.y)}else r==="after"!=!!s?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function _bezierCurveTo(n,t,e,s){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function renderText(n,t,e,s,r,a={}){const o=isArray(t)?t:[t],l=a.strokeWidth>0&&a.strokeColor!=="";let c,h;for(n.save(),n.font=r.string,setRenderOpts(n,a),c=0;c<o.length;++c)h=o[c],l&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),isNullOrUndef(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(h,e,s,a.maxWidth)),n.fillText(h,e,s,a.maxWidth),decorateText(n,e,s,h,a),s+=r.lineHeight;n.restore()}function setRenderOpts(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),isNullOrUndef(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function decorateText(n,t,e,s,r){if(r.strikethrough||r.underline){const a=n.measureText(s),o=t-a.actualBoundingBoxLeft,l=t+a.actualBoundingBoxRight,c=e-a.actualBoundingBoxAscent,h=e+a.actualBoundingBoxDescent,u=r.strikethrough?(c+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(l,u),n.stroke()}}function addRoundedRectPath(n,t){const{x:e,y:s,w:r,h:a,radius:o}=t;n.arc(e+o.topLeft,s+o.topLeft,o.topLeft,-HALF_PI,PI,!0),n.lineTo(e,s+a-o.bottomLeft),n.arc(e+o.bottomLeft,s+a-o.bottomLeft,o.bottomLeft,PI,HALF_PI,!0),n.lineTo(e+r-o.bottomRight,s+a),n.arc(e+r-o.bottomRight,s+a-o.bottomRight,o.bottomRight,HALF_PI,0,!0),n.lineTo(e+r,s+o.topRight),n.arc(e+r-o.topRight,s+o.topRight,o.topRight,0,-HALF_PI,!0),n.lineTo(e+o.topLeft,s)}const LINE_HEIGHT=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),FONT_STYLE=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(n,t){const e=(""+n).match(LINE_HEIGHT);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const numberOrZero=n=>+n||0;function _readValueToProps(n,t){const e={},s=isObject(t),r=s?Object.keys(t):t,a=isObject(n)?s?o=>valueOrDefault(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=numberOrZero(a(o));return e}function toTRBL(n){return _readValueToProps(n,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(n){return _readValueToProps(n,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(n){const t=toTRBL(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function toFont(n,t){n=n||{},t=t||defaults.font;let e=valueOrDefault(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=valueOrDefault(n.style,t.style);s&&!(""+s).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+s+'"'),s="");const r={family:valueOrDefault(n.family,t.family),lineHeight:toLineHeight(valueOrDefault(n.lineHeight,t.lineHeight),e),size:e,style:s,weight:valueOrDefault(n.weight,t.weight),string:""};return r.string=toFontString(r),r}function resolve(n,t,e,s){let r=!0,a,o,l;for(a=0,o=n.length;a<o;++a)if(l=n[a],l!==void 0&&(t!==void 0&&typeof l=="function"&&(l=l(t),r=!1),e!==void 0&&isArray(l)&&(l=l[e%l.length],r=!1),l!==void 0))return s&&!r&&(s.cacheable=!1),l}function _addGrace(n,t,e){const{min:s,max:r}=n,a=toDimension(t,(r-s)/2),o=(l,c)=>e&&l===0?0:l+c;return{min:o(s,-Math.abs(a)),max:o(r,a)}}function createContext(n,t){return Object.assign(Object.create(n),t)}function _createResolver(n,t=[""],e=n,s,r=()=>n[0]){defined(s)||(s=_resolve("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:s,_getTarget:r,override:o=>_createResolver([o,...n],t,e,s)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return _cached(o,l,()=>_resolveWithPrefixes(l,t,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return getKeysFromAllScopes(o).includes(l)},ownKeys(o){return getKeysFromAllScopes(o)},set(o,l,c){const h=o._storage||(o._storage=r());return o[l]=h[l]=c,delete o._keys,!0}})}function _attachContext(n,t,e,s){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:_descriptors(n,s),setContext:a=>_attachContext(n,a,e,s),override:a=>_attachContext(n.override(a),t,e,s)};return new Proxy(r,{deleteProperty(a,o){return delete a[o],delete n[o],!0},get(a,o,l){return _cached(a,o,()=>_resolveWithContext(a,o,l))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(a,o,l){return n[o]=l,delete a[o],!0}})}function _descriptors(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:s,isScriptable:isFunction(e)?e:()=>e,isIndexable:isFunction(s)?s:()=>s}}const readKey=(n,t)=>n?n+_capitalize(t):t,needsSubResolver=(n,t)=>isObject(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function _cached(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const s=e();return n[t]=s,s}function _resolveWithContext(n,t,e){const{_proxy:s,_context:r,_subProxy:a,_descriptors:o}=n;let l=s[t];return isFunction(l)&&o.isScriptable(t)&&(l=_resolveScriptable(t,l,n,e)),isArray(l)&&l.length&&(l=_resolveArray(t,l,n,o.isIndexable)),needsSubResolver(t,l)&&(l=_attachContext(l,r,a&&a[t],o)),l}function _resolveScriptable(n,t,e,s){const{_proxy:r,_context:a,_subProxy:o,_stack:l}=e;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);return l.add(n),t=t(a,o||s),l.delete(n),needsSubResolver(n,t)&&(t=createSubResolver(r._scopes,r,n,t)),t}function _resolveArray(n,t,e,s){const{_proxy:r,_context:a,_subProxy:o,_descriptors:l}=e;if(defined(a.index)&&s(n))t=t[a.index%t.length];else if(isObject(t[0])){const c=t,h=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const d=createSubResolver(h,r,n,u);t.push(_attachContext(d,a,o&&o[n],l))}}return t}function resolveFallback(n,t,e){return isFunction(n)?n(t,e):n}const getScope=(n,t)=>n===!0?t:typeof n=="string"?resolveObjectKey(t,n):void 0;function addScopes(n,t,e,s,r){for(const a of t){const o=getScope(e,a);if(o){n.add(o);const l=resolveFallback(o._fallback,e,r);if(defined(l)&&l!==e&&l!==s)return l}else if(o===!1&&defined(s)&&e!==s)return null}return!1}function createSubResolver(n,t,e,s){const r=t._rootScopes,a=resolveFallback(t._fallback,e,s),o=[...n,...r],l=new Set;l.add(s);let c=addScopesFromKey(l,o,e,a||e,s);return c===null||defined(a)&&a!==e&&(c=addScopesFromKey(l,o,a,c,s),c===null)?!1:_createResolver(Array.from(l),[""],r,a,()=>subGetTarget(t,e,s))}function addScopesFromKey(n,t,e,s,r){for(;e;)e=addScopes(n,t,e,s,r);return e}function subGetTarget(n,t,e){const s=n._getTarget();t in s||(s[t]={});const r=s[t];return isArray(r)&&isObject(e)?e:r}function _resolveWithPrefixes(n,t,e,s){let r;for(const a of t)if(r=_resolve(readKey(a,n),e),defined(r))return needsSubResolver(n,r)?createSubResolver(e,s,n,r):r}function _resolve(n,t){for(const e of t){if(!e)continue;const s=e[n];if(defined(s))return s}}function getKeysFromAllScopes(n){let t=n._keys;return t||(t=n._keys=resolveKeysFromAllScopes(n._scopes)),t}function resolveKeysFromAllScopes(n){const t=new Set;for(const e of n)for(const s of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}function _parseObjectDataRadialScale(n,t,e,s){const{iScale:r}=n,{key:a="r"}=this._parsing,o=new Array(s);let l,c,h,u;for(l=0,c=s;l<c;++l)h=l+e,u=t[h],o[l]={r:r.parse(resolveObjectKey(u,a),h)};return o}const EPSILON=Number.EPSILON||1e-14,getPoint=(n,t)=>t<n.length&&!n[t].skip&&n[t],getValueAxis=n=>n==="x"?"y":"x";function splineCurve(n,t,e,s){const r=n.skip?t:n,a=t,o=e.skip?t:e,l=distanceBetweenPoints(a,r),c=distanceBetweenPoints(o,a);let h=l/(l+c),u=c/(l+c);h=isNaN(h)?0:h,u=isNaN(u)?0:u;const d=s*h,f=s*u;return{previous:{x:a.x-d*(o.x-r.x),y:a.y-d*(o.y-r.y)},next:{x:a.x+f*(o.x-r.x),y:a.y+f*(o.y-r.y)}}}function monotoneAdjust(n,t,e){const s=n.length;let r,a,o,l,c,h=getPoint(n,0);for(let u=0;u<s-1;++u)if(c=h,h=getPoint(n,u+1),!(!c||!h)){if(almostEquals(t[u],0,EPSILON)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],a=e[u+1]/t[u],l=Math.pow(r,2)+Math.pow(a,2),!(l<=9)&&(o=3/Math.sqrt(l),e[u]=r*o*t[u],e[u+1]=a*o*t[u])}}function monotoneCompute(n,t,e="x"){const s=getValueAxis(e),r=n.length;let a,o,l,c=getPoint(n,0);for(let h=0;h<r;++h){if(o=l,l=c,c=getPoint(n,h+1),!l)continue;const u=l[e],d=l[s];o&&(a=(u-o[e])/3,l[`cp1${e}`]=u-a,l[`cp1${s}`]=d-a*t[h]),c&&(a=(c[e]-u)/3,l[`cp2${e}`]=u+a,l[`cp2${s}`]=d+a*t[h])}}function splineCurveMonotone(n,t="x"){const e=getValueAxis(t),s=n.length,r=Array(s).fill(0),a=Array(s);let o,l,c,h=getPoint(n,0);for(o=0;o<s;++o)if(l=c,c=h,h=getPoint(n,o+1),!!c){if(h){const u=h[t]-c[t];r[o]=u!==0?(h[e]-c[e])/u:0}a[o]=l?h?sign(r[o-1])!==sign(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}monotoneAdjust(n,r,a),monotoneCompute(n,a,t)}function capControlPoint(n,t,e){return Math.max(Math.min(n,e),t)}function capBezierPoints(n,t){let e,s,r,a,o,l=_isPointInArea(n[0],t);for(e=0,s=n.length;e<s;++e)o=a,a=l,l=e<s-1&&_isPointInArea(n[e+1],t),a&&(r=n[e],o&&(r.cp1x=capControlPoint(r.cp1x,t.left,t.right),r.cp1y=capControlPoint(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=capControlPoint(r.cp2x,t.left,t.right),r.cp2y=capControlPoint(r.cp2y,t.top,t.bottom)))}function _updateBezierControlPoints(n,t,e,s,r){let a,o,l,c;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")splineCurveMonotone(n,r);else{let h=s?n[n.length-1]:n[0];for(a=0,o=n.length;a<o;++a)l=n[a],c=splineCurve(h,l,n[Math.min(a+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,h=l}t.capBezierPoints&&capBezierPoints(n,e)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function parseMaxStyle(n,t,e){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=n,s}const getComputedStyle$1=n=>window.getComputedStyle(n,null);function getStyle(n,t){return getComputedStyle$1(n).getPropertyValue(t)}const positions=["top","right","bottom","left"];function getPositionedStyle(n,t,e){const s={};e=e?"-"+e:"";for(let r=0;r<4;r++){const a=positions[r];s[a]=parseFloat(n[t+"-"+a+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const useOffsetPos=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function getCanvasPosition(n,t){const e=n.touches,s=e&&e.length?e[0]:n,{offsetX:r,offsetY:a}=s;let o=!1,l,c;if(useOffsetPos(r,a,n.target))l=r,c=a;else{const h=t.getBoundingClientRect();l=s.clientX-h.left,c=s.clientY-h.top,o=!0}return{x:l,y:c,box:o}}function getRelativePosition(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:s}=t,r=getComputedStyle$1(e),a=r.boxSizing==="border-box",o=getPositionedStyle(r,"padding"),l=getPositionedStyle(r,"border","width"),{x:c,y:h,box:u}=getCanvasPosition(n,e),d=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:p,height:g}=t;return a&&(p-=o.width+l.width,g-=o.height+l.height),{x:Math.round((c-d)/p*e.width/s),y:Math.round((h-f)/g*e.height/s)}}function getContainerSize(n,t,e){let s,r;if(t===void 0||e===void 0){const a=_getParentNode(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{const o=a.getBoundingClientRect(),l=getComputedStyle$1(a),c=getPositionedStyle(l,"border","width"),h=getPositionedStyle(l,"padding");t=o.width-h.width-c.width,e=o.height-h.height-c.height,s=parseMaxStyle(l.maxWidth,a,"clientWidth"),r=parseMaxStyle(l.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:s||INFINITY,maxHeight:r||INFINITY}}const round1=n=>Math.round(n*10)/10;function getMaximumSize(n,t,e,s){const r=getComputedStyle$1(n),a=getPositionedStyle(r,"margin"),o=parseMaxStyle(r.maxWidth,n,"clientWidth")||INFINITY,l=parseMaxStyle(r.maxHeight,n,"clientHeight")||INFINITY,c=getContainerSize(n,t,e);let{width:h,height:u}=c;if(r.boxSizing==="content-box"){const d=getPositionedStyle(r,"border","width"),f=getPositionedStyle(r,"padding");h-=f.width+d.width,u-=f.height+d.height}return h=Math.max(0,h-a.width),u=Math.max(0,s?Math.floor(h/s):u-a.height),h=round1(Math.min(h,o,c.maxWidth)),u=round1(Math.min(u,l,c.maxHeight)),h&&!u&&(u=round1(h/2)),{width:h,height:u}}function retinaScale(n,t,e){const s=t||1,r=Math.floor(n.height*s),a=Math.floor(n.width*s);n.height=r/s,n.width=a/s;const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==r||o.width!==a?(n.currentDevicePixelRatio=s,o.height=r,o.width=a,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const supportsEventListenerOptions=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function readUsedSize(n,t){const e=getStyle(n,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function _pointInLine(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function _steppedInterpolation(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:s==="middle"?e<.5?n.y:t.y:s==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function _bezierInterpolation(n,t,e,s){const r={x:n.cp2x,y:n.cp2y},a={x:t.cp1x,y:t.cp1y},o=_pointInLine(n,r,e),l=_pointInLine(r,a,e),c=_pointInLine(a,t,e),h=_pointInLine(o,l,e),u=_pointInLine(l,c,e);return _pointInLine(h,u,e)}const intlCache=new Map;function getNumberFormat(n,t){t=t||{};const e=n+JSON.stringify(t);let s=intlCache.get(e);return s||(s=new Intl.NumberFormat(n,t),intlCache.set(e,s)),s}function formatNumber(n,t,e){return getNumberFormat(t,e).format(n)}const getRightToLeftAdapter=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},getLeftToRightAdapter=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function getRtlAdapter(n,t,e){return n?getRightToLeftAdapter(t,e):getLeftToRightAdapter()}function overrideTextDirection(n,t){let e,s;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=s)}function restoreTextDirection(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function propertyFn(n){return n==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(t,e)=>t-e,normalize:t=>t}}function normalizeSegment({start:n,end:t,count:e,loop:s,style:r}){return{start:n%e,end:t%e,loop:s&&(t-n+1)%e===0,style:r}}function getSegment(n,t,e){const{property:s,start:r,end:a}=e,{between:o,normalize:l}=propertyFn(s),c=t.length;let{start:h,end:u,loop:d}=n,f,p;if(d){for(h+=c,u+=c,f=0,p=c;f<p&&o(l(t[h%c][s]),r,a);++f)h--,u--;h%=c,u%=c}return u<h&&(u+=c),{start:h,end:u,loop:d,style:n.style}}function _boundSegment(n,t,e){if(!e)return[n];const{property:s,start:r,end:a}=e,o=t.length,{compare:l,between:c,normalize:h}=propertyFn(s),{start:u,end:d,loop:f,style:p}=getSegment(n,t,e),g=[];let b=!1,m=null,v,y,S;const C=()=>c(r,S,v)&&l(r,S)!==0,x=()=>l(a,v)===0||c(a,S,v),k=()=>b||C(),w=()=>!b||x();for(let E=u,P=u;E<=d;++E)y=t[E%o],!y.skip&&(v=h(y[s]),v!==S&&(b=c(v,r,a),m===null&&k()&&(m=l(v,r)===0?E:P),m!==null&&w()&&(g.push(normalizeSegment({start:m,end:E,loop:f,count:o,style:p})),m=null),P=E,S=v));return m!==null&&g.push(normalizeSegment({start:m,end:d,loop:f,count:o,style:p})),g}function _boundSegments(n,t){const e=[],s=n.segments;for(let r=0;r<s.length;r++){const a=_boundSegment(s[r],n.points,t);a.length&&e.push(...a)}return e}function findStartAndEnd(n,t,e,s){let r=0,a=t-1;if(e&&!s)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(a+=r);a>r&&n[a%t].skip;)a--;return a%=t,{start:r,end:a}}function solidSegments(n,t,e,s){const r=n.length,a=[];let o=t,l=n[t],c;for(c=t+1;c<=e;++c){const h=n[c%r];h.skip||h.stop?l.skip||(s=!1,a.push({start:t%r,end:(c-1)%r,loop:s}),t=o=h.stop?c:null):(o=c,l.skip&&(t=c)),l=h}return o!==null&&a.push({start:t%r,end:o%r,loop:s}),a}function _computeSegments(n,t){const e=n.points,s=n.options.spanGaps,r=e.length;if(!r)return[];const a=!!n._loop,{start:o,end:l}=findStartAndEnd(e,r,a,s);if(s===!0)return splitByStyles(n,[{start:o,end:l,loop:a}],e,t);const c=l<o?l+r:l,h=!!n._fullLoop&&o===0&&l===r-1;return splitByStyles(n,solidSegments(e,o,c,h),e,t)}function splitByStyles(n,t,e,s){return!s||!s.setContext||!e?t:doSplitByStyles(n,t,e,s)}function doSplitByStyles(n,t,e,s){const r=n._chart.getContext(),a=readStyle(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,c=e.length,h=[];let u=a,d=t[0].start,f=d;function p(g,b,m,v){const y=l?-1:1;if(g!==b){for(g+=c;e[g%c].skip;)g-=y;for(;e[b%c].skip;)b+=y;g%c!==b%c&&(h.push({start:g%c,end:b%c,loop:m,style:v}),u=v,d=b%c)}}for(const g of t){d=l?d:g.start;let b=e[d%c],m;for(f=d+1;f<=g.end;f++){const v=e[f%c];m=readStyle(s.setContext(createContext(r,{type:"segment",p0:b,p1:v,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),styleChanged(m,u)&&p(d,f-1,g.loop,u),b=v,u=m}d<f-1&&p(d,f-1,g.loop,u)}return h}function readStyle(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function styleChanged(n,t){return t&&JSON.stringify(n)!==JSON.stringify(t)}/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,r){const a=e.listeners[r],o=e.duration;a.forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const a=s.items;let o=a.length-1,l=!1,c;for(;o>=0;--o)c=a[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(a[o]=a[a.length-1],a.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),a.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const s=color(n||transparent),r=s.valid&&color(t||transparent);return r&&r.valid?r.mix(s,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Animation{constructor(t,e,s,r){const a=e[s];r=resolve([t.to,r,a,t.from]);const o=resolve([t.from,a,r]);this._active=!0,this._fn=t.fn||interpolators[t.type||typeof o],this._easing=effects[t.easing]||effects.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const r=this._target[this._prop],a=s-this._start,o=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=resolve([t.to,e,r,t.from]),this._from=resolve([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,r=this._prop,a=this._from,o=this._loop,l=this._to;let c;if(this._active=a!==l&&(o||e<s),!this._active){this._target[r]=l,this._notify(!0);return}if(e<0){this._target[r]=a;return}c=e/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(a,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][e]()}}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const animationOptions=Object.keys(defaults.animation);defaults.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"});defaults.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}});defaults.describe("animations",{_fallback:"animation"});defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}});class Animations{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!isObject(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!isObject(r))return;const a={};for(const o of animationOptions)a[o]=r[o];(isArray(r.properties)&&r.properties||[s]).forEach(o=>{(o===s||!e.has(o))&&e.set(o,a)})})}_animateOptions(t,e){const s=e.options,r=resolveTargetOptions(t,s);if(!r)return[];const a=this._createAnimations(r,s);return s.$shared&&awaitAll(t.options.$animations,s).then(()=>{t.options=s},()=>{}),a}_createAnimations(t,e){const s=this._properties,r=[],a=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){r.push(...this._animateOptions(t,e));continue}const u=e[h];let d=a[h];const f=s.get(h);if(d)if(f&&d.active()){d.update(f,u,l);continue}else d.cancel();if(!f||!f.duration){t[h]=u;continue}a[h]=d=new Animation(f,t,h,u),r.push(d)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return animator.add(this._chart,s),!0}}function awaitAll(n,t){const e=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const a=n[s[r]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function resolveTargetOptions(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function scaleClip(n,t){const e=n&&n.options||{},s=e.reverse,r=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:s?a:r,end:s?r:a}}function defaultClip(n,t,e){if(e===!1)return!1;const s=scaleClip(n,e),r=scaleClip(t,e);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function toClip(n){let t,e,s,r;return isObject(n)?(t=n.top,e=n.right,s=n.bottom,r=n.left):t=e=s=r=n,{top:t,right:e,bottom:s,left:r,disabled:n===!1}}function getSortedDatasetIndices(n,t){const e=[],s=n._getSortedDatasetMetas(t);let r,a;for(r=0,a=s.length;r<a;++r)e.push(s[r].index);return e}function applyStack(n,t,e,s={}){const r=n.keys,a=s.mode==="single";let o,l,c,h;if(t!==null){for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===e){if(s.all)continue;break}h=n.values[c],isNumberFinite(h)&&(a||t===0||sign(t)===sign(h))&&(t+=h)}return t}}function convertObjectDataToArray(n){const t=Object.keys(n),e=new Array(t.length);let s,r,a;for(s=0,r=t.length;s<r;++s)a=t[s],e[s]={x:a,y:n[a]};return e}function isStacked(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function getStackKey(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function getUserBounds(n){const{min:t,max:e,minDefined:s,maxDefined:r}=n.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function getOrCreateStack(n,t,e){const s=n[t]||(n[t]={});return s[e]||(s[e]={})}function getLastIndexInStack(n,t,e,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const a=n[r.index];if(e&&a>0||!e&&a<0)return r.index}return null}function updateStacks(n,t){const{chart:e,_cachedMeta:s}=n,r=e._stacks||(e._stacks={}),{iScale:a,vScale:o,index:l}=s,c=a.axis,h=o.axis,u=getStackKey(a,o,s),d=t.length;let f;for(let p=0;p<d;++p){const g=t[p],{[c]:b,[h]:m}=g,v=g._stacks||(g._stacks={});f=v[h]=getOrCreateStack(r,u,b),f[l]=m,f._top=getLastIndexInStack(f,o,!0,s.type),f._bottom=getLastIndexInStack(f,o,!1,s.type)}}function getFirstScaleId(n,t){const e=n.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function createDatasetContext(n,t){return createContext(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function createDataContext(n,t,e){return createContext(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function clearStacks(n,t){const e=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){t=t||n._parsed;for(const r of t){const a=r._stacks;if(!a||a[s]===void 0||a[s][e]===void 0)return;delete a[s][e]}}}const isDirectUpdateMode=n=>n==="reset"||n==="none",cloneIfNotShared=(n,t)=>t?n:Object.assign({},n),createStack=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:getSortedDatasetIndices(e,!0),values:null};class DatasetController{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=isStacked(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&clearStacks(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),r=(d,f,p,g)=>d==="x"?f:d==="r"?g:p,a=e.xAxisID=valueOrDefault(s.xAxisID,getFirstScaleId(t,"x")),o=e.yAxisID=valueOrDefault(s.yAxisID,getFirstScaleId(t,"y")),l=e.rAxisID=valueOrDefault(s.rAxisID,getFirstScaleId(t,"r")),c=e.indexAxis,h=e.iAxisID=r(c,a,o,l),u=e.vAxisID=r(c,o,a,l);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(l),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),t._stacked&&clearStacks(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(isObject(e))this._data=convertObjectDataToArray(e);else if(s!==e){if(s){unlistenArrayEvents(s,this);const r=this._cachedMeta;clearStacks(r),r._parsed=[]}e&&Object.isExtensible(e)&&listenArrayEvents(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const a=e._stacked;e._stacked=isStacked(e.vScale,e),e.stack!==s.stack&&(r=!0,clearStacks(e),e.stack=s.stack),this._resyncElements(t),(r||a!==e._stacked)&&updateStacks(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:r}=this,{iScale:a,_stacked:o}=s,l=a.axis;let c=t===0&&e===r.length?!0:s._sorted,h=t>0&&s._parsed[t-1],u,d,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{isArray(r[t])?f=this.parseArrayData(s,r,t,e):isObject(r[t])?f=this.parseObjectData(s,r,t,e):f=this.parsePrimitiveData(s,r,t,e);const p=()=>d[l]===null||h&&d[l]<h[l];for(u=0;u<e;++u)s._parsed[u+t]=d=f[u],c&&(p()&&(c=!1),h=d);s._sorted=c}o&&updateStacks(this,f)}parsePrimitiveData(t,e,s,r){const{iScale:a,vScale:o}=t,l=a.axis,c=o.axis,h=a.getLabels(),u=a===o,d=new Array(r);let f,p,g;for(f=0,p=r;f<p;++f)g=f+s,d[f]={[l]:u||a.parse(h[g],g),[c]:o.parse(e[g],g)};return d}parseArrayData(t,e,s,r){const{xScale:a,yScale:o}=t,l=new Array(r);let c,h,u,d;for(c=0,h=r;c<h;++c)u=c+s,d=e[u],l[c]={x:a.parse(d[0],u),y:o.parse(d[1],u)};return l}parseObjectData(t,e,s,r){const{xScale:a,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(r);let u,d,f,p;for(u=0,d=r;u<d;++u)f=u+s,p=e[f],h[u]={x:a.parse(resolveObjectKey(p,l),f),y:o.parse(resolveObjectKey(p,c),f)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const r=this.chart,a=this._cachedMeta,o=e[t.axis],l={keys:getSortedDatasetIndices(r,!0),values:e._stacks[t.axis]};return applyStack(l,o,a.index,{mode:s})}updateRangeFromParsed(t,e,s,r){const a=s[e.axis];let o=a===null?NaN:a;const l=r&&s._stacks[e.axis];r&&l&&(r.values=l,o=applyStack(r,a,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const s=this._cachedMeta,r=s._parsed,a=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=createStack(e,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=getUserBounds(l);let f,p;function g(){p=r[f];const b=p[l.axis];return!isNumberFinite(p[t.axis])||u>b||d<b}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(h,t,p,c),a));++f);if(a){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(h,t,p,c);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let r,a,o;for(r=0,a=e.length;r<a;++r)o=e[r][t.axis],isNumberFinite(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,r=e.vScale,a=this.getParsed(t);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=toClip(valueOrDefault(this.options.clip,defaultClip(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,r=s.data||[],a=e.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,h=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,a,l,c),u=l;u<l+c;++u){const d=r[u];d.hidden||(d.active&&h?o.push(d):d.draw(t,a))}for(u=0;u<o.length;++u)o[u].draw(t,a)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const r=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];a=o.$context||(o.$context=createDataContext(this.getContext(),t,o)),a.parsed=this.getParsed(t),a.raw=r.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=s,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const r=e==="active",a=this._cachedDataOpts,o=t+"-"+e,l=a[o],c=this.enableOptionSharing&&defined(s);if(l)return cloneIfNotShared(l,c);const h=this.chart.config,u=h.datasetElementScopeKeys(this._type,t),d=r?[`${t}Hover`,"hover",t,""]:[t,""],f=h.getOptionScopes(this.getDataset(),u),p=Object.keys(defaults.elements[t]),g=()=>this.getContext(s,r),b=h.resolveNamedOptions(f,p,g,d);return b.$shared&&(b.$shared=c,a[o]=Object.freeze(cloneIfNotShared(b,c))),b}_resolveAnimations(t,e,s){const r=this.chart,a=this._cachedDataOpts,o=`animation-${e}`,l=a[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,e),f=u.getOptionScopes(this.getDataset(),d);c=u.createResolver(f,this.getContext(t,s,e))}const h=new Animations(r,c&&c.animations);return c&&c._cacheable&&(a[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||isDirectUpdateMode(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),r=this._sharedOptions,a=this.getSharedOptions(s),o=this.includeOptions(e,a)||a!==r;return this.updateSharedOptions(a,e,s),{sharedOptions:a,includeOptions:o}}updateElement(t,e,s,r){isDirectUpdateMode(r)?Object.assign(t,s):this._resolveAnimations(e,r).update(t,s)}updateSharedOptions(t,e,s){t&&!isDirectUpdateMode(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,r){t.active=r;const a=this.getStyle(e,r);this._resolveAnimations(e,s,r).update(t,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];const r=s.length,a=e.length,o=Math.min(a,r);o&&this.parse(0,o),a>r?this._insertElements(r,a-r,t):a<r&&this._removeElements(a,r-a)}_insertElements(t,e,s=!0){const r=this._cachedMeta,a=r.data,o=t+e;let l;const c=h=>{for(h.length+=e,l=h.length-1;l>=o;l--)h[l]=h[l-e]};for(c(a),l=t;l<o;++l)a[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,e),s&&this.updateElements(a,t,e,"reset")}updateElements(t,e,s,r){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,e);s._stacked&&clearStacks(s,r)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,r]=t;this[e](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}DatasetController.defaults={};DatasetController.prototype.datasetElementType=null;DatasetController.prototype.dataElementType=null;function getAllScaleValues(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let s=[];for(let r=0,a=e.length;r<a;r++)s=s.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=_arrayUnique(s.sort((r,a)=>r-a))}return n._cache.$bar}function computeMinSampleSize(n){const t=n.iScale,e=getAllScaleValues(t,n.type);let s=t._length,r,a,o,l;const c=()=>{o===32767||o===-32768||(defined(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,a=e.length;r<a;++r)o=t.getPixelForValue(e[r]),c();for(l=void 0,r=0,a=t.ticks.length;r<a;++r)o=t.getPixelForTick(r),c();return s}function computeFitCategoryTraits(n,t,e,s){const r=e.barThickness;let a,o;return isNullOrUndef(r)?(a=t.min*e.categoryPercentage,o=e.barPercentage):(a=r*s,o=1),{chunk:a/s,ratio:o,start:t.pixels[n]-a/2}}function computeFlexCategoryTraits(n,t,e,s){const r=t.pixels,a=r[n];let o=n>0?r[n-1]:null,l=n<r.length-1?r[n+1]:null;const c=e.categoryPercentage;o===null&&(o=a-(l===null?t.end-t.start:l-a)),l===null&&(l=a+a-o);const h=a-(a-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:e.barPercentage,start:h}}function parseFloatBar(n,t,e,s){const r=e.parse(n[0],s),a=e.parse(n[1],s),o=Math.min(r,a),l=Math.max(r,a);let c=o,h=l;Math.abs(o)>Math.abs(l)&&(c=l,h=o),t[e.axis]=h,t._custom={barStart:c,barEnd:h,start:r,end:a,min:o,max:l}}function parseValue(n,t,e,s){return isArray(n)?parseFloatBar(n,t,e,s):t[e.axis]=e.parse(n,s),t}function parseArrayOrPrimitive(n,t,e,s){const r=n.iScale,a=n.vScale,o=r.getLabels(),l=r===a,c=[];let h,u,d,f;for(h=e,u=e+s;h<u;++h)f=t[h],d={},d[r.axis]=l||r.parse(o[h],h),c.push(parseValue(f,d,a,h));return c}function isFloatBar(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function barSign(n,t,e){return n!==0?sign(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function borderProps(n){let t,e,s,r,a;return n.horizontal?(t=n.base>n.x,e="left",s="right"):(t=n.base<n.y,e="bottom",s="top"),t?(r="end",a="start"):(r="start",a="end"),{start:e,end:s,reverse:t,top:r,bottom:a}}function setBorderSkipped(n,t,e,s){let r=t.borderSkipped;const a={};if(!r){n.borderSkipped=a;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:h,bottom:u}=borderProps(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===s?r=h:(e._bottom||0)===s?r=u:(a[parseEdge(u,o,l,c)]=!0,r=h)),a[parseEdge(r,o,l,c)]=!0,n.borderSkipped=a}function parseEdge(n,t,e,s){return s?(n=swap(n,t,e),n=startEnd(n,e,t)):n=startEnd(n,t,e),n}function swap(n,t,e){return n===t?e:n===e?t:n}function startEnd(n,t,e){return n==="start"?t:n==="end"?e:n}function setInflateAmount(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class BarController extends DatasetController{parsePrimitiveData(t,e,s,r){return parseArrayOrPrimitive(t,e,s,r)}parseArrayData(t,e,s,r){return parseArrayOrPrimitive(t,e,s,r)}parseObjectData(t,e,s,r){const{iScale:a,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=a.axis==="x"?l:c,u=o.axis==="x"?l:c,d=[];let f,p,g,b;for(f=s,p=s+r;f<p;++f)b=e[f],g={},g[a.axis]=a.parse(resolveObjectKey(b,h),f),d.push(parseValue(resolveObjectKey(b,u),g,o,f));return d}updateRangeFromParsed(t,e,s,r){super.updateRangeFromParsed(t,e,s,r);const a=s._custom;a&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:r}=e,a=this.getParsed(t),o=a._custom,l=isFloatBar(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+s.getLabelForValue(a[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,r){const a=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),h=l.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(e,r);for(let p=e;p<e+s;p++){const g=this.getParsed(p),b=a||isNullOrUndef(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),m=this._calculateBarIndexPixels(p,u),v=(g._stacks||{})[l.axis],y={horizontal:h,base:b.base,enableBorderRadius:!v||isFloatBar(g._custom)||o===v._top||o===v._bottom,x:h?b.head:m.center,y:h?m.center:b.head,height:h?m.size:Math.abs(b.size),width:h?Math.abs(b.size):m.size};f&&(y.options=d||this.resolveDataElementOptions(p,t[p].active?"active":r));const S=y.options||t[p].options;setBorderSkipped(y,S,v,o),setInflateAmount(y,S,u.ratio),this.updateElement(t[p],p,y,r)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),a=s.options.stacked,o=[],l=c=>{const h=c.controller.getParsed(e),u=h&&h[c.vScale.axis];if(isNullOrUndef(u)||isNaN(u))return!0};for(const c of r)if(!(e!==void 0&&l(c))&&((a===!1||o.indexOf(c.stack)===-1||a===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,s){const r=this._getStacks(t,s),a=e!==void 0?r.indexOf(e):-1;return a===-1?r.length-1:a}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,r=[];let a,o;for(a=0,o=e.data.length;a<o;++a)r.push(s.getPixelForValue(this.getParsed(a)[s.axis],a));const l=t.barThickness;return{min:l||computeMinSampleSize(e),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s},options:{base:r,minBarLength:a}}=this,o=r||0,l=this.getParsed(t),c=l._custom,h=isFloatBar(c);let u=l[e.axis],d=0,f=s?this.applyStack(e,l,s):u,p,g;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&sign(u)!==sign(c.barEnd)&&(d=0),d+=u);const b=!isNullOrUndef(r)&&!h?r:d;let m=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?p=e.getPixelForValue(d+f):p=m,g=p-m,Math.abs(g)<a){g=barSign(g,e,o)*a,u===o&&(m-=g/2);const v=e.getPixelForDecimal(0),y=e.getPixelForDecimal(1),S=Math.min(v,y),C=Math.max(v,y);m=Math.max(Math.min(m,C),S),p=m+g}if(m===e.getPixelForValue(o)){const v=sign(g)*e.getLineWidthForValue(o)/2;m+=v,g-=v}return{size:g,base:m,head:p,center:p+g/2}}_calculateBarIndexPixels(t,e){const s=e.scale,r=this.options,a=r.skipNull,o=valueOrDefault(r.maxBarThickness,1/0);let l,c;if(e.grouped){const h=a?this._getStackCount(t):e.stackCount,u=r.barThickness==="flex"?computeFlexCategoryTraits(t,e,r,h):computeFitCategoryTraits(t,e,r,h),d=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0);l=u.start+u.chunk*d+u.chunk/2,c=Math.min(o,u.chunk*u.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,e.min*e.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,r=s.length;let a=0;for(;a<r;++a)this.getParsed(a)[e.axis]!==null&&s[a].draw(this._ctx)}}BarController.id="bar";BarController.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};BarController.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,r){const a=super.parsePrimitiveData(t,e,s,r);for(let o=0;o<a.length;o++)a[o]._custom=this.resolveDataElementOptions(o+s).radius;return a}parseArrayData(t,e,s,r){const a=super.parseArrayData(t,e,s,r);for(let o=0;o<a.length;o++){const l=e[s+o];a[o]._custom=valueOrDefault(l[2],this.resolveDataElementOptions(o+s).radius)}return a}parseObjectData(t,e,s,r){const a=super.parseObjectData(t,e,s,r);for(let o=0;o<a.length;o++){const l=e[s+o];a[o]._custom=valueOrDefault(l&&l.r&&+l.r,this.resolveDataElementOptions(o+s).radius)}return a}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:s,yScale:r}=e,a=this.getParsed(t),o=s.getLabelForValue(a.x),l=r.getLabelForValue(a.y),c=a._custom;return{label:e.label,value:"("+o+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,r){const a=r==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(e,r),u=o.axis,d=l.axis;for(let f=e;f<e+s;f++){const p=t[f],g=!a&&this.getParsed(f),b={},m=b[u]=a?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),v=b[d]=a?l.getBasePixel():l.getPixelForValue(g[d]);b.skip=isNaN(m)||isNaN(v),h&&(b.options=c||this.resolveDataElementOptions(f,p.active?"active":r),a&&(b.options.radius=0)),this.updateElement(p,f,b,r)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return e!=="active"&&(r.radius=0),r.radius+=valueOrDefault(s&&s._custom,a),r}}BubbleController.id="bubble";BubbleController.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function getRatioAndOffset(n,t,e){let s=1,r=1,a=0,o=0;if(t<TAU){const l=n,c=l+t,h=Math.cos(l),u=Math.sin(l),d=Math.cos(c),f=Math.sin(c),p=(S,C,x)=>_angleBetween(S,l,c,!0)?1:Math.max(C,C*e,x,x*e),g=(S,C,x)=>_angleBetween(S,l,c,!0)?-1:Math.min(C,C*e,x,x*e),b=p(0,h,d),m=p(HALF_PI,u,f),v=g(PI,h,d),y=g(PI+HALF_PI,u,f);s=(b-v)/2,r=(m-y)/2,a=-(b+v)/2,o=-(m+y)/2}return{ratioX:s,ratioY:r,offsetX:a,offsetY:o}}class DoughnutController extends DatasetController{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let a=c=>+s[c];if(isObject(s[t])){const{key:c="value"}=this._parsing;a=h=>+resolveObjectKey(s[h],c)}let o,l;for(o=t,l=t+e;o<l;++o)r._parsed[o]=a(o)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let t=TAU,e=-TAU;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const r=this.chart.getDatasetMeta(s).controller,a=r._getRotation(),o=r._getCircumference();t=Math.min(t,a),e=Math.max(e,a+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,r=this._cachedMeta,a=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(toPercentage(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:b}=getRatioAndOffset(d,u,c),m=(s.width-o)/f,v=(s.height-o)/p,y=Math.max(Math.min(m,v)/2,0),S=toDimension(this.options.radius,y),C=Math.max(S*c,0),x=(S-C)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=b*S,r.total=this.calculateTotal(),this.outerRadius=S-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(a,0,a.length,t)}_circumference(t,e){const s=this.options,r=this._cachedMeta,a=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*a/TAU)}updateElements(t,e,s,r){const a=r==="reset",o=this.chart,l=o.chartArea,h=o.options.animation,u=(l.left+l.right)/2,d=(l.top+l.bottom)/2,f=a&&h.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:b,includeOptions:m}=this._getSharedOptions(e,r);let v=this._getRotation(),y;for(y=0;y<e;++y)v+=this._circumference(y,a);for(y=e;y<e+s;++y){const S=this._circumference(y,a),C=t[y],x={x:u+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+S,circumference:S,outerRadius:g,innerRadius:p};m&&(x.options=b||this.resolveDataElementOptions(y,C.active?"active":r)),v+=S,this.updateElement(C,y,x,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,r;for(r=0;r<e.length;r++){const a=t._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?TAU*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,r=s.data.labels||[],a=formatNumber(e._parsed[t],s.options.locale);return{label:r[t]||"",value:a}}getMaxBorderWidth(t){let e=0;const s=this.chart;let r,a,o,l,c;if(!t){for(r=0,a=s.data.datasets.length;r<a;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,a=t.length;r<a;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,r=t.length;s<r;++s){const a=this.resolveDataElementOptions(s);e=Math.max(e,a.offset||0,a.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(valueOrDefault(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}DoughnutController.id="doughnut";DoughnutController.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};DoughnutController.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"};DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:e}}=n.legend.options;return t.labels.map((s,r)=>{const o=n.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:e,hidden:!n.getDataVisibility(r),index:r}})}return[]}},onClick(n,t,e){e.chart.toggleDataVisibility(t.index),e.chart.update()}},tooltip:{callbacks:{title(){return""},label(n){let t=n.label;const e=": "+n.formattedValue;return isArray(t)?(t=t.slice(),t[0]+=e):t+=e,t}}}}};class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:r=[],_dataset:a}=e,o=this.chart._animationsDisabled;let{start:l,count:c}=_getStartAndCountOfVisiblePoints(e,r,o);this._drawStart=l,this._drawCount=c,_scaleRangesChanged(e)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=r;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:h},t),this.updateElements(r,l,c,t)}updateElements(t,e,s,r){const a=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,r),f=o.axis,p=l.axis,{spanGaps:g,segment:b}=this.options,m=isNumber(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||a||r==="none";let y=e>0&&this.getParsed(e-1);for(let S=e;S<e+s;++S){const C=t[S],x=this.getParsed(S),k=v?C:{},w=isNullOrUndef(x[p]),E=k[f]=o.getPixelForValue(x[f],S),P=k[p]=a||w?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,x,c):x[p],S);k.skip=isNaN(E)||isNaN(P)||w,k.stop=S>0&&Math.abs(x[f]-y[f])>m,b&&(k.parsed=x,k.raw=h.data[S]),d&&(k.options=u||this.resolveDataElementOptions(S,C.active?"active":r)),v||this.updateElement(C,S,k,r),y=x}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const a=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,a,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}LineController.id="line";LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class PolarAreaController extends DatasetController{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,r=s.data.labels||[],a=formatNumber(e._parsed[t].r,s.options.locale);return{label:r[t]||"",value:a}}parseObjectData(t,e,s,r){return _parseObjectDataRadialScale.bind(this)(t,e,s,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,r)=>{const a=this.getParsed(r).r;!isNaN(a)&&this.chart.getDataVisibility(r)&&(a<e.min&&(e.min=a),a>e.max&&(e.max=a))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),a=Math.max(r/2,0),o=Math.max(s.cutoutPercentage?a/100*s.cutoutPercentage:1,0),l=(a-o)/t.getVisibleDatasetCount();this.outerRadius=a-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,e,s,r){const a=r==="reset",o=this.chart,c=o.options.animation,h=this._cachedMeta.rScale,u=h.xCenter,d=h.yCenter,f=h.getIndexAngle(0)-.5*PI;let p=f,g;const b=360/this.countVisibleElements();for(g=0;g<e;++g)p+=this._computeAngle(g,r,b);for(g=e;g<e+s;g++){const m=t[g];let v=p,y=p+this._computeAngle(g,r,b),S=o.getDataVisibility(g)?h.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=y,a&&(c.animateScale&&(S=0),c.animateRotate&&(v=y=f));const C={x:u,y:d,innerRadius:0,outerRadius:S,startAngle:v,endAngle:y,options:this.resolveDataElementOptions(g,m.active?"active":r)};this.updateElement(m,g,C,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?toRadians(this.resolveDataElementOptions(t,e).angle||s):0}}PolarAreaController.id="polarArea";PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:e}}=n.legend.options;return t.labels.map((s,r)=>{const o=n.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:e,hidden:!n.getDataVisibility(r),index:r}})}return[]}},onClick(n,t,e){e.chart.toggleDataVisibility(t.index),e.chart.update()}},tooltip:{callbacks:{title(){return""},label(n){return n.chart.data.labels[n.dataIndex]+": "+n.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class PieController extends DoughnutController{}PieController.id="pie";PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class RadarController extends DatasetController{getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,r){return _parseObjectDataRadialScale.bind(this)(t,e,s,r)}update(t){const e=this._cachedMeta,s=e.dataset,r=e.data||[],a=e.iScale.getLabels();if(s.points=r,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:a.length===r.length,options:o};this.updateElement(s,void 0,l,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,s,r){const a=this._cachedMeta.rScale,o=r==="reset";for(let l=e;l<e+s;l++){const c=t[l],h=this.resolveDataElementOptions(l,c.active?"active":r),u=a.getPointPositionForValue(l,this.getParsed(l).r),d=o?a.xCenter:u.x,f=o?a.yCenter:u.y,p={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:h};this.updateElement(c,l,p,r)}}}RadarController.id="radar";RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};let Element$1=class{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const r={};return t.forEach(a=>{r[a]=s[a]&&s[a].active()?s[a]._to:this[a]}),r}};Element$1.defaults={};Element$1.defaultRoutes=void 0;const formatters={values(n){return isArray(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const s=this.chart.options.locale;let r,a=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(r="scientific"),a=calculateDelta(n,e)}const o=log10(Math.abs(a)),l=Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),formatNumber(n,s,c)},logarithmic(n,t,e){if(n===0)return"0";const s=n/Math.pow(10,Math.floor(log10(n)));return s===1||s===2||s===5?formatters.numeric.call(this,n,t,e):""}};function calculateDelta(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Ticks={formatters};defaults.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});defaults.route("scale.ticks","color","","color");defaults.route("scale.grid","color","","borderColor");defaults.route("scale.grid","borderColor","","borderColor");defaults.route("scale.title","color","","color");defaults.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"});defaults.describe("scales",{_fallback:"scale"});defaults.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"});function autoSkip(n,t){const e=n.options.ticks,s=e.maxTicksLimit||determineMaxTicks(n),r=e.major.enabled?getMajorIndices(t):[],a=r.length,o=r[0],l=r[a-1],c=[];if(a>s)return skipMajors(t,c,r,a/s),c;const h=calculateSpacing(r,t,s);if(a>0){let u,d;const f=a>1?Math.round((l-o)/(a-1)):null;for(skip(t,c,h,isNullOrUndef(f)?0:o-f,o),u=0,d=a-1;u<d;u++)skip(t,c,h,r[u],r[u+1]);return skip(t,c,h,l,isNullOrUndef(f)?t.length:l+f),c}return skip(t,c,h),c}function determineMaxTicks(n){const t=n.options.offset,e=n._tickSize(),s=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(s,r))}function calculateSpacing(n,t,e){const s=getEvenSpacing(n),r=t.length/e;if(!s)return Math.max(r,1);const a=_factorize(s);for(let o=0,l=a.length-1;o<l;o++){const c=a[o];if(c>r)return c}return Math.max(r,1)}function getMajorIndices(n){const t=[];let e,s;for(e=0,s=n.length;e<s;e++)n[e].major&&t.push(e);return t}function skipMajors(n,t,e,s){let r=0,a=e[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===a&&(t.push(n[o]),r++,a=e[r*s])}function skip(n,t,e,s,r){const a=valueOrDefault(s,0),o=Math.min(valueOrDefault(r,n.length),n.length);let l=0,c,h,u;for(e=Math.ceil(e),r&&(c=r-s,e=c/Math.floor(c/e)),u=a;u<0;)l++,u=Math.round(a+l*e);for(h=Math.max(a,0);h<o;h++)h===u&&(t.push(n[h]),l++,u=Math.round(a+l*e))}function getEvenSpacing(n){const t=n.length;let e,s;if(t<2)return!1;for(s=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==s)return!1;return s}const reverseAlign=n=>n==="left"?"right":n==="right"?"left":n,offsetFromEdge=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e;function sample(n,t){const e=[],s=n.length/t,r=n.length;let a=0;for(;a<r;a+=s)e.push(n[Math.floor(a)]);return e}function getPixelForGridLine(n,t,e){const s=n.ticks.length,r=Math.min(t,s-1),a=n._startPixel,o=n._endPixel,l=1e-6;let c=n.getPixelForTick(r),h;if(!(e&&(s===1?h=Math.max(c-a,o-c):t===0?h=(n.getPixelForTick(1)-c)/2:h=(c-n.getPixelForTick(r-1))/2,c+=r<t?h:-h,c<a-l||c>o+l)))return c}function garbageCollect(n,t){each(n,e=>{const s=e.gc,r=s.length/2;let a;if(r>t){for(a=0;a<r;++a)delete e.data[s[a]];s.splice(0,r)}})}function getTickMarkLength(n){return n.drawTicks?n.tickLength:0}function getTitleHeight(n,t){if(!n.display)return 0;const e=toFont(n.font,t),s=toPadding(n.padding);return(isArray(n.text)?n.text.length:1)*e.lineHeight+s.height}function createScaleContext(n,t){return createContext(n,{scale:t,type:"scale"})}function createTickContext(n,t,e){return createContext(n,{tick:e,index:t,type:"tick"})}function titleAlign(n,t,e){let s=_toLeftRightCenter(n);return(e&&t!=="right"||!e&&t==="right")&&(s=reverseAlign(s)),s}function titleArgs(n,t,e,s){const{top:r,left:a,bottom:o,right:l,chart:c}=n,{chartArea:h,scales:u}=c;let d=0,f,p,g;const b=o-r,m=l-a;if(n.isHorizontal()){if(p=_alignStartEnd(s,a,l),isObject(e)){const v=Object.keys(e)[0],y=e[v];g=u[v].getPixelForValue(y)+b-t}else e==="center"?g=(h.bottom+h.top)/2+b-t:g=offsetFromEdge(n,e,t);f=l-a}else{if(isObject(e)){const v=Object.keys(e)[0],y=e[v];p=u[v].getPixelForValue(y)-m+t}else e==="center"?p=(h.left+h.right)/2-m+t:p=offsetFromEdge(n,e,t);g=_alignStartEnd(s,o,r),d=e==="left"?-HALF_PI:HALF_PI}return{titleX:p,titleY:g,maxWidth:f,rotation:d}}class Scale extends Element$1{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:r}=this;return t=finiteOrDefault(t,Number.POSITIVE_INFINITY),e=finiteOrDefault(e,Number.NEGATIVE_INFINITY),s=finiteOrDefault(s,Number.POSITIVE_INFINITY),r=finiteOrDefault(r,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(t,s),max:finiteOrDefault(e,r),minDefined:isNumberFinite(t),maxDefined:isNumberFinite(e)}}getMinMax(t){let{min:e,max:s,minDefined:r,maxDefined:a}=this.getUserBounds(),o;if(r&&a)return{min:e,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,h=l.length;c<h;++c)o=l[c].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),a||(s=Math.max(s,o.max));return e=a&&e>s?s:e,s=r&&e>s?e:s,{min:finiteOrDefault(e,finiteOrDefault(s,e)),max:finiteOrDefault(s,finiteOrDefault(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:r,grace:a,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?sample(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),callback(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,r,a;for(s=0,r=t.length;s<r;s++)a=t[s],a.label=callback(e.callback,[a.value,s,t],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=this.ticks.length,r=e.minRotation||0,a=e.maxRotation;let o=r,l,c,h;if(!this._isVisible()||!e.display||r>=a||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=_limitValue(this.chart.width-d,0,this.maxWidth);l=t.offset?this.maxWidth/s:p/(s-1),d+6>l&&(l=p/(s-(t.offset?.5:1)),c=this.maxHeight-getTickMarkLength(t.grid)-e.padding-getTitleHeight(t.title,this.chart.options.font),h=Math.sqrt(d*d+f*f),o=toDegrees(Math.min(Math.asin(_limitValue((u.highest.height+6)/l,-1,1)),Math.asin(_limitValue(c/h,-1,1))-Math.asin(_limitValue(f/h,-1,1)))),o=Math.max(r,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:r,grid:a}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=getTitleHeight(r,e.options.font);if(l?(t.width=this.maxWidth,t.height=getTickMarkLength(a)+c):(t.height=this.maxHeight,t.width=getTickMarkLength(a)+c),s.display&&this.ticks.length){const{first:h,last:u,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,g=toRadians(this.labelRotation),b=Math.cos(g),m=Math.sin(g);if(l){const v=s.mirror?0:m*d.width+b*f.height;t.height=Math.min(this.maxHeight,t.height+v+p)}else{const v=s.mirror?0:b*d.width+m*f.height;t.width=Math.min(this.maxWidth,t.width+v+p)}this._calculatePadding(h,u,m,b)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,r){const{ticks:{align:a,padding:o},position:l}=this.options,c=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?h?(f=r*t.width,p=s*e.height):(f=s*t.height,p=r*e.width):a==="start"?p=e.width:a==="end"?f=t.width:a!=="inner"&&(f=t.width/2,p=e.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;a==="start"?(u=0,d=t.height):a==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)isNullOrUndef(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=sample(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length)}return t}_computeLabelSizes(t,e){const{ctx:s,_longestTextCache:r}=this,a=[],o=[];let l=0,c=0,h,u,d,f,p,g,b,m,v,y,S;for(h=0;h<e;++h){if(f=t[h].label,p=this._resolveTickFontOptions(h),s.font=g=p.string,b=r[g]=r[g]||{data:{},gc:[]},m=p.lineHeight,v=y=0,!isNullOrUndef(f)&&!isArray(f))v=_measureText(s,b.data,b.gc,v,f),y=m;else if(isArray(f))for(u=0,d=f.length;u<d;++u)S=f[u],!isNullOrUndef(S)&&!isArray(S)&&(v=_measureText(s,b.data,b.gc,v,S),y+=m);a.push(v),o.push(y),l=Math.max(v,l),c=Math.max(y,c)}garbageCollect(r,e);const C=a.indexOf(l),x=o.indexOf(c),k=w=>({width:a[w]||0,height:o[w]||0});return{first:k(0),last:k(e-1),widest:k(C),highest:k(x),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=createTickContext(this.getContext(),t,s))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=toRadians(this.labelRotation),s=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),a=this._getLabelSizes(),o=t.autoSkipPadding||0,l=a?a.widest.width+o:0,c=a?a.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,r=this.options,{grid:a,position:o}=r,l=a.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=getTickMarkLength(a),f=[],p=a.setContext(this.getContext()),g=p.drawBorder?p.borderWidth:0,b=g/2,m=function(D){return _alignPixel(s,D,g)};let v,y,S,C,x,k,w,E,P,O,$,A;if(o==="top")v=m(this.bottom),k=this.bottom-d,E=v-b,O=m(t.top)+b,A=t.bottom;else if(o==="bottom")v=m(this.top),O=t.top,A=m(t.bottom)-b,k=v+b,E=this.top+d;else if(o==="left")v=m(this.right),x=this.right-d,w=v-b,P=m(t.left)+b,$=t.right;else if(o==="right")v=m(this.left),P=t.left,$=m(t.right)-b,x=v+b,w=this.left+d;else if(e==="x"){if(o==="center")v=m((t.top+t.bottom)/2+.5);else if(isObject(o)){const D=Object.keys(o)[0],T=o[D];v=m(this.chart.scales[D].getPixelForValue(T))}O=t.top,A=t.bottom,k=v+b,E=k+d}else if(e==="y"){if(o==="center")v=m((t.left+t.right)/2);else if(isObject(o)){const D=Object.keys(o)[0],T=o[D];v=m(this.chart.scales[D].getPixelForValue(T))}x=v-b,w=x-d,P=t.left,$=t.right}const R=valueOrDefault(r.ticks.maxTicksLimit,u),L=Math.max(1,Math.ceil(u/R));for(y=0;y<u;y+=L){const D=a.setContext(this.getContext(y)),T=D.lineWidth,M=D.color,I=D.borderDash||[],V=D.borderDashOffset,F=D.tickWidth,B=D.tickColor,N=D.tickBorderDash||[],z=D.tickBorderDashOffset;S=getPixelForGridLine(this,y,l),S!==void 0&&(C=_alignPixel(s,S,T),c?x=w=P=$=C:k=E=O=A=C,f.push({tx1:x,ty1:k,tx2:w,ty2:E,x1:P,y1:O,x2:$,y2:A,width:T,color:M,borderDash:I,borderDashOffset:V,tickWidth:F,tickColor:B,tickBorderDash:N,tickBorderDashOffset:z}))}return this._ticksLength=u,this._borderValue=v,f}_computeLabelItems(t){const e=this.axis,s=this.options,{position:r,ticks:a}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:h,padding:u,mirror:d}=a,f=getTickMarkLength(s.grid),p=f+u,g=d?-u:p,b=-toRadians(this.labelRotation),m=[];let v,y,S,C,x,k,w,E,P,O,$,A,R="middle";if(r==="top")k=this.bottom-g,w=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+g,w=this._getXAxisLabelAlignment();else if(r==="left"){const D=this._getYAxisLabelAlignment(f);w=D.textAlign,x=D.x}else if(r==="right"){const D=this._getYAxisLabelAlignment(f);w=D.textAlign,x=D.x}else if(e==="x"){if(r==="center")k=(t.top+t.bottom)/2+p;else if(isObject(r)){const D=Object.keys(r)[0],T=r[D];k=this.chart.scales[D].getPixelForValue(T)+p}w=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")x=(t.left+t.right)/2-p;else if(isObject(r)){const D=Object.keys(r)[0],T=r[D];x=this.chart.scales[D].getPixelForValue(T)}w=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(c==="start"?R="top":c==="end"&&(R="bottom"));const L=this._getLabelSizes();for(v=0,y=l.length;v<y;++v){S=l[v],C=S.label;const D=a.setContext(this.getContext(v));E=this.getPixelForTick(v)+a.labelOffset,P=this._resolveTickFontOptions(v),O=P.lineHeight,$=isArray(C)?C.length:1;const T=$/2,M=D.color,I=D.textStrokeColor,V=D.textStrokeWidth;let F=w;o?(x=E,w==="inner"&&(v===y-1?F=this.options.reverse?"left":"right":v===0?F=this.options.reverse?"right":"left":F="center"),r==="top"?h==="near"||b!==0?A=-$*O+O/2:h==="center"?A=-L.highest.height/2-T*O+O:A=-L.highest.height+O/2:h==="near"||b!==0?A=O/2:h==="center"?A=L.highest.height/2-T*O:A=L.highest.height-$*O,d&&(A*=-1)):(k=E,A=(1-$)*O/2);let B;if(D.showLabelBackdrop){const N=toPadding(D.backdropPadding),z=L.heights[v],j=L.widths[v];let U=k+A-N.top,H=x-N.left;switch(R){case"middle":U-=z/2;break;case"bottom":U-=z;break}switch(w){case"center":H-=j/2;break;case"right":H-=j;break}B={left:H,top:U,width:j+N.width,height:z+N.height,color:D.backdropColor}}m.push({rotation:b,label:C,font:P,color:M,strokeColor:I,strokeWidth:V,textOffset:A,textAlign:F,textBaseline:R,translation:[x,k],backdrop:B})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-toRadians(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:r,padding:a}}=this.options,o=this._getLabelSizes(),l=t+a,c=o.widest.width;let h,u;return e==="left"?r?(u=this.right+a,s==="near"?h="left":s==="center"?(h="center",u+=c/2):(h="right",u+=c)):(u=this.right-l,s==="near"?h="right":s==="center"?(h="center",u-=c/2):(h="left",u=this.left)):e==="right"?r?(u=this.left+a,s==="near"?h="right":s==="center"?(h="center",u-=c/2):(h="left",u-=c)):(u=this.left+l,s==="near"?h="left":s==="center"?(h="center",u+=c/2):(h="right",u=this.right)):h="right",{textAlign:h,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:r,width:a,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,r,a,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(a=>a.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,o;const l=(c,h,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(e.display)for(a=0,o=r.length;a<o;++a){const c=r[a];e.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:s}}=this,r=s.setContext(this.getContext()),a=s.drawBorder?r.borderWidth:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=_alignPixel(t,this.left,a)-a/2,h=_alignPixel(t,this.right,o)+o/2,u=d=l):(u=_alignPixel(t,this.top,a)-a/2,d=_alignPixel(t,this.bottom,o)+o/2,c=h=l),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(c,u),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&clipArea(s,r);const a=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,l;for(o=0,l=a.length;o<l;++o){const c=a[o],h=c.font,u=c.label;c.backdrop&&(s.fillStyle=c.backdrop.color,s.fillRect(c.backdrop.left,c.backdrop.top,c.backdrop.width,c.backdrop.height));let d=c.textOffset;renderText(s,u,0,d,h,c)}r&&unclipArea(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:r}}=this;if(!s.display)return;const a=toFont(s.font),o=toPadding(s.padding),l=s.align;let c=a.lineHeight/2;e==="bottom"||e==="center"||isObject(e)?(c+=o.bottom,isArray(s.text)&&(c+=a.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:h,titleY:u,maxWidth:d,rotation:f}=titleArgs(this,c,e,l);renderText(t,s.text,0,0,a,{color:s.color,maxWidth:d,rotation:f,textAlign:titleAlign(l,e,r),textBaseline:"middle",translation:[h,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=valueOrDefault(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s+1,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let a,o;for(a=0,o=e.length;a<o;++a){const l=e[a];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return toFont(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class TypedRegistry{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;isIChartComponent(e)&&(s=this.register(e));const r=this.items,a=t.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in r||(r[a]=t,registerDefaults(t,o,s),this.override&&defaults.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,r=this.scope;s in e&&delete e[s],r&&s in defaults[r]&&(delete defaults[r][s],this.override&&delete overrides[s])}}function registerDefaults(n,t,e){const s=merge(Object.create(null),[e?defaults.get(e):{},defaults.get(t),n.defaults]);defaults.set(t,s),n.defaultRoutes&&routeDefaults(t,n.defaultRoutes),n.descriptors&&defaults.describe(t,n.descriptors)}function routeDefaults(n,t){Object.keys(t).forEach(e=>{const s=e.split("."),r=s.pop(),a=[n].concat(s).join("."),o=t[e].split("."),l=o.pop(),c=o.join(".");defaults.route(a,r,c,l)})}function isIChartComponent(n){return"id"in n&&"defaults"in n}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(r=>{const a=s||this._getRegistryForType(r);s||a.isForType(r)||a===this.plugins&&r.id?this._exec(t,a,r):each(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,s){const r=_capitalize(t);callback(s["before"+r],[],s),e[t](s),callback(s["after"+r],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var registry=new Registry;class ScatterController extends DatasetController{update(t){const e=this._cachedMeta,{data:s=[]}=e,r=this.chart._animationsDisabled;let{start:a,count:o}=_getStartAndCountOfVisiblePoints(e,s,r);if(this._drawStart=a,this._drawCount=o,_scaleRangesChanged(e)&&(a=0,o=s.length),this.options.showLine){const{dataset:l,_dataset:c}=e;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=s;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:h},t)}this.updateElements(s,a,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=registry.getElement("line")),super.addElements()}updateElements(t,e,s,r){const a=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,u=this.resolveDataElementOptions(e,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),p=o.axis,g=l.axis,{spanGaps:b,segment:m}=this.options,v=isNumber(b)?b:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||a||r==="none";let S=e>0&&this.getParsed(e-1);for(let C=e;C<e+s;++C){const x=t[C],k=this.getParsed(C),w=y?x:{},E=isNullOrUndef(k[g]),P=w[p]=o.getPixelForValue(k[p],C),O=w[g]=a||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,k,c):k[g],C);w.skip=isNaN(P)||isNaN(O)||E,w.stop=C>0&&Math.abs(k[p]-S[p])>v,m&&(w.parsed=k,w.raw=h.data[C]),f&&(w.options=d||this.resolveDataElementOptions(C,x.active?"active":r)),y||this.updateElement(x,C,w,r),S=k}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let l=0;for(let c=e.length-1;c>=0;--c)l=Math.max(l,e[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const s=t.dataset,r=s.options&&s.options.borderWidth||0;if(!e.length)return r;const a=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,a,o)/2}}ScatterController.id="scatter";ScatterController.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(n){return"("+n.label+", "+n.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapter{constructor(t){this.options=t||{}}init(t){}formats(){return abstract()}parse(t,e){return abstract()}format(t,e){return abstract()}add(t,e,s){return abstract()}diff(t,e,s){return abstract()}startOf(t,e,s){return abstract()}endOf(t,e){return abstract()}}DateAdapter.override=function(n){Object.assign(DateAdapter.prototype,n)};var adapters={_date:DateAdapter};function binarySearch(n,t,e,s){const{controller:r,data:a,_sorted:o}=n,l=r._cachedMeta.iScale;if(l&&t===l.axis&&t!=="r"&&o&&a.length){const c=l._reversePixels?_rlookupByKey:_lookupByKey;if(s){if(r._sharedOptions){const h=a[0],u=typeof h.getRange=="function"&&h.getRange(t);if(u){const d=c(a,t,e-u),f=c(a,t,e+u);return{lo:d.lo,hi:f.hi}}}}else return c(a,t,e)}return{lo:0,hi:a.length-1}}function evaluateInteractionItems(n,t,e,s,r){const a=n.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,c=a.length;l<c;++l){const{index:h,data:u}=a[l],{lo:d,hi:f}=binarySearch(a[l],t,o,r);for(let p=d;p<=f;++p){const g=u[p];g.skip||s(g,h,p)}}}function getDistanceMetricForAxis(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(s,r){const a=t?Math.abs(s.x-r.x):0,o=e?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function getIntersectItems(n,t,e,s,r){const a=[];return!r&&!n.isPointInArea(t)||evaluateInteractionItems(n,e,t,function(l,c,h){!r&&!_isPointInArea(l,n.chartArea,0)||l.inRange(t.x,t.y,s)&&a.push({element:l,datasetIndex:c,index:h})},!0),a}function getNearestRadialItems(n,t,e,s){let r=[];function a(o,l,c){const{startAngle:h,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=getAngleFromPoint(o,{x:t.x,y:t.y});_angleBetween(d,h,u)&&r.push({element:o,datasetIndex:l,index:c})}return evaluateInteractionItems(n,e,t,a),r}function getNearestCartesianItems(n,t,e,s,r,a){let o=[];const l=getDistanceMetricForAxis(e);let c=Number.POSITIVE_INFINITY;function h(u,d,f){const p=u.inRange(t.x,t.y,r);if(s&&!p)return;const g=u.getCenterPoint(r);if(!(!!a||n.isPointInArea(g))&&!p)return;const m=l(t,g);m<c?(o=[{element:u,datasetIndex:d,index:f}],c=m):m===c&&o.push({element:u,datasetIndex:d,index:f})}return evaluateInteractionItems(n,e,t,h),o}function getNearestItems(n,t,e,s,r,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!s?getNearestRadialItems(n,t,e,r):getNearestCartesianItems(n,t,e,s,r,a)}function getAxisItems(n,t,e,s,r){const a=[],o=e==="x"?"inXRange":"inYRange";let l=!1;return evaluateInteractionItems(n,e,t,(c,h,u)=>{c[o](t[e],r)&&(a.push({element:c,datasetIndex:h,index:u}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:a}var Interaction={evaluateInteractionItems,modes:{index(n,t,e,s){const r=getRelativePosition(t,n),a=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?getIntersectItems(n,r,a,s,o):getNearestItems(n,r,a,!1,s,o),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const u=l[0].index,d=h.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:h.index,index:u})}),c):[]},dataset(n,t,e,s){const r=getRelativePosition(t,n),a=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?getIntersectItems(n,r,a,s,o):getNearestItems(n,r,a,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,h=n.getDatasetMeta(c).data;l=[];for(let u=0;u<h.length;++u)l.push({element:h[u],datasetIndex:c,index:u})}return l},point(n,t,e,s){const r=getRelativePosition(t,n),a=e.axis||"xy",o=e.includeInvisible||!1;return getIntersectItems(n,r,a,s,o)},nearest(n,t,e,s){const r=getRelativePosition(t,n),a=e.axis||"xy",o=e.includeInvisible||!1;return getNearestItems(n,r,a,e.intersect,s,o)},x(n,t,e,s){const r=getRelativePosition(t,n);return getAxisItems(n,r,"x",e.intersect,s)},y(n,t,e,s){const r=getRelativePosition(t,n);return getAxisItems(n,r,"y",e.intersect,s)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(n,t){return n.filter(e=>e.pos===t)}function filterDynamicPositionByAxis(n,t){return n.filter(e=>STATIC_POSITIONS.indexOf(e.pos)===-1&&e.box.axis===t)}function sortByWeight(n,t){return n.sort((e,s)=>{const r=t?s:e,a=t?e:s;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function wrapBoxes(n){const t=[];let e,s,r,a,o,l;for(e=0,s=(n||[]).length;e<s;++e)r=n[e],{position:a,options:{stack:o,stackWeight:l=1}}=r,t.push({index:e,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&a+o,stackWeight:l});return t}function buildStacks(n){const t={};for(const e of n){const{stack:s,pos:r,stackWeight:a}=e;if(!s||!STATIC_POSITIONS.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return t}function setLayoutDims(n,t){const e=buildStacks(n),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let a,o,l;for(a=0,o=n.length;a<o;++a){l=n[a];const{fullSize:c}=l.box,h=e[l.stack],u=h&&l.stackWeight/h.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=u?u*r:c&&t.availableHeight)}return e}function buildLayoutBoxes(n){const t=wrapBoxes(n),e=sortByWeight(t.filter(h=>h.box.fullSize),!0),s=sortByWeight(filterByPosition(t,"left"),!0),r=sortByWeight(filterByPosition(t,"right")),a=sortByWeight(filterByPosition(t,"top"),!0),o=sortByWeight(filterByPosition(t,"bottom")),l=filterDynamicPositionByAxis(t,"x"),c=filterDynamicPositionByAxis(t,"y");return{fullSize:e,leftAndTop:s.concat(a),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:filterByPosition(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:a.concat(o).concat(l)}}function getCombinedMax(n,t,e,s){return Math.max(n[e],t[e])+Math.max(n[s],t[s])}function updateMaxPadding(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function updateDims(n,t,e,s){const{pos:r,box:a}=e,o=n.maxPadding;if(!isObject(r)){e.size&&(n[r]-=e.size);const d=s[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?a.height:a.width),e.size=d.size/d.count,n[r]+=e.size}a.getPadding&&updateMaxPadding(o,a.getPadding());const l=Math.max(0,t.outerWidth-getCombinedMax(o,n,"left","right")),c=Math.max(0,t.outerHeight-getCombinedMax(o,n,"top","bottom")),h=l!==n.w,u=c!==n.h;return n.w=l,n.h=c,e.horizontal?{same:h,other:u}:{same:u,other:h}}function handleMaxPadding(n){const t=n.maxPadding;function e(s){const r=Math.max(t[s]-n[s],0);return n[s]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function getMargins(n,t){const e=t.maxPadding;function s(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{a[o]=Math.max(t[o],e[o])}),a}return s(n?["left","right"]:["top","bottom"])}function fitBoxes(n,t,e,s){const r=[];let a,o,l,c,h,u;for(a=0,o=n.length,h=0;a<o;++a){l=n[a],c=l.box,c.update(l.width||t.w,l.height||t.h,getMargins(l.horizontal,t));const{same:d,other:f}=updateDims(t,e,l,s);h|=d&&r.length,u=u||f,c.fullSize||r.push(l)}return h&&fitBoxes(r,t,e,s)||u}function setBoxDims(n,t,e,s,r){n.top=e,n.left=t,n.right=t+s,n.bottom=e+r,n.width=s,n.height=r}function placeBoxes(n,t,e,s){const r=e.padding;let{x:a,y:o}=t;for(const l of n){const c=l.box,h=s[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/h.weight||1;if(l.horizontal){const d=t.w*u,f=h.size||c.height;defined(h.start)&&(o=h.start),c.fullSize?setBoxDims(c,r.left,o,e.outerWidth-r.right-r.left,f):setBoxDims(c,t.left+h.placed,o,d,f),h.start=o,h.placed+=d,o=c.bottom}else{const d=t.h*u,f=h.size||c.width;defined(h.start)&&(a=h.start),c.fullSize?setBoxDims(c,a,r.top,f,e.outerHeight-r.bottom-r.top):setBoxDims(c,a,t.top+h.placed,f,d),h.start=a,h.placed+=d,a=c.right}}t.x=a,t.y=o}defaults.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var layouts={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,s){if(!n)return;const r=toPadding(n.options.layout.padding),a=Math.max(t-r.width,0),o=Math.max(e-r.height,0),l=buildLayoutBoxes(n.boxes),c=l.vertical,h=l.horizontal;each(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=c.reduce((b,m)=>m.box.options&&m.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);updateMaxPadding(f,toPadding(s));const p=Object.assign({maxPadding:f,w:a,h:o,x:r.left,y:r.top},r),g=setLayoutDims(c.concat(h),d);fitBoxes(l.fullSize,p,d,g),fitBoxes(c,p,d,g),fitBoxes(h,p,d,g)&&fitBoxes(c,p,d,g),handleMaxPadding(p),placeBoxes(l.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,placeBoxes(l.rightAndBottom,p,d,g),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},each(l.chartArea,b=>{const m=b.box;Object.assign(m,n.chartArea),m.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,r){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):s)}}isAttached(t){return!0}updateConfig(t){}}class BasicPlatform extends BasePlatform{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=n=>n===null||n==="";function initCanvas(n,t){const e=n.style,s=n.getAttribute("height"),r=n.getAttribute("width");if(n[EXPANDO_KEY]={initial:{height:s,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",isNullOrEmpty(r)){const a=readUsedSize(n,"width");a!==void 0&&(n.width=a)}if(isNullOrEmpty(s))if(n.style.height==="")n.height=n.width/(t||2);else{const a=readUsedSize(n,"height");a!==void 0&&(n.height=a)}return n}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(n,t,e){n.addEventListener(t,e,eventListenerOptions)}function removeListener(n,t,e){n.canvas.removeEventListener(t,e,eventListenerOptions)}function fromNativeEvent(n,t){const e=EVENT_TYPES[n.type]||n.type,{x:s,y:r}=getRelativePosition(n,t);return{type:e,chart:t,native:n,x:s!==void 0?s:null,y:r!==void 0?r:null}}function nodeListContains(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function createAttachObserver(n,t,e){const s=n.canvas,r=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||nodeListContains(l.addedNodes,s),o=o&&!nodeListContains(l.removedNodes,s);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function createDetachObserver(n,t,e){const s=n.canvas,r=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||nodeListContains(l.removedNodes,s),o=o&&!nodeListContains(l.addedNodes,s);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const n=window.devicePixelRatio;n!==oldDevicePixelRatio&&(oldDevicePixelRatio=n,drpListeningCharts.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function listenDevicePixelRatioChanges(n,t){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(n,t)}function unlistenDevicePixelRatioChanges(n){drpListeningCharts.delete(n),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(n,t,e){const s=n.canvas,r=s&&_getParentNode(s);if(!r)return;const a=throttled((l,c)=>{const h=r.clientWidth;e(l,c),h<r.clientWidth&&e()},window),o=new ResizeObserver(l=>{const c=l[0],h=c.contentRect.width,u=c.contentRect.height;h===0&&u===0||a(h,u)});return o.observe(r),listenDevicePixelRatioChanges(n,a),o}function releaseObserver(n,t,e){e&&e.disconnect(),t==="resize"&&unlistenDevicePixelRatioChanges(n)}function createProxyAndListen(n,t,e){const s=n.canvas,r=throttled(a=>{n.ctx!==null&&e(fromNativeEvent(a,n))},n,a=>{const o=a[0];return[o,o.offsetX,o.offsetY]});return addListener(s,t,r),r}class DomPlatform extends BasePlatform{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(initCanvas(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[EXPANDO_KEY])return!1;const s=e[EXPANDO_KEY].initial;["height","width"].forEach(a=>{const o=s[a];isNullOrUndef(o)?e.removeAttribute(a):e.setAttribute(a,o)});const r=s.style||{};return Object.keys(r).forEach(a=>{e.style[a]=r[a]}),e.width=e.width,delete e[EXPANDO_KEY],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),o={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[e]||createProxyAndListen;r[e]=o(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),r=s[e];if(!r)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[e]||removeListener)(t,e,r),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,r){return getMaximumSize(t,e,s,r)}isAttached(t){const e=_getParentNode(t);return!!(e&&e.isConnected)}}function _detectPlatform(n){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?BasicPlatform:DomPlatform}class PluginService{constructor(){this._init=[]}notify(t,e,s,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(a,t,e,s);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,s,r){r=r||{};for(const a of t){const o=a.plugin,l=o[s],c=[e,r,a.options];if(callback(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,r=valueOrDefault(s.options&&s.options.plugins,{}),a=allPlugins(s);return r===!1&&!e?[]:createDescriptors(t,a,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,r=(a,o)=>a.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(e,s),t,"stop"),this._notify(r(s,e),t,"start")}}function allPlugins(n){const t={},e=[],s=Object.keys(registry.plugins.items);for(let a=0;a<s.length;a++)e.push(registry.getPlugin(s[a]));const r=n.plugins||[];for(let a=0;a<r.length;a++){const o=r[a];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function getOpts(n,t){return!t&&n===!1?null:n===!0?{}:n}function createDescriptors(n,{plugins:t,localIds:e},s,r){const a=[],o=n.getContext();for(const l of t){const c=l.id,h=getOpts(s[c],r);h!==null&&a.push({plugin:l,options:pluginOpts(n.config,{plugin:l,local:e[c]},h,o)})}return a}function pluginOpts(n,{plugin:t,local:e},s,r){const a=n.pluginScopeKeys(t),o=n.getOptionScopes(s,a);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(n,t){const e=defaults.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function getAxisFromDefaultScaleID(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function getDefaultScaleIDFromAxis(n,t){return n===t?"_index_":"_value_"}function axisFromPosition(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function determineAxis(n,t){return n==="x"||n==="y"?n:t.axis||axisFromPosition(t.position)||n.charAt(0).toLowerCase()}function mergeScaleConfig(n,t){const e=overrides[n.type]||{scales:{}},s=t.scales||{},r=getIndexAxis(n.type,t),a=Object.create(null),o=Object.create(null);return Object.keys(s).forEach(l=>{const c=s[l];if(!isObject(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=determineAxis(l,c),u=getDefaultScaleIDFromAxis(h,r),d=e.scales||{};a[h]=a[h]||l,o[l]=mergeIf(Object.create(null),[{axis:h},c,d[h],d[u]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||getIndexAxis(c,t),d=(overrides[c]||{}).scales||{};Object.keys(d).forEach(f=>{const p=getAxisFromDefaultScaleID(f,h),g=l[p+"AxisID"]||a[p]||p;o[g]=o[g]||Object.create(null),mergeIf(o[g],[{axis:p},s[g],d[f]])})}),Object.keys(o).forEach(l=>{const c=o[l];mergeIf(c,[defaults.scales[c.type],defaults.scale])}),o}function initOptions(n){const t=n.options||(n.options={});t.plugins=valueOrDefault(t.plugins,{}),t.scales=mergeScaleConfig(n,t)}function initData(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function initConfig(n){return n=n||{},n.data=initData(n.data),initOptions(n),n}const keyCache=new Map,keysCached=new Set;function cachedKeys(n,t){let e=keyCache.get(n);return e||(e=t(),keyCache.set(n,e),keysCached.add(e)),e}const addIfFound=(n,t,e)=>{const s=resolveObjectKey(t,e);s!==void 0&&n.add(s)};class Config{constructor(t){this._config=initConfig(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=initData(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),initOptions(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return cachedKeys(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return cachedKeys(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return cachedKeys(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return cachedKeys(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let r=s.get(t);return(!r||e)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,e,s){const{options:r,type:a}=this,o=this._cachedScopes(t,s),l=o.get(e);if(l)return l;const c=new Set;e.forEach(u=>{t&&(c.add(t),u.forEach(d=>addIfFound(c,t,d))),u.forEach(d=>addIfFound(c,r,d)),u.forEach(d=>addIfFound(c,overrides[a]||{},d)),u.forEach(d=>addIfFound(c,defaults,d)),u.forEach(d=>addIfFound(c,descriptors,d))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),keysCached.has(e)&&o.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,overrides[e]||{},defaults.datasets[e]||{},{type:e},defaults,descriptors]}resolveNamedOptions(t,e,s,r=[""]){const a={$shared:!0},{resolver:o,subPrefixes:l}=getResolver(this._resolverCache,t,r);let c=o;if(needContext(o,e)){a.$shared=!1,s=isFunction(s)?s():s;const h=this.createResolver(t,s,l);c=_attachContext(o,s,h)}for(const h of e)a[h]=c[h];return a}createResolver(t,e,s=[""],r){const{resolver:a}=getResolver(this._resolverCache,t,s);return isObject(e)?_attachContext(a,e,void 0,r):a}}function getResolver(n,t,e){let s=n.get(t);s||(s=new Map,n.set(t,s));const r=e.join();let a=s.get(r);return a||(a={resolver:_createResolver(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,a)),a}const hasFunction=n=>isObject(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||isFunction(n[e]),!1);function needContext(n,t){const{isScriptable:e,isIndexable:s}=_descriptors(n);for(const r of t){const a=e(r),o=s(r),l=(o||a)&&n[r];if(a&&(isFunction(l)||hasFunction(l))||o&&isArray(l))return!0}return!1}var version="3.9.1";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(n,t){return n==="top"||n==="bottom"||KNOWN_POSITIONS.indexOf(n)===-1&&t==="x"}function compare2Level(n,t){return function(e,s){return e[n]===s[n]?e[t]-s[t]:e[n]-s[n]}}function onAnimationsComplete(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),callback(e&&e.onComplete,[n],t)}function onAnimationProgress(n){const t=n.chart,e=t.options.animation;callback(e&&e.onProgress,[n],t)}function getCanvas(n){return _isDomSupported()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const instances={},getChart=n=>{const t=getCanvas(n);return Object.values(instances).filter(e=>e.canvas===t).pop()};function moveNumericKeys(n,t,e){const s=Object.keys(n);for(const r of s){const a=+r;if(a>=t){const o=n[r];delete n[r],(e>0||a>t)&&(n[a+e]=o)}}}function determineLastEvent(n,t,e,s){return!e||n.type==="mouseout"?null:s?t:n}class Chart{constructor(t,e){const s=this.config=new Config(e),r=getCanvas(t),a=getChart(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||_detectPlatform(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;if(this.id=uid(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:r,_aspectRatio:a}=this;return isNullOrUndef(t)?e&&a?a:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(t,e){animator.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,r=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,a),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,retinaScale(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),callback(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};each(e,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let a=[];e&&(a=a.concat(Object.keys(e).map(o=>{const l=e[o],c=determineAxis(o,l),h=c==="r",u=c==="x";return{options:l,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),each(a,o=>{const l=o.options,c=l.id,h=determineAxis(c,l),u=valueOrDefault(l.type,o.dtype);(l.position===void 0||positionIsHorizontal(l.position,h)!==positionIsHorizontal(o.dposition))&&(l.position=o.dposition),r[c]=!0;let d=null;if(c in s&&s[c].type===u)d=s[c];else{const f=registry.getScale(u);d=new f({id:c,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(l,t)}),each(r,(o,l)=>{o||delete s[l]}),each(s,o=>{layouts.configure(this,o,o.options),layouts.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((r,a)=>r.index-a.index),s>e){for(let r=e;r<s;++r)this._destroyDatasetMeta(r);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,r)=>{e.filter(a=>a===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=e.length;s<r;s++){const a=e[s];let o=this.getDatasetMeta(s);const l=a.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=a.indexAxis||getIndexAxis(l,this.options),o.order=a.order||0,o.index=s,o.label=""+a.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=registry.getController(l),{datasetElementType:h,dataElementType:u}=defaults.datasets[l];Object.assign(c.prototype,{dataElementType:registry.getElement(u),datasetElementType:h&&registry.getElement(h)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){each(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,u=this.data.datasets.length;h<u;h++){const{controller:d}=this.getDatasetMeta(h),f=!r&&a.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||each(a,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(compare2Level("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){each(this.scales,t=>{layouts.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!setsEqual(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:a}of e){const o=s==="_removeElements"?-a:a;moveNumericKeys(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=a=>new Set(t.filter(o=>o[0]===a).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let a=1;a<e;a++)if(!setsEqual(r,s(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],each(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,isFunction(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resize(s,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let r,a;for(r=0,a=e.length;r<a;++r){const o=e[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s=t._clip,r=!s.disabled,a=this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&clipArea(e,{left:s.left===!1?0:a.left-s.left,right:s.right===!1?this.width:a.right+s.right,top:s.top===!1?0:a.top-s.top,bottom:s.bottom===!1?this.height:a.bottom+s.bottom}),t.controller.draw(),r&&unclipArea(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return _isPointInArea(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,r){const a=Interaction.modes[e];return typeof a=="function"?a(this,t,s,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let r=s.filter(a=>a&&a._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const r=s?"show":"hide",a=this.getDatasetMeta(t),o=a.controller._resolveAnimations(void 0,r);defined(e)?(a.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(a,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),animator.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),clearCanvas(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(a,o)=>{e.addEventListener(this,a,o),t[a]=o},r=(a,o,l)=>{a.offsetX=o,a.offsetY=l,this._eventHandler(a)};each(this.options.events,a=>s(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(c,h)=>{e.addEventListener(this,c,h),t[c]=h},r=(c,h)=>{t[c]&&(e.removeEventListener(this,c,h),delete t[c])},a=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",a),s("detach",o)};o=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),s("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){each(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},each(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const r=s?"set":"remove";let a,o,l,c;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:a,index:o})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[o],index:o}});!_elementsEqual(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}_updateHoverStyles(t,e,s){const r=this.options.hover,a=(c,h)=>c.filter(u=>!h.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=a(e,t),l=s?t:a(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const a=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(a||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:r=[],options:a}=this,o=e,l=this._getActiveElements(t,r,s,o),c=_isClickEvent(t),h=determineLastEvent(t,this._lastEvent,s,c);s&&(this._lastEvent=null,callback(a.onHover,[t,l,this],this),c&&callback(a.onClick,[t,l,this],this));const u=!_elementsEqual(l,r);return(u||e)&&(this._active=l,this._updateHoverStyles(l,r,e)),this._lastEvent=h,u}_getActiveElements(t,e,s,r){if(t.type==="mouseout")return[];if(!s)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,r)}}const invalidatePlugins=()=>each(Chart.instances,n=>n._plugins.invalidate()),enumerable=!0;Object.defineProperties(Chart,{defaults:{enumerable,value:defaults},instances:{enumerable,value:instances},overrides:{enumerable,value:overrides},registry:{enumerable,value:registry},version:{enumerable,value:version},getChart:{enumerable,value:getChart},register:{enumerable,value:(...n)=>{registry.add(...n),invalidatePlugins()}},unregister:{enumerable,value:(...n)=>{registry.remove(...n),invalidatePlugins()}}});function clipArc(n,t,e){const{startAngle:s,pixelMargin:r,x:a,y:o,outerRadius:l,innerRadius:c}=t;let h=r/l;n.beginPath(),n.arc(a,o,l,s-h,e+h),c>r?(h=r/c,n.arc(a,o,c,e+h,s-h,!0)):n.arc(a,o,r,e+HALF_PI,s-HALF_PI),n.closePath(),n.clip()}function toRadiusCorners(n){return _readValueToProps(n,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(n,t,e,s){const r=toRadiusCorners(n.options.borderRadius),a=(e-t)/2,o=Math.min(a,s*t/2),l=c=>{const h=(e-Math.min(a,c))*s/2;return _limitValue(c,0,Math.min(a,h))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:_limitValue(r.innerStart,0,o),innerEnd:_limitValue(r.innerEnd,0,o)}}function rThetaToXY(n,t,e,s){return{x:e+n*Math.cos(t),y:s+n*Math.sin(t)}}function pathArc(n,t,e,s,r,a){const{x:o,y:l,startAngle:c,pixelMargin:h,innerRadius:u}=t,d=Math.max(t.outerRadius+s+e-h,0),f=u>0?u+s+e+h:0;let p=0;const g=r-c;if(s){const D=u>0?u-s:0,T=d>0?d-s:0,M=(D+T)/2,I=M!==0?g*M/(M+s):g;p=(g-I)/2}const b=Math.max(.001,g*d-e/PI)/d,m=(g-b)/2,v=c+m+p,y=r-m-p,{outerStart:S,outerEnd:C,innerStart:x,innerEnd:k}=parseBorderRadius$1(t,f,d,y-v),w=d-S,E=d-C,P=v+S/w,O=y-C/E,$=f+x,A=f+k,R=v+x/$,L=y-k/A;if(n.beginPath(),a){if(n.arc(o,l,d,P,O),C>0){const M=rThetaToXY(E,O,o,l);n.arc(M.x,M.y,C,O,y+HALF_PI)}const D=rThetaToXY(A,y,o,l);if(n.lineTo(D.x,D.y),k>0){const M=rThetaToXY(A,L,o,l);n.arc(M.x,M.y,k,y+HALF_PI,L+Math.PI)}if(n.arc(o,l,f,y-k/f,v+x/f,!0),x>0){const M=rThetaToXY($,R,o,l);n.arc(M.x,M.y,x,R+Math.PI,v-HALF_PI)}const T=rThetaToXY(w,v,o,l);if(n.lineTo(T.x,T.y),S>0){const M=rThetaToXY(w,P,o,l);n.arc(M.x,M.y,S,v-HALF_PI,P)}}else{n.moveTo(o,l);const D=Math.cos(P)*d+o,T=Math.sin(P)*d+l;n.lineTo(D,T);const M=Math.cos(O)*d+o,I=Math.sin(O)*d+l;n.lineTo(M,I)}n.closePath()}function drawArc(n,t,e,s,r){const{fullCircles:a,startAngle:o,circumference:l}=t;let c=t.endAngle;if(a){pathArc(n,t,e,s,o+TAU,r);for(let h=0;h<a;++h)n.fill();isNaN(l)||(c=o+l%TAU,l%TAU===0&&(c+=TAU))}return pathArc(n,t,e,s,c,r),n.fill(),c}function drawFullCircleBorders(n,t,e){const{x:s,y:r,startAngle:a,pixelMargin:o,fullCircles:l}=t,c=Math.max(t.outerRadius-o,0),h=t.innerRadius+o;let u;for(e&&clipArc(n,t,a+TAU),n.beginPath(),n.arc(s,r,h,a+TAU,a,!0),u=0;u<l;++u)n.stroke();for(n.beginPath(),n.arc(s,r,c,a,a+TAU),u=0;u<l;++u)n.stroke()}function drawBorder(n,t,e,s,r,a){const{options:o}=t,{borderWidth:l,borderJoinStyle:c}=o,h=o.borderAlign==="inner";l&&(h?(n.lineWidth=l*2,n.lineJoin=c||"round"):(n.lineWidth=l,n.lineJoin=c||"bevel"),t.fullCircles&&drawFullCircleBorders(n,t,h),h&&clipArc(n,t,r),pathArc(n,t,e,s,r,a),n.stroke())}class ArcElement extends Element$1{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){const r=this.getProps(["x","y"],s),{angle:a,distance:o}=getAngleFromPoint(r,{x:t,y:e}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=this.options.spacing/2,g=valueOrDefault(d,c-l)>=TAU||_angleBetween(a,l,c),b=_isBetween(o,h+f,u+f);return g&&b}getCenterPoint(t){const{x:e,y:s,startAngle:r,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:c,spacing:h}=this.options,u=(r+a)/2,d=(o+l+h+c)/2;return{x:e+Math.cos(u)*d,y:s+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:s}=this,r=(e.offset||0)/2,a=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>TAU?Math.floor(s/TAU):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=0;if(r){l=r/2;const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*l,Math.sin(h)*l),this.circumference>=PI&&(l=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const c=drawArc(t,this,l,a,o);drawBorder(t,this,l,a,c,o),t.restore()}}ArcElement.id="arc";ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};function setStyle(n,t,e=t){n.lineCap=valueOrDefault(e.borderCapStyle,t.borderCapStyle),n.setLineDash(valueOrDefault(e.borderDash,t.borderDash)),n.lineDashOffset=valueOrDefault(e.borderDashOffset,t.borderDashOffset),n.lineJoin=valueOrDefault(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=valueOrDefault(e.borderWidth,t.borderWidth),n.strokeStyle=valueOrDefault(e.borderColor,t.borderColor)}function lineTo(n,t,e){n.lineTo(e.x,e.y)}function getLineMethod(n){return n.stepped?_steppedLineTo:n.tension||n.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(n,t,e={}){const s=n.length,{start:r=0,end:a=s-1}=e,{start:o,end:l}=t,c=Math.max(r,o),h=Math.min(a,l),u=r<o&&a<o||r>l&&a>l;return{count:s,start:c,loop:t.loop,ilen:h<c&&!u?s+h-c:h-c}}function pathSegment(n,t,e,s){const{points:r,options:a}=t,{count:o,start:l,loop:c,ilen:h}=pathVars(r,e,s),u=getLineMethod(a);let{move:d=!0,reverse:f}=s||{},p,g,b;for(p=0;p<=h;++p)g=r[(l+(f?h-p:p))%o],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):u(n,b,g,f,a.stepped),b=g);return c&&(g=r[(l+(f?h:0))%o],u(n,b,g,f,a.stepped)),!!c}function fastPathSegment(n,t,e,s){const r=t.points,{count:a,start:o,ilen:l}=pathVars(r,e,s),{move:c=!0,reverse:h}=s||{};let u=0,d=0,f,p,g,b,m,v;const y=C=>(o+(h?l-C:C))%a,S=()=>{b!==m&&(n.lineTo(u,m),n.lineTo(u,b),n.lineTo(u,v))};for(c&&(p=r[y(0)],n.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=r[y(f)],p.skip)continue;const C=p.x,x=p.y,k=C|0;k===g?(x<b?b=x:x>m&&(m=x),u=(d*u+C)/++d):(S(),n.lineTo(C,x),g=k,d=0,b=m=x),v=x}S()}function _getSegmentMethod(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?fastPathSegment:pathSegment}function _getInterpolationMethod(n){return n.stepped?_steppedInterpolation:n.tension||n.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(n,t,e,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,s)&&r.closePath()),setStyle(n,t.options),n.stroke(r)}function strokePathDirect(n,t,e,s){const{segments:r,options:a}=t,o=_getSegmentMethod(t);for(const l of r)setStyle(n,a,l.style),n.beginPath(),o(n,t,l,{start:e,end:e+s-1})&&n.closePath(),n.stroke()}const usePath2D=typeof Path2D=="function";function draw(n,t,e,s){usePath2D&&!t.options.segment?strokePathWithCache(n,t,e,s):strokePathDirect(n,t,e,s)}class LineElement extends Element$1{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,s,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,r=t[e],a=this.points,o=_boundSegments(this,{property:e,start:r,end:r});if(!o.length)return;const l=[],c=_getInterpolationMethod(s);let h,u;for(h=0,u=o.length;h<u;++h){const{start:d,end:f}=o[h],p=a[d],g=a[f];if(p===g){l.push(p);continue}const b=Math.abs((r-p[e])/(g[e]-p[e])),m=c(p,g,b,s.stepped);m[e]=t[e],l.push(m)}return l.length===1?l[0]:l}pathSegment(t,e,s){return _getSegmentMethod(this)(t,this,e,s)}path(t,e,s){const r=this.segments,a=_getSegmentMethod(this);let o=this._loop;e=e||0,s=s||this.points.length-e;for(const l of r)o&=a(t,this,l,{start:e,end:e+s-1});return!!o}draw(t,e,s,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),draw(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}LineElement.id="line";LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};LineElement.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function inRange$1(n,t,e,s){const r=n.options,{[e]:a}=n.getProps([e],s);return Math.abs(t-a)<r.radius+r.hitRadius}class PointElement extends Element$1{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,s){const r=this.options,{x:a,y:o}=this.getProps(["x","y"],s);return Math.pow(t-a,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return inRange$1(this,t,"x",e)}inYRange(t,e){return inRange$1(this,t,"y",e)}getCenterPoint(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const s=e&&t.borderWidth||0;return(e+s)*2}draw(t,e){const s=this.options;this.skip||s.radius<.1||!_isPointInArea(this,e,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,drawPoint(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}PointElement.id="point";PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function getBarBounds(n,t){const{x:e,y:s,base:r,width:a,height:o}=n.getProps(["x","y","base","width","height"],t);let l,c,h,u,d;return n.horizontal?(d=o/2,l=Math.min(e,r),c=Math.max(e,r),h=s-d,u=s+d):(d=a/2,l=e-d,c=e+d,h=Math.min(s,r),u=Math.max(s,r)),{left:l,top:h,right:c,bottom:u}}function skipOrLimit(n,t,e,s){return n?0:_limitValue(t,e,s)}function parseBorderWidth(n,t,e){const s=n.options.borderWidth,r=n.borderSkipped,a=toTRBL(s);return{t:skipOrLimit(r.top,a.top,0,e),r:skipOrLimit(r.right,a.right,0,t),b:skipOrLimit(r.bottom,a.bottom,0,e),l:skipOrLimit(r.left,a.left,0,t)}}function parseBorderRadius(n,t,e){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,a=toTRBLCorners(r),o=Math.min(t,e),l=n.borderSkipped,c=s||isObject(r);return{topLeft:skipOrLimit(!c||l.top||l.left,a.topLeft,0,o),topRight:skipOrLimit(!c||l.top||l.right,a.topRight,0,o),bottomLeft:skipOrLimit(!c||l.bottom||l.left,a.bottomLeft,0,o),bottomRight:skipOrLimit(!c||l.bottom||l.right,a.bottomRight,0,o)}}function boundingRects(n){const t=getBarBounds(n),e=t.right-t.left,s=t.bottom-t.top,r=parseBorderWidth(n,e/2,s/2),a=parseBorderRadius(n,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:a},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function inRange(n,t,e,s){const r=t===null,a=e===null,l=n&&!(r&&a)&&getBarBounds(n,s);return l&&(r||_isBetween(t,l.left,l.right))&&(a||_isBetween(e,l.top,l.bottom))}function hasRadius(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function addNormalRectPath(n,t){n.rect(t.x,t.y,t.w,t.h)}function inflateRect(n,t,e={}){const s=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,a=(n.x+n.w!==e.x+e.w?t:0)-s,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+s,y:n.y+r,w:n.w+a,h:n.h+o,radius:n.radius}}class BarElement extends Element$1{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:r}}=this,{inner:a,outer:o}=boundingRects(this),l=hasRadius(o.radius)?addRoundedRectPath:addNormalRectPath;t.save(),(o.w!==a.w||o.h!==a.h)&&(t.beginPath(),l(t,inflateRect(o,e,a)),t.clip(),l(t,inflateRect(a,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,inflateRect(a,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,s){return inRange(this,t,e,s)}inXRange(t,e){return inRange(this,t,null,e)}inYRange(t,e){return inRange(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(e+r)/2:e,y:a?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}BarElement.id="bar";BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};const getBoxSize=(n,t)=>{let{boxHeight:e=t,boxWidth:s=t}=n;return n.usePointStyle&&(e=Math.min(e,t),s=n.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},itemsEqual=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Legend extends Element$1{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=callback(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=toFont(s.font),a=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=getBoxSize(s,a);let h,u;e.font=r.string,this.isHorizontal()?(h=this.maxWidth,u=this._fitRows(o,a,l,c)+10):(u=this.maxHeight,h=this._fitCols(o,a,l,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,r){const{ctx:a,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],u=r+l;let d=t;a.textAlign="left",a.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((g,b)=>{const m=s+e/2+a.measureText(g.text).width;(b===0||h[h.length-1]+m+2*l>o)&&(d+=u,h[h.length-(b>0?0:1)]=0,p+=u,f++),c[b]={left:0,top:p,row:f,width:m,height:r},h[h.length-1]+=m+l}),d}_fitCols(t,e,s,r){const{ctx:a,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],u=o-t;let d=l,f=0,p=0,g=0,b=0;return this.legendItems.forEach((m,v)=>{const y=s+e/2+a.measureText(m.text).width;v>0&&p+r+2*l>u&&(d+=f+l,h.push({width:f,height:p}),g+=f+l,b++,f=p=0),c[v]={left:g,top:p,col:b,width:y,height:r},f=Math.max(f,y),p+=r+l}),d+=f,h.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:r},rtl:a}}=this,o=getRtlAdapter(a,this.left,this.width);if(this.isHorizontal()){let l=0,c=_alignStartEnd(s,this.left+r,this.right-this.lineWidths[l]);for(const h of e)l!==h.row&&(l=h.row,c=_alignStartEnd(s,this.left+r,this.right-this.lineWidths[l])),h.top+=this.top+t+r,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+r}else{let l=0,c=_alignStartEnd(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const h of e)h.col!==l&&(l=h.col,c=_alignStartEnd(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),h.top=c,h.left+=this.left+r,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;clipArea(t,this),this._draw(),unclipArea(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:r}=this,{align:a,labels:o}=t,l=defaults.color,c=getRtlAdapter(t.rtl,this.left,this.width),h=toFont(o.font),{color:u,padding:d}=o,f=h.size,p=f/2;let g;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string;const{boxWidth:b,boxHeight:m,itemHeight:v}=getBoxSize(o,f),y=function(w,E,P){if(isNaN(b)||b<=0||isNaN(m)||m<0)return;r.save();const O=valueOrDefault(P.lineWidth,1);if(r.fillStyle=valueOrDefault(P.fillStyle,l),r.lineCap=valueOrDefault(P.lineCap,"butt"),r.lineDashOffset=valueOrDefault(P.lineDashOffset,0),r.lineJoin=valueOrDefault(P.lineJoin,"miter"),r.lineWidth=O,r.strokeStyle=valueOrDefault(P.strokeStyle,l),r.setLineDash(valueOrDefault(P.lineDash,[])),o.usePointStyle){const $={radius:m*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:O},A=c.xPlus(w,b/2),R=E+p;drawPointLegend(r,$,A,R,o.pointStyleWidth&&b)}else{const $=E+Math.max((f-m)/2,0),A=c.leftForLtr(w,b),R=toTRBLCorners(P.borderRadius);r.beginPath(),Object.values(R).some(L=>L!==0)?addRoundedRectPath(r,{x:A,y:$,w:b,h:m,radius:R}):r.rect(A,$,b,m),r.fill(),O!==0&&r.stroke()}r.restore()},S=function(w,E,P){renderText(r,P.text,w,E+v/2,h,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})},C=this.isHorizontal(),x=this._computeTitleHeight();C?g={x:_alignStartEnd(a,this.left+d,this.right-s[0]),y:this.top+d+x,line:0}:g={x:this.left+d,y:_alignStartEnd(a,this.top+x+d,this.bottom-e[0].height),line:0},overrideTextDirection(this.ctx,t.textDirection);const k=v+d;this.legendItems.forEach((w,E)=>{r.strokeStyle=w.fontColor||u,r.fillStyle=w.fontColor||u;const P=r.measureText(w.text).width,O=c.textAlign(w.textAlign||(w.textAlign=o.textAlign)),$=b+p+P;let A=g.x,R=g.y;c.setWidth(this.width),C?E>0&&A+$+d>this.right&&(R=g.y+=k,g.line++,A=g.x=_alignStartEnd(a,this.left+d,this.right-s[g.line])):E>0&&R+k>this.bottom&&(A=g.x=A+e[g.line].width+d,g.line++,R=g.y=_alignStartEnd(a,this.top+x+d,this.bottom-e[g.line].height));const L=c.x(A);y(L,R,w),A=_textX(O,A+b+p,C?A+$:this.right,t.rtl),S(c.x(A),R,w),C?g.x+=$+d:g.y+=k}),restoreTextDirection(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=toFont(e.font),r=toPadding(e.padding);if(!e.display)return;const a=getRtlAdapter(t.rtl,this.left,this.width),o=this.ctx,l=e.position,c=s.size/2,h=r.top+c;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+h,d=_alignStartEnd(t.align,d,this.right-f);else{const g=this.columnSizes.reduce((b,m)=>Math.max(b,m.height),0);u=h+_alignStartEnd(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const p=_alignStartEnd(l,d,d+f);o.textAlign=a.textAlign(_toLeftRightCenter(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,renderText(o,e.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,e=toFont(t.font),s=toPadding(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,r,a;if(_isBetween(t,this.left,this.right)&&_isBetween(e,this.top,this.bottom)){for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(r=a[s],_isBetween(t,r.left,r.left+r.width)&&_isBetween(e,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!isListened(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,a=itemsEqual(r,s);r&&!a&&callback(e.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!a&&callback(e.onHover,[t,s,this],this)}else s&&callback(e.onClick,[t,s,this],this)}}function isListened(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(n,t,e){const s=n.legend=new Legend({ctx:n.ctx,options:e,chart:n});layouts.configure(n,s,e),layouts.addBox(n,s)},stop(n){layouts.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const s=n.legend;layouts.configure(n,s,e),s.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const s=t.datasetIndex,r=e.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:r,color:a}}=n.legend.options;return n._getSortedDatasetMetas().map(o=>{const l=o.controller.getStyle(e?0:void 0),c=toPadding(l.borderWidth);return{text:t[o.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!o.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Title extends Element$1{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=isArray(s.text)?s.text.length:1;this._padding=toPadding(s.padding);const a=r*toFont(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:r,right:a,options:o}=this,l=o.align;let c=0,h,u,d;return this.isHorizontal()?(u=_alignStartEnd(l,s,a),d=e+t,h=a-s):(o.position==="left"?(u=s+t,d=_alignStartEnd(l,r,e),c=PI*-.5):(u=a-t,d=_alignStartEnd(l,e,r),c=PI*.5),h=r-e),{titleX:u,titleY:d,maxWidth:h,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=toFont(e.font),a=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:h}=this._drawArgs(a);renderText(t,e.text,0,0,s,{color:e.color,maxWidth:c,rotation:h,textAlign:_toLeftRightCenter(e.align),textBaseline:"middle",translation:[o,l]})}}function createTitle(n,t){const e=new Title({ctx:n.ctx,options:t,chart:n});layouts.configure(n,e,t),layouts.addBox(n,e),n.titleBlock=e}var plugin_title={id:"title",_element:Title,start(n,t,e){createTitle(n,e)},stop(n){const t=n.titleBlock;layouts.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const s=n.titleBlock;layouts.configure(n,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(n){if(!n.length)return!1;let t,e,s=0,r=0,a=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();s+=l.x,r+=l.y,++a}}return{x:s/a,y:r/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,s=t.y,r=Number.POSITIVE_INFINITY,a,o,l;for(a=0,o=n.length;a<o;++a){const c=n[a].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),u=distanceBetweenPoints(t,h);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();e=c.x,s=c.y}return{x:e,y:s}}};function pushOrConcat(n,t){return t&&(isArray(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function splitNewlines(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function createTooltipItem(n,t){const{element:e,datasetIndex:s,index:r}=t,a=n.getDatasetMeta(s).controller,{label:o,value:l}=a.getLabelAndValue(r);return{chart:n,label:o,parsed:a.getParsed(r),raw:n.data.datasets[s].data[r],formattedValue:l,dataset:a.getDataset(),dataIndex:r,datasetIndex:s,element:e}}function getTooltipSize(n,t){const e=n.chart.ctx,{body:s,footer:r,title:a}=n,{boxWidth:o,boxHeight:l}=t,c=toFont(t.bodyFont),h=toFont(t.titleFont),u=toFont(t.footerFont),d=a.length,f=r.length,p=s.length,g=toPadding(t.padding);let b=g.height,m=0,v=s.reduce((C,x)=>C+x.before.length+x.lines.length+x.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*h.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){const C=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=p*C+(v-p)*c.lineHeight+(v-1)*t.bodySpacing}f&&(b+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let y=0;const S=function(C){m=Math.max(m,e.measureText(C).width+y)};return e.save(),e.font=h.string,each(n.title,S),e.font=c.string,each(n.beforeBody.concat(n.afterBody),S),y=t.displayColors?o+2+t.boxPadding:0,each(s,C=>{each(C.before,S),each(C.lines,S),each(C.after,S)}),y=0,e.font=u.string,each(n.footer,S),e.restore(),m+=g.width,{width:m,height:b}}function determineYAlign(n,t){const{y:e,height:s}=t;return e<s/2?"top":e>n.height-s/2?"bottom":"center"}function doesNotFitWithAlign(n,t,e,s){const{x:r,width:a}=s,o=e.caretSize+e.caretPadding;if(n==="left"&&r+a+o>t.width||n==="right"&&r-a-o<0)return!0}function determineXAlign(n,t,e,s){const{x:r,width:a}=e,{width:o,chartArea:{left:l,right:c}}=n;let h="center";return s==="center"?h=r<=(l+c)/2?"left":"right":r<=a/2?h="left":r>=o-a/2&&(h="right"),doesNotFitWithAlign(h,n,t,e)&&(h="center"),h}function determineAlignment(n,t,e){const s=e.yAlign||t.yAlign||determineYAlign(n,e);return{xAlign:e.xAlign||t.xAlign||determineXAlign(n,t,e,s),yAlign:s}}function alignX(n,t){let{x:e,width:s}=n;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function alignY(n,t,e){let{y:s,height:r}=n;return t==="top"?s+=e:t==="bottom"?s-=r+e:s-=r/2,s}function getBackgroundPoint(n,t,e,s){const{caretSize:r,caretPadding:a,cornerRadius:o}=n,{xAlign:l,yAlign:c}=e,h=r+a,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=toTRBLCorners(o);let g=alignX(t,l);const b=alignY(t,c,h);return c==="center"?l==="left"?g+=h:l==="right"&&(g-=h):l==="left"?g-=Math.max(u,f)+r:l==="right"&&(g+=Math.max(d,p)+r),{x:_limitValue(g,0,s.width-t.width),y:_limitValue(b,0,s.height-t.height)}}function getAlignedX(n,t,e){const s=toPadding(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-s.right:n.x+s.left}function getBeforeAfterBodyLines(n){return pushOrConcat([],splitNewlines(n))}function createTooltipContext(n,t,e){return createContext(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function overrideCallbacks(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}class Tooltip extends Element$1{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&e.options.animation&&s.animations,a=new Animations(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,r=s.beforeTitle.apply(this,[t]),a=s.title.apply(this,[t]),o=s.afterTitle.apply(this,[t]);let l=[];return l=pushOrConcat(l,splitNewlines(r)),l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(o)),l}getBeforeBody(t,e){return getBeforeAfterBodyLines(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:s}=e,r=[];return each(t,a=>{const o={before:[],lines:[],after:[]},l=overrideCallbacks(s,a);pushOrConcat(o.before,splitNewlines(l.beforeLabel.call(this,a))),pushOrConcat(o.lines,l.label.call(this,a)),pushOrConcat(o.after,splitNewlines(l.afterLabel.call(this,a))),r.push(o)}),r}getAfterBody(t,e){return getBeforeAfterBodyLines(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:s}=e,r=s.beforeFooter.apply(this,[t]),a=s.footer.apply(this,[t]),o=s.afterFooter.apply(this,[t]);let l=[];return l=pushOrConcat(l,splitNewlines(r)),l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(o)),l}_createItems(t){const e=this._active,s=this.chart.data,r=[],a=[],o=[];let l=[],c,h;for(c=0,h=e.length;c<h;++c)l.push(createTooltipItem(this.chart,e[c]));return t.filter&&(l=l.filter((u,d,f)=>t.filter(u,d,f,s))),t.itemSort&&(l=l.sort((u,d)=>t.itemSort(u,d,s))),each(l,u=>{const d=overrideCallbacks(t.callbacks,u);r.push(d.labelColor.call(this,u)),a.push(d.labelPointStyle.call(this,u)),o.push(d.labelTextColor.call(this,u))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const s=this.options.setContext(this.getContext()),r=this._active;let a,o=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const l=positioners[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=getTooltipSize(this,s),h=Object.assign({},l,c),u=determineAlignment(this.chart,s,h),d=getBackgroundPoint(s,h,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,a={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,r){const a=this.getCaretPosition(t,s,r);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,s){const{xAlign:r,yAlign:a}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:h,bottomLeft:u,bottomRight:d}=toTRBLCorners(l),{x:f,y:p}=t,{width:g,height:b}=e;let m,v,y,S,C,x;return a==="center"?(C=p+b/2,r==="left"?(m=f,v=m-o,S=C+o,x=C-o):(m=f+g,v=m+o,S=C-o,x=C+o),y=m):(r==="left"?v=f+Math.max(c,u)+o:r==="right"?v=f+g-Math.max(h,d)-o:v=this.caretX,a==="top"?(S=p,C=S-o,m=v-o,y=v+o):(S=p+b,C=S+o,m=v+o,y=v-o),x=S),{x1:m,x2:v,x3:y,y1:S,y2:C,y3:x}}drawTitle(t,e,s){const r=this.title,a=r.length;let o,l,c;if(a){const h=getRtlAdapter(s.rtl,this.x,this.width);for(t.x=getAlignedX(this,s.titleAlign,s),e.textAlign=h.textAlign(s.titleAlign),e.textBaseline="middle",o=toFont(s.titleFont),l=s.titleSpacing,e.fillStyle=s.titleColor,e.font=o.string,c=0;c<a;++c)e.fillText(r[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===a&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,e,s,r,a){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:h,boxPadding:u}=a,d=toFont(a.bodyFont),f=getAlignedX(this,"left",a),p=r.x(f),g=c<d.lineHeight?(d.lineHeight-c)/2:0,b=e.y+g;if(a.usePointStyle){const m={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(p,h)+h/2,y=b+c/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,drawPoint(t,m,v,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,drawPoint(t,m,v,y)}else{t.lineWidth=isObject(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=r.leftForLtr(p,h-u),v=r.leftForLtr(r.xPlus(p,1),h-u-2),y=toTRBLCorners(o.borderRadius);Object.values(y).some(S=>S!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,addRoundedRectPath(t,{x:m,y:b,w:h,h:c,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),addRoundedRectPath(t,{x:v,y:b+1,w:h-2,h:c-2,radius:y}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(m,b,h,c),t.strokeRect(m,b,h,c),t.fillStyle=o.backgroundColor,t.fillRect(v,b+1,h-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:r}=this,{bodySpacing:a,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:u}=s,d=toFont(s.bodyFont);let f=d.lineHeight,p=0;const g=getRtlAdapter(s.rtl,this.x,this.width),b=function(E){e.fillText(E,g.x(t.x+p),t.y+f/2),t.y+=f+a},m=g.textAlign(o);let v,y,S,C,x,k,w;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=getAlignedX(this,m,s),e.fillStyle=s.bodyColor,each(this.beforeBody,b),p=l&&m!=="right"?o==="center"?h/2+u:h+2+u:0,C=0,k=r.length;C<k;++C){for(v=r[C],y=this.labelTextColors[C],e.fillStyle=y,each(v.before,b),S=v.lines,l&&S.length&&(this._drawColorBox(e,t,C,g,s),f=Math.max(d.lineHeight,c)),x=0,w=S.length;x<w;++x)b(S[x]),f=d.lineHeight;each(v.after,b)}p=0,f=d.lineHeight,each(this.afterBody,b),t.y-=a}drawFooter(t,e,s){const r=this.footer,a=r.length;let o,l;if(a){const c=getRtlAdapter(s.rtl,this.x,this.width);for(t.x=getAlignedX(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=c.textAlign(s.footerAlign),e.textBaseline="middle",o=toFont(s.footerFont),e.fillStyle=s.footerColor,e.font=o.string,l=0;l<a;++l)e.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,e,s,r){const{xAlign:a,yAlign:o}=this,{x:l,y:c}=t,{width:h,height:u}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:g}=toTRBLCorners(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(l+d,c),o==="top"&&this.drawCaret(t,e,s,r),e.lineTo(l+h-f,c),e.quadraticCurveTo(l+h,c,l+h,c+f),o==="center"&&a==="right"&&this.drawCaret(t,e,s,r),e.lineTo(l+h,c+u-g),e.quadraticCurveTo(l+h,c+u,l+h-g,c+u),o==="bottom"&&this.drawCaret(t,e,s,r),e.lineTo(l+p,c+u),e.quadraticCurveTo(l,c+u,l,c+u-p),o==="center"&&a==="left"&&this.drawCaret(t,e,s,r),e.lineTo(l,c+d),e.quadraticCurveTo(l,c,l+d,c),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,r=s&&s.x,a=s&&s.y;if(r||a){const o=positioners[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=getTooltipSize(this,t),c=Object.assign({},o,this._size),h=determineAlignment(e,t,c),u=getBackgroundPoint(t,c,h,e);(r._to!==u.x||a._to!==u.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=toPadding(e.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(a,t,r,e),overrideTextDirection(t,e.textDirection),a.y+=o.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),restoreTextDirection(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),a=!_elementsEqual(s,r),o=this._positionChanged(r,e);(a||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],o=this._getActiveElements(t,a,e,s),l=this._positionChanged(o,t),c=e||!_elementsEqual(o,a)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,s,r){const a=this.options;if(t.type==="mouseout")return[];if(!r)return e;const o=this.chart.getElementsAtEventForMode(t,a.mode,a,s);return a.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:s,caretY:r,options:a}=this,o=positioners[a.position].call(this,t,e);return o!==!1&&(s!==o.x||r!==o.y)}}Tooltip.positioners=positioners;var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(n,t,e){e&&(n.tooltip=new Tooltip({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",e)===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return isNullOrUndef(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const addIfString=(n,t,e,s)=>(typeof t=="string"?(e=n.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function findOrAddLabel(n,t,e,s){const r=n.indexOf(t);if(r===-1)return addIfString(n,t,e,s);const a=n.lastIndexOf(t);return r!==a?e:r}const validIndex=(n,t)=>n===null?null:_limitValue(Math.round(n),0,t);class CategoryScale extends Scale{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:r,label:a}of e)s[r]===a&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(isNullOrUndef(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:findOrAddLabel(s,t,valueOrDefault(e,t),this._addedLabels),validIndex(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,r=[];let a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}CategoryScale.id="category";CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};function generateTicks$1(n,t){const e=[],{bounds:r,step:a,min:o,max:l,precision:c,count:h,maxTicks:u,maxDigits:d,includeBounds:f}=n,p=a||1,g=u-1,{min:b,max:m}=t,v=!isNullOrUndef(o),y=!isNullOrUndef(l),S=!isNullOrUndef(h),C=(m-b)/(d+1);let x=niceNum((m-b)/g/p)*p,k,w,E,P;if(x<1e-14&&!v&&!y)return[{value:b},{value:m}];P=Math.ceil(m/x)-Math.floor(b/x),P>g&&(x=niceNum(P*x/g/p)*p),isNullOrUndef(c)||(k=Math.pow(10,c),x=Math.ceil(x*k)/k),r==="ticks"?(w=Math.floor(b/x)*x,E=Math.ceil(m/x)*x):(w=b,E=m),v&&y&&a&&almostWhole((l-o)/a,x/1e3)?(P=Math.round(Math.min((l-o)/x,u)),x=(l-o)/P,w=o,E=l):S?(w=v?o:w,E=y?l:E,P=h-1,x=(E-w)/P):(P=(E-w)/x,almostEquals(P,Math.round(P),x/1e3)?P=Math.round(P):P=Math.ceil(P));const O=Math.max(_decimalPlaces(x),_decimalPlaces(w));k=Math.pow(10,isNullOrUndef(c)?O:c),w=Math.round(w*k)/k,E=Math.round(E*k)/k;let $=0;for(v&&(f&&w!==o?(e.push({value:o}),w<o&&$++,almostEquals(Math.round((w+$*x)*k)/k,o,relativeLabelSize(o,C,n))&&$++):w<o&&$++);$<P;++$)e.push({value:Math.round((w+$*x)*k)/k});return y&&f&&E!==l?e.length&&almostEquals(e[e.length-1].value,l,relativeLabelSize(l,C,n))?e[e.length-1].value=l:e.push({value:l}):(!y||E===l)&&e.push({value:E}),e}function relativeLabelSize(n,t,{horizontal:e,minRotation:s}){const r=toRadians(s),a=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/a,o)}class LinearScaleBase extends Scale{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return isNullOrUndef(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:r,max:a}=this;const o=c=>r=e?r:c,l=c=>a=s?a:c;if(t){const c=sign(r),h=sign(a);c<0&&h<0?l(0):c>0&&h>0&&o(0)}if(r===a){let c=1;(a>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(c=Math.abs(a*.05)),l(a+c),t||o(r-c)}this.min=r,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,o=generateTicks$1(r,a);return t.bounds==="ticks"&&_setMinAndMaxByKey(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-e)/Math.max(t.length-1,1)/2;e-=r,s+=r}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return formatNumber(t,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=isNumberFinite(t)?t:0,this.max=isNumberFinite(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=toRadians(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}LinearScale.id="linear";LinearScale.defaults={ticks:{callback:Ticks.formatters.numeric}};function isMajor(n){return n/Math.pow(10,Math.floor(log10(n)))===1}function generateTicks(n,t){const e=Math.floor(log10(t.max)),s=Math.ceil(t.max/Math.pow(10,e)),r=[];let a=finiteOrDefault(n.min,Math.pow(10,Math.floor(log10(t.min)))),o=Math.floor(log10(a)),l=Math.floor(a/Math.pow(10,o)),c=o<0?Math.pow(10,Math.abs(o)):1;do r.push({value:a,major:isMajor(a)}),++l,l===10&&(l=1,++o,c=o>=0?1:c),a=Math.round(l*Math.pow(10,o)*c)/c;while(o<e||o===e&&l<s);const h=finiteOrDefault(n.max,a);return r.push({value:h,major:isMajor(a)}),r}class LogarithmicScale extends Scale{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=LinearScaleBase.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return isNumberFinite(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=isNumberFinite(t)?Math.max(0,t):null,this.max=isNumberFinite(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,r=this.max;const a=c=>s=t?s:c,o=c=>r=e?r:c,l=(c,h)=>Math.pow(10,Math.floor(log10(c))+h);s===r&&(s<=0?(a(1),o(10)):(a(l(s,-1)),o(l(r,1)))),s<=0&&a(l(r,-1)),r<=0&&o(l(s,1)),this._zero&&this.min!==this._suggestedMin&&s===l(this.min,0)&&a(l(s,-1)),this.min=s,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=generateTicks(e,this);return t.bounds==="ticks"&&_setMinAndMaxByKey(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":formatNumber(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=log10(t),this._valueRange=log10(this.max)-log10(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(log10(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}LogarithmicScale.id="logarithmic";LogarithmicScale.defaults={ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}};function getTickBackdropHeight(n){const t=n.ticks;if(t.display&&n.display){const e=toPadding(t.backdropPadding);return valueOrDefault(t.font&&t.font.size,defaults.font.size)+e.height}return 0}function measureLabelSize(n,t,e){return e=isArray(e)?e:[e],{w:_longestText(n,t.string,e),h:e.length*t.lineHeight}}function determineLimits(n,t,e,s,r){return n===s||n===r?{start:t-e/2,end:t+e/2}:n<s||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function fitWithPointLabels(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),s=[],r=[],a=n._pointLabels.length,o=n.options.pointLabels,l=o.centerPointLabels?PI/a:0;for(let c=0;c<a;c++){const h=o.setContext(n.getPointLabelContext(c));r[c]=h.padding;const u=n.getPointPosition(c,n.drawingArea+r[c],l),d=toFont(h.font),f=measureLabelSize(n.ctx,d,n._pointLabels[c]);s[c]=f;const p=_normalizeAngle(n.getIndexAngle(c)+l),g=Math.round(toDegrees(p)),b=determineLimits(g,u.x,f.w,0,180),m=determineLimits(g,u.y,f.h,90,270);updateLimits(e,t,p,b,m)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=buildPointLabelItems(n,s,r)}function updateLimits(n,t,e,s,r){const a=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let l=0,c=0;s.start<t.l?(l=(t.l-s.start)/a,n.l=Math.min(n.l,t.l-l)):s.end>t.r&&(l=(s.end-t.r)/a,n.r=Math.max(n.r,t.r+l)),r.start<t.t?(c=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-c)):r.end>t.b&&(c=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+c))}function buildPointLabelItems(n,t,e){const s=[],r=n._pointLabels.length,a=n.options,o=getTickBackdropHeight(a)/2,l=n.drawingArea,c=a.pointLabels.centerPointLabels?PI/r:0;for(let h=0;h<r;h++){const u=n.getPointPosition(h,l+o+e[h],c),d=Math.round(toDegrees(_normalizeAngle(u.angle+HALF_PI))),f=t[h],p=yForAngle(u.y,f.h,d),g=getTextAlignForAngle(d),b=leftForTextAlign(u.x,f.w,g);s.push({x:u.x,y:p,textAlign:g,left:b,top:p,right:b+f.w,bottom:p+f.h})}return s}function getTextAlignForAngle(n){return n===0||n===180?"center":n<180?"left":"right"}function leftForTextAlign(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function yForAngle(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function drawPointLabels(n,t){const{ctx:e,options:{pointLabels:s}}=n;for(let r=t-1;r>=0;r--){const a=s.setContext(n.getPointLabelContext(r)),o=toFont(a.font),{x:l,y:c,textAlign:h,left:u,top:d,right:f,bottom:p}=n._pointLabelItems[r],{backdropColor:g}=a;if(!isNullOrUndef(g)){const b=toTRBLCorners(a.borderRadius),m=toPadding(a.backdropPadding);e.fillStyle=g;const v=u-m.left,y=d-m.top,S=f-u+m.width,C=p-d+m.height;Object.values(b).some(x=>x!==0)?(e.beginPath(),addRoundedRectPath(e,{x:v,y,w:S,h:C,radius:b}),e.fill()):e.fillRect(v,y,S,C)}renderText(e,n._pointLabels[r],l,c+o.lineHeight/2,o,{color:a.color,textAlign:h,textBaseline:"middle"})}}function pathRadiusLine(n,t,e,s){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,TAU);else{let a=n.getPointPosition(0,t);r.moveTo(a.x,a.y);for(let o=1;o<s;o++)a=n.getPointPosition(o,t),r.lineTo(a.x,a.y)}}function drawRadiusLine(n,t,e,s){const r=n.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!s||!o||!l||e<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),pathRadiusLine(n,e,a,s),r.closePath(),r.stroke(),r.restore())}function createPointLabelContext(n,t,e){return createContext(n,{label:e,index:t,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=toPadding(getTickBackdropHeight(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=isNumberFinite(t)&&!isNaN(t)?t:0,this.max=isNumberFinite(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(t){LinearScaleBase.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const r=callback(this.options.pointLabels.callback,[e,s],this);return r||r===0?r:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,r))}getIndexAngle(t){const e=TAU/(this._pointLabels.length||1),s=this.options.startAngle||0;return _normalizeAngle(t*e+toRadians(s))}getDistanceFromCenterForValue(t){if(isNullOrUndef(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(isNullOrUndef(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return createPointLabelContext(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const r=this.getIndexAngle(t)-HALF_PI+s;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:r,bottom:a}=this._pointLabelItems[t];return{left:e,top:s,right:r,bottom:a}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:r}=e,a=this._pointLabels.length;let o,l,c;if(e.pointLabels.display&&drawPointLabels(this,a),r.display&&this.ticks.forEach((h,u)=>{if(u!==0){l=this.getDistanceFromCenterForValue(h.value);const d=r.setContext(this.getContext(u-1));drawRadiusLine(this,d,l,a)}}),s.display){for(t.save(),o=a-1;o>=0;o--){const h=s.setContext(this.getPointLabelContext(o)),{color:u,lineWidth:d}=h;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(o,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const r=this.getIndexAngle(0);let a,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&!e.reverse)return;const h=s.setContext(this.getContext(c)),u=toFont(h.font);if(a=this.getDistanceFromCenterForValue(this.ticks[c].value),h.showLabelBackdrop){t.font=u.string,o=t.measureText(l.label).width,t.fillStyle=h.backdropColor;const d=toPadding(h.backdropPadding);t.fillRect(-o/2-d.left,-a-u.size/2-d.top,o+d.width,u.size+d.height)}renderText(t,l.label,0,-a,u,{color:h.color})}),t.restore()}drawTitle(){}}RadialLinearScale.id="radialLinear";RadialLinearScale.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(n,t){return n-t}function parse(n,t){if(isNullOrUndef(t))return null;const e=n._adapter,{parser:s,round:r,isoWeekday:a}=n._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),isNumberFinite(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(isNumber(a)||a===!0)?e.startOf(o,"isoWeek",a):e.startOf(o,r)),+o)}function determineUnitForAutoTicks(n,t,e,s){const r=UNITS.length;for(let a=UNITS.indexOf(n);a<r-1;++a){const o=INTERVALS[UNITS[a]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=s)return UNITS[a]}return UNITS[r-1]}function determineUnitForFormatting(n,t,e,s,r){for(let a=UNITS.length-1;a>=UNITS.indexOf(e);a--){const o=UNITS[a];if(INTERVALS[o].common&&n._adapter.diff(r,s,o)>=t-1)return o}return UNITS[e?UNITS.indexOf(e):0]}function determineMajorUnit(n){for(let t=UNITS.indexOf(n)+1,e=UNITS.length;t<e;++t)if(INTERVALS[UNITS[t]].common)return UNITS[t]}function addTick(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:s,hi:r}=_lookup(e,t),a=e[s]>=t?e[s]:e[r];n[a]=!0}}function setMajorTicks(n,t,e,s){const r=n._adapter,a=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=a;l<=o;l=+r.add(l,1,s))c=e[l],c>=0&&(t[c].major=!0);return t}function ticksFromTimestamps(n,t,e){const s=[],r={},a=t.length;let o,l;for(o=0;o<a;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return a===0||!e?s:setMajorTicks(n,s,r,e)}class TimeScale extends Scale{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const s=t.time||(t.time={}),r=this._adapter=new adapters._date(t.adapters.date);r.init(e),mergeIf(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:parse(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:r,max:a,minDefined:o,maxDefined:l}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!l&&!isNaN(h.max)&&(a=Math.max(a,h.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=isNumberFinite(r)&&!isNaN(r)?r:+e.startOf(Date.now(),s),a=isNumberFinite(a)&&!isNaN(a)?a:+e.endOf(Date.now(),s)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,o=this.max,l=_filterBetween(r,a,o);return this._unit=e.unit||(s.autoSkip?determineUnitForAutoTicks(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):determineUnitForFormatting(this,l.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),ticksFromTimestamps(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let e=0,s=0,r,a;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?s=a:s=(a-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=_limitValue(e,0,o),s=_limitValue(s,0,o),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,r=this.options,a=r.time,o=a.unit||determineUnitForAutoTicks(a.minUnit,e,s,this._getLabelCapacity(e)),l=valueOrDefault(a.stepSize,1),c=o==="week"?a.isoWeekday:!1,h=isNumber(c)||c===!0,u={};let d=e,f,p;if(h&&(d=+t.startOf(d,"isoWeek",c)),d=+t.startOf(d,h?"day":o),t.diff(s,e,o)>1e5*l)throw new Error(e+" and "+s+" are too far apart with stepSize of "+l+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+t.add(f,l,o),p++)addTick(u,f,g);return(f===s||r.bounds==="ticks"||p===1)&&addTick(u,f,g),Object.keys(u).sort((b,m)=>b-m).map(b=>+b)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}_tickFormatFunction(t,e,s,r){const a=this.options,o=a.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&o[l],u=c&&o[c],d=s[e],f=c&&u&&d&&d.major,p=this._adapter.format(t,r||(f?u:h)),g=a.ticks.callback;return g?callback(g,[p,e,s],this):p}generateTickLabels(t){let e,s,r;for(e=0,s=t.length;e<s;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,r=toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*a+l*o,h:s*o+l*a}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,r=s[e.unit]||s.millisecond,a=this._tickFormatFunction(t,0,ticksFromTimestamps(this,[t],this._majorUnit),r),o=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,s=r.length;e<s;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const r=this.getLabels();for(e=0,s=r.length;e<s;++e)t.push(parse(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return _arrayUnique(t.sort(sorter))}}TimeScale.id="time";TimeScale.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function interpolate(n,t,e){let s=0,r=n.length-1,a,o,l,c;e?(t>=n[s].pos&&t<=n[r].pos&&({lo:s,hi:r}=_lookupByKey(n,"pos",t)),{pos:a,time:l}=n[s],{pos:o,time:c}=n[r]):(t>=n[s].time&&t<=n[r].time&&({lo:s,hi:r}=_lookupByKey(n,"time",t)),{time:a,pos:l}=n[s],{time:o,pos:c}=n[r]);const h=o-a;return h?l+(c-l)*(t-a)/h:l}class TimeSeriesScale extends TimeScale{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=interpolate(e,this.min),this._tableRange=interpolate(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,r=[],a=[];let o,l,c,h,u;for(o=0,l=t.length;o<l;++o)h=t[o],h>=e&&h<=s&&r.push(h);if(r.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],h=r[o],Math.round((u+c)/2)!==h&&a.push({time:h,pos:o/(l-1)});return a}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(interpolate(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return interpolate(this._table,s*this._tableRange+this._minPos,!0)}}TimeSeriesScale.id="timeseries";TimeSeriesScale.defaults=TimeScale.defaults;var ChartEmits;(function(n){n.ChartRendered="chart:rendered",n.ChartUpdated="chart:updated",n.ChartDestroyed="chart:destroyed",n.LabelsUpdated="labels:updated"})(ChartEmits||(ChartEmits={}));function chartCreate(n,t,e,s){n(t,e),s!==void 0&&s.emit(ChartEmits.ChartRendered)}function chartUpdate(n,t){n.update(),t!==void 0&&t.emit(ChartEmits.ChartUpdated)}function chartDestroy(n,t){n.destroy(),t!==void 0&&t.emit(ChartEmits.ChartDestroyed)}function getChartData(n,t){const e={labels:typeof n.labels>"u"?[]:[...n.labels],datasets:[]};return setChartDatasets(e,{...n},t),e}function setChartDatasets(n,t,e){const s=[];n.datasets=t.datasets.map(r=>{const a=n.datasets.find(o=>o[e]===r[e]);return!a||!r.data||s.includes(a)?{...r}:(s.push(a),Object.assign(a,r),a)})}function setChartLabels(n,t,e){n.data.labels=t,e!==void 0&&e.emit(ChartEmits.LabelsUpdated)}function setChartOptions(n,t){n.options={...t}}function compareData(n,t){const e=n.datasets.map(r=>r.label),s=t.datasets.map(r=>r.label);return t.datasets.length===n.datasets.length&&e.every((r,a)=>r===s[a])}const templateError="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",ANNOTATION_PLUGIN_KEY="annotation";function generateChart(n,t,e){let s={};return{props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:n},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},data(){return{_chart:null,_id:Math.random().toString(36).substring(2)}},computed:{hasAnnotationPlugin(){var r,a;return typeof((r=this.chartOptions)===null||r===void 0||(a=r.plugins)===null||a===void 0?void 0:a[ANNOTATION_PLUGIN_KEY])<"u"}},created(){Chart.register(e)},mounted(){s[this.$data._id]=null,"datasets"in this.chartData&&this.chartData.datasets.length>0&&(chartCreate(this.renderChart,this.chartData,this.chartOptions),this.$emit(ChartEmits.ChartRendered))},watch:{chartData:{handler:function(r,a){this.chartDataHandler(r,a)},deep:!0},chartOptions:{handler:function(r){this.chartOptionsHandler(r)},deep:!0}},methods:{renderChart(r,a){const o=this.getCurrentChart();if(o!==null&&(chartDestroy(o),this.$emit(ChartEmits.ChartDestroyed)),this.$refs.canvas){const l=getChartData(r,this.datasetIdKey),c=this.$refs.canvas.getContext("2d");c!==null&&this.setCurrentChart(new Chart(c,{type:t,data:l,options:a,plugins:this.plugins}))}else throw new Error(templateError)},chartDataHandler(r,a){const o={...r},l={...a},c=this.getCurrentChart();Object.keys(l).length>0?compareData(o,l)&&c!==null?(setChartDatasets(c.data,o,this.datasetIdKey),o.labels!==void 0&&(setChartLabels(c,o.labels),this.$emit(ChartEmits.LabelsUpdated)),this.updateChart(),this.$emit(ChartEmits.ChartUpdated)):(c!==null&&(chartDestroy(c),this.$emit(ChartEmits.ChartDestroyed)),chartCreate(this.renderChart,this.chartData,this.chartOptions),this.$emit(ChartEmits.ChartRendered)):(c!==null&&(chartDestroy(c),this.$emit(ChartEmits.ChartDestroyed)),chartCreate(this.renderChart,this.chartData,this.chartOptions),this.$emit(ChartEmits.ChartRendered))},chartOptionsHandler(r){const a=this.getCurrentChart();a!==null?(setChartOptions(a,r),this.updateChart()):chartCreate(this.renderChart,this.chartData,this.chartOptions)},updateChart(){const r=this.getCurrentChart();chartUpdate(r)},getCurrentChart(){return this.hasAnnotationPlugin?s[this.$data._id]:this.$data._chart},setCurrentChart(r){this.hasAnnotationPlugin?s[this.$data._id]=r:this.$data._chart=r}},beforeDestroy(){const r=this.getCurrentChart();r!==null&&(chartDestroy(r),this.$emit(ChartEmits.ChartDestroyed))},render:function(r){return r("div",{style:this.styles,class:this.cssClasses},[r("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])}}}const Line=generateChart("line-chart","line",LineController);Chart.register(plugin_title,plugin_tooltip,plugin_legend,LineElement,LinearScale,CategoryScale,PointElement);const _sfc_main={components:{LineChartGenerator:Line},props:{data:Array},data(){return{ready:!1,chartData:{labels:[],datasets:[{label:__("Paid Orders"),backgroundColor:"#16a34a",data:[]}]},chartOptions:{responsive:!0,maintainAspectRatio:!1}}},mounted(){this.data.forEach(n=>{this.chartData.labels.push(n.date),this.chartData.datasets[0].data.push(n.count)}),this.ready=!0}};var _sfc_render=function n(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-wrap -mx-2 mb-4"},[e("div",{staticClass:"px-2 w-full"},[t.ready?e("div",{staticClass:"px-1"},[e("LineChartGenerator",{attrs:{"chart-options":t.chartOptions,"chart-data":t.chartData,"chart-id":"orders-chart","dataset-id-key":"label",cssClasses:"",styles:{},plugins:[],width:"400",height:"200"}})],1):t._e()])])},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,null,null,null);const OrdersChart=__component__.exports;Statamic.$components.register("coupon-code-fieldtype",CouponCodeFieldtype);Statamic.$components.register("coupon-summary-fieldtype",CouponSummaryFieldtype);Statamic.$components.register("coupon-value-fieldtype",CouponValueFieldtype);Statamic.$components.register("gateway-fieldtype",GatewayFieldtype);Statamic.$components.register("money-fieldtype",MoneyFieldtype);Statamic.$components.register("order-status-fieldtype",OrderStatusFieldtype);Statamic.$components.register("order_status-fieldtype-index",OrderStatusIndexFieldtype);Statamic.$components.register("payment-status-fieldtype",PaymentStatusFieldtype);Statamic.$components.register("payment_status-fieldtype-index",PaymentStatusIndexFieldtype);Statamic.$components.register("product-variant-fieldtype",ProductVariantFieldtype);Statamic.$components.register("product-variants-fieldtype",ProductVariantsFieldtype);Statamic.$components.register("sc_status_log-fieldtype",StatusLogFieldtype);Statamic.$components.register("region-selector",RegionSelector);Statamic.$components.register("coupon-listing",CouponListing);Statamic.$components.register("orders-chart",OrdersChart);
